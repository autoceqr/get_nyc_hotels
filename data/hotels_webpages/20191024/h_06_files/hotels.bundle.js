!function(l){function webpackJsonpCallback(e){for(var t,i,n=e[0],r=e[1],a=e[2],o=0,s=[];o<n.length;o++)i=n[o],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&s.push(c[i][0]),c[i]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(l[t]=r[t]);for(d&&d(e);s.length;)s.shift()();return u.push.apply(u,a||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<u.length;t++){for(var i=u[t],n=!0,r=1;r<i.length;r++){var a=i[r];0!==c[a]&&(n=!1)}n&&(u.splice(t--,1),e=__webpack_require__(__webpack_require__.s=i[0]))}return e}var i={},c={20:0},u=[];function __webpack_require__(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}__webpack_require__.m=l,__webpack_require__.c=i,__webpack_require__.d=function(e,t,i){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(__webpack_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(i,n,function(e){return t[e]}.bind(null,n));return i},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="";var e=window.webpackJsonp=window.webpackJsonp||[],t=e.push.bind(e);e.push=webpackJsonpCallback,e=e.slice();for(var n=0;n<e.length;n++)webpackJsonpCallback(e[n]);var d=t;u.push([727,0]),checkDeferredModules()}({11:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessorService=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(3),s=i(8),l=i(2),c=i(17),u=i(192),d=i(5);var p=(n(ProcessorService,[{key:"initFavorite",value:function initFavorite(){var t=this;this.userId=Cookies.get("fav_uid")||null,this.userId&&this.apiService.getFavorites(this.userId).pipe((0,u.take)(1)).subscribe(function(e){t.store.dispatch({type:c.INITIATE_FAVORITE,payload:(0,l.get)(e,"data")})})}},{key:"trackFavorite",value:function trackFavorite(e){var t=e.action,i=e.response,n=e.data,r=(0,l.find)(i.data.entries,{id:n.entryId}),a={eventInfoData:{eventName:t,interaction:n.btnType},pageInfoData:{viewType:n.btnType,program:n.list},productInfoData:{}};n.entryId&&r&&(a.productInfoData.name=r.displayTitle||null,a.productInfoData.category=r.primaryCategoryName||null),(0,d.trackEvent)(a)}},{key:"addFavorite",value:function addFavorite(t){var i=this,n=t.entryId,r=t.list;t.btnType,this.userId?this.apiService.addRemoveItem({uid:this.userId,method:"POST",entryId:n,list:r}).pipe((0,u.take)(1)).subscribe(function(e){i.store.dispatch({type:c.ADD_FAVORITE,payload:(0,l.get)(e,"data")}),i.trackFavorite({action:"Add Favorite",response:e,data:t})},function(e){console.log("error",e)}):this.apiService.createUser({method:"NEW"}).subscribe(function(e){i.userId=(0,l.get)(e,"data.userId"),Cookies.set("fav_uid",i.userId),i.apiService.addRemoveItem({uid:i.userId,method:"POST",entryId:n,list:r}).pipe((0,u.take)(1)).subscribe(function(e){i.store.dispatch({type:c.ADD_FAVORITE,payload:(0,l.get)(e,"data")})},function(e){console.log("error",e)})})}},{key:"removeFavorite",value:function removeFavorite(t){var i=this,n=t.entryId;t.list,t.btnType,this.apiService.addRemoveItem({uid:this.userId,method:"DELETE",entryId:n}).pipe((0,u.take)(1)).subscribe(function(e){i.store.dispatch({type:c.DELETE_FAVORITE,payload:n}),i.trackFavorite({action:"Remove Favorite",response:e,data:t})},function(e){console.log("error",e)})}},{key:"fbLogin",value:function fbLogin(t,e){var i=this;this.FBLoaded=!0;var n="https://graph.facebook.com/",r="/picture?type=large",a="217512775360",o=null;this.FBUser={loaded:!0,authenticated:"connected"===t.status,photo:n+a+r,name:o,email:null},"CLEAR"!==e&&this.FB.api("/me",{fields:"name, email, picture"},function(e){i.FBUser.email=e.email,i.FBUser.name=e.name,i.FBUser.photo=n+t.authResponse.userID+r}),"CLEAR"===e?(this.userId=null,Cookies.remove("fav_uid"),this.store.dispatch({type:c.INITIATE_FAVORITE,payload:{entries:[],totalFavorites:0}})):!this.userId||"FB STATUS"!==e&&"FB LOGIN"!==e?this.apiService.createUser({method:e,fbToken:t.authResponse.userID,fbEmail:this.FBUser.email}).subscribe(function(e){i.userId=(0,l.get)(e,"data.userId"),Cookies.set("fav_uid",i.userId),i.initFavorite()}):this.apiService.updateUser(this.userId,t.authResponse.userID,this.FBUser.email).subscribe(function(e){i.store.dispatch({type:c.INITIATE_FAVORITE,payload:(0,l.get)(e,"data")})}),this.FB.XFBML.parse()}}]),ProcessorService);function ProcessorService(e,t){var i=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ProcessorService),this.store=e,this.apiService=t,this.FB=(0,l.get)(window,"FB"),this.FBLoaded=!1,this.isInitialized=!1,this.userId=Cookies.get("fav_uid")||Cookies.get("utrip_uid"),this.userFB={loaded:!1,authenticated:!1,photo:"https://graph.facebook.com/217512775360/picture?type=large",name:null},this.favState$=e.select("favoriteStore"),this.favState$.subscribe(function(e){var t=e.favorites;i.favorites=t}),this.initFavorite()}t.ProcessorService=p=(0,r.__decorate)([(0,a.Injectable)({providedIn:"root"}),(0,r.__metadata)("design:paramtypes",[o.Store,s.ApiService])],p),t.ProcessorService=p},12:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionsBlockComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(14),s=i(40),l=i(5),c=i(170),u=i(2);var d=(n(CollectionsBlockComponent,[{key:"ngOnInit",value:function ngOnInit(){var t=this,i="body-events-blocks"===this.feed?"events":"collection";this.layoutClass.container=this.layout&&(0,u.includes)(this.layout,"-list")?"card-list-container":"card-simple-container",this.layoutClass.cardFlex=this.layout&&(0,u.includes)(this.layout,"-list")?"":"card-flex card-flex-"+(this.includeAd||"half"===this.layout?"2":"4"),this.apiService.getFeedData({feed:this.feed,entryId:this.entryId,blockId:this.blockId}).pipe((0,s.take)(1)).subscribe(function(e){t.items=e.data&&e.data[0]?e.data[0][i]:null})}},{key:"slickInit",value:function slickInit(e){(0,c.slickMobleFriendly)(e)}},{key:"ngAfterViewInit",value:function ngAfterViewInit(){var t=this;this.state.isCarousel&&this.cards.changes.pipe((0,s.take)(1)).subscribe(function(e){t.slickInit(e.last.nativeElement.parentElement)})}}]),CollectionsBlockComponent);function CollectionsBlockComponent(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionsBlockComponent),this.apiService=e,this.elementRef=t,this.feed="binding",this.sort="binding",this.order="binding",this.header="binding",this.blockId="binding",this.moreText="binding",this.includeAd="binding",this.horizontalScroll="binding",this.description="binding",this.moreLink="binding",this.entryId="binding",this.layout="binding",this.limit="binding",this.grid="binding",this.layoutClass={},this.state={},(0,l.getBinding)(this,t),this.limit&&(this.cardLimit=parseInt(this.limit,10)),(0,l.isMobile)()?this.cardLimit=this.limit&&3===parseInt(this.limit,10)?3:4:this.state.isCarousel=this.layout&&(0,u.includes)(this.layout,"carousel")}(0,r.__decorate)([(0,a.ViewChildren)("collectionCards"),(0,r.__metadata)("design:type",a.QueryList)],d.prototype,"cards",void 0),t.CollectionsBlockComponent=d=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-collections-block",templateUrl:"/app/hybrid-app/src/app/components/collections/collections-block.component.html"}),(0,r.__metadata)("design:paramtypes",[o.ApiService,a.ElementRef])],d),t.CollectionsBlockComponent=d},14:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiService=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(16),c=i(186),s=i(2);var l=(n(ApiService,[{key:"getRestaurantWeekData",value:function getRestaurantWeekData(e,t){var i=0<arguments.length&&void 0!==e?e:179,n=t;n=n?"&participantId="+n:"";var r=[this.SERVICE_URL+"/nycgo/v2/restaurant-week?","entryId="+i,n].join("");return this.http.jsonp(r,"callback").pipe((0,c.map)(function(e){return e}))}},{key:"getFeedData",value:function getFeedData(e){var t=e.entryId,i=e.feed,n=e.channelId,r=e.blockId,a=e.limit,o=e.categoryIds,s=e.locationId,l=[this.SERVICE_URL+"/nycgo/v2/"+i,t?"?entryId="+t:"",s?"?locationId="+s:"",r?"&blockId="+r:"",a?"&limit="+a:"",n?"&channelId="+n:"",o?"&category="+o:""].join("");return this.http.jsonp(l,"callback").pipe((0,c.map)(function(e){return e}))}},{key:"getRelated",value:function getRelated(e){if(!e||!e.feed)return null;var t=e.feed,i=e.limit,n=e.primaryGroup,r=e.entryId,a=e.channel,o=e.category;r=r?r.replace(/\|/g,","):null,a=a?a.replace(/\|/g,","):null,o=o?o.replace(/\|/g,","):null;var s=[this.SERVICE_URL,"/nycgo/v2/"+t+"?",o?"&catId="+o:"",a?"&channel="+a:"",r?"&ignore="+r:"",i?"&limit="+i:"",n?"&primaryCatGroup="+n:""].join("");return this.http.jsonp(s,"callback").pipe((0,c.map)(function(e){return e}))}},{key:"getEntry",value:function getEntry(e){var t=e.channel,i=e.entryId,n=[this.SERVICE_URL,"/nycgo/v1/entry-data/",t,"/",i].join("");return this.http.jsonp(n,"callback").pipe((0,c.map)(function(e){return e}))}},{key:"getNearbyNeighborhood",value:function getNearbyNeighborhood(e,t,i,n,r){var a=[this.SERVICE_URL,"/nycgo/v2/nearby-neighborhood?","&neighborhood="+e,"&latitude="+t,"&longitude="+i,"&radius="+n,"&limit="+r].join("");return this.http.jsonp(a,"callback").pipe((0,c.map)(function(e){return e}))}}]),ApiService);function ApiService(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ApiService),this.http=e,this.SERVICE_URL=(0,s.get)(window,"nycgoGlobalSettings.serviceUrl")}t.ApiService=l=(0,r.__decorate)([(0,a.Injectable)({providedIn:"root"}),(0,r.__metadata)("design:paramtypes",[o.HttpClient])],l),t.ApiService=l},169:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.appState={initialState:!0,debug:!1,active:null,openContentFrame:!0,excludeFilterBadges:[],phase:1,pageSize:12},t.filterState={initialState:!0,isFiltered:!1,filters:{searchText:[{isSelected:!1,searchTerms:null}]},sort:[{name:"Default",urlTitle:"default",isSelected:!0},{name:"Name (A-Z)",value:"sortTitle",order:"asc",urlTitle:"sort",isSelected:!1},{name:"Name (Z-A)",value:"sortTitle",order:"desc",urlTitle:"sort",isSelected:!1}],pageNumber:1}},17:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.favoriteReducer=function favoriteReducer(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case a:case o:case s:return Object.assign(Object.assign({},e),{favorites:t[r].entries,totalFavorites:t[r].totalFavorites});case l:var i=t[r],n=e.favorites.filter(function(e){return e.id!==i});return Object.assign(Object.assign({},e),{favorites:n,totalFavorites:e.totalFavorites-1});default:return e}};var r="payload",a=t.INITIATE_FAVORITE="[Favorites] Initialize",o=t.UPDATE_FAVORITE="[Favorites] Update",s=t.ADD_FAVORITE="[Favorites] Add",l=t.DELETE_FAVORITE="[Favorites] Delete",c=t.favoriteState={favorites:[]}},170:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.slickMobleFriendly=function slickMobleFriendly(e){$(e).not(".slick-initialized").slick({slidesToShow:4,slidesToScroll:4,dots:!0,arrows:!0,infinite:!1,responsive:[{breakpoint:993,settings:{slidesToShow:2,slidesToScroll:2,swipe:!0,swipeToSlide:!0}},{breakpoint:769,settings:{slidesToShow:2,slidesToScroll:2,dots:!1,arrows:!1,centerMode:!0,swipe:!0,swipeToSlide:!0,infinite:!0}},{breakpoint:671,settings:{slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!1,centerMode:!0,swipe:!0,swipeToSlide:!0}}]}).on("setPosition",function(e){1==e.target.slick.$slides.length?$(this).addClass("no-slider"):$(this).removeClass("no-slider")})}},171:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppComponent=void 0;var n=i(0),r=i(1);var a=function AppComponent(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AppComponent),this.title="favorites"};t.AppComponent=a=(0,n.__decorate)([(0,r.Component)({selector:"nycgo-favorites",template:"<h1>Favorites</h1>"})],a),t.AppComponent=a},172:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramButtons=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(2),s=i(6),l=i(3),c=i(5);var u=(0,o.get)(window,"nycgoSettings.programList"),d="bw"==u?"projects/broadway-week":"obw"==u?"projects/off-broadway-week":"rw"==u?"projects/restaurant-week":"msw"==u?"projects/must-see-week":null,p={selector:"program-buttons",styles:["\n    .tooltip-inner {\n      max-width: auto; color: #010; background-color: transparent\n    }\n  "]};d||(p.template=""),d&&(p.templateUrl="/app/hybrid-app/"+d+"/src/app/program-btns.component.html");var h=(n(ProgramButtons,[{key:"ngOnInit",value:function ngOnInit(){if(this.bookingDetails="1"==this.state.phase||"bww"!=this.state.program?null:"2"==this.state.phase?this.item.p2BookingDetails[0]:this.item.p3BookingDetails[0],this.bookingDetails){var e=this.bookingDetails;e.url=[e.regularUrl,e.premiumUrl],e.soldOut=[e.regularSoldOut,e.premiumSoldOut],e.btnText=["Buy Now","Buy With Upgrade"],e.doubleSoldOut=e.regularSoldOut&&e.premiumSoldOut}this.kebabCategory=this.item.kebabCategory||(0,o.kebabCase)(this.item.primaryCategoryName),this.kebabChannel=this.item.kebabChannel||(0,o.kebabCase)(this.item.channelShortName)}},{key:"showTerms",value:function showTerms(e){var t={eventName:"Content Interaction"};t.interaction=e||null,t.interaction&&(0,c.trackEvent)({eventInfoData:t})}},{key:"openContentFrame",value:function openContentFrame(e){this.store.dispatch({type:s.UPDATE_ACTIVE,payload:{interaction:e,item:this.item}})}},{key:"primaryAction",value:function primaryAction(e){var t={eventInfoData:{eventName:e.eventName,participantName:this.item.displayTitle,interaction:e.interaction||"card link"},pageInfoData:{sortBy:this.state.selectedSort,programPhase:this.state.phase}};(0,c.trackEvent)(t)}}]),ProgramButtons);function ProgramButtons(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ProgramButtons),this.store=e,this.aboutTerms="There is a two-ticket minimum per purchase. Rather than one free ticket for every full-price ticket, all tickets will be issued at 50% off their original price (plus applicable taxes and fees). Your shopping cart will show the exact number of tickets you will receive.\n  <br><br>\n  Upgraded tickets will be issued at 50% off their original price plus a flat $30 per ticket. Please note that upgraded seats usually have a higher starting price than regular seats.",this.doubleSoldOut=!1,this.appState$=e.select("nycgoStore"),this.appState$.subscribe(function(e){t.state=(0,o.clone)(e)})}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],h.prototype,"item",void 0),t.ProgramButtons=h=(0,r.__decorate)([(0,a.Component)(p),(0,r.__metadata)("design:paramtypes",[l.Store])],h),t.ProgramButtons=h},173:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TruncatePipe=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(2);var s=(n(TruncatePipe,[{key:"transform",value:function transform(e,t,i){if(e.length&&!(0,o.startsWith)(e,"Lorem ipsum")){if(!t||e.length<=t)return e;var n=e.substring(0,t);return(i?n.substr(0,n.lastIndexOf(" ")):n)+"&hellip;"}}}]),TruncatePipe);function TruncatePipe(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TruncatePipe)}t.TruncatePipe=s=(0,r.__decorate)([(0,a.Pipe)({name:"truncate"})],s),t.TruncatePipe=s},174:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function slickHelpers(){return{slickMobleFriendly:function slickMobleFriendly(e){$(e).not(".slick-initialized").slick({slidesToShow:4,slidesToScroll:4,dots:!0,arrows:!0,infinite:!1,responsive:[{breakpoint:993,settings:{slidesToShow:2,slidesToScroll:2,swipe:!0,swipeToSlide:!0}},{breakpoint:769,settings:{slidesToShow:2,slidesToScroll:2,dots:!1,arrows:!1,centerMode:!0,swipe:!0,swipeToSlide:!0,infinite:!0}},{breakpoint:671,settings:{slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!1,centerMode:!0,swipe:!0,swipeToSlide:!0}}]}).on("setPosition",function(e){1==e.target.slick.$slides.length?$(this).addClass("no-slider"):$(this).removeClass("no-slider")}).on("swipe",function(e,t,i){bLazy.load($(this).find(".card-image"))})}}}},175:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(9));i(29);var r=_interopRequireDefault(i(176)),a=_interopRequireDefault(i(183)),o=_interopRequireDefault(i(4)),s=i(15),l=i(23),c=i(24),u=i(25),d=i(26),p=i(27),h=i(21),f=i(20),m=i(28),g=i(2),y=i(12);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var v="nycgoCommon",b=(0,g.get)(window,"nycgoGlobalSettings"),_=(0,g.get)(window,"nycgoSettings");n.module(v,[r.default]).constant("API_URL",b.apiUrl).constant("DFP_NETWORK",b.dfpNetwork).constant("DFP_UNIT",b.dfpUnit).constant("GOOGLE_API_KEY",b.google.api_key).constant("SERVICE_URL",b.serviceUrl).constant("FAVORITES_SERVICE_URL",b.favoritesServiceUrl).constant("TEMPLATE_DETAILS",_.templateDetails).constant("SITE_URL",b.siteUrl).service("helpers",o.default).component("nycgoMostPopularSearchNav",a.default).directive("nycgoLoading",(0,s.downgradeComponent)({component:l.LoadingComponent})).directive("nycgoOpentableModal",(0,s.downgradeComponent)({component:c.OpenTableComponent})).directive("nycgoPagination",(0,s.downgradeComponent)({component:u.PaginationComponent})).directive("nycgoCollectionsBlock",(0,s.downgradeComponent)({component:y.CollectionsBlockComponent})).directive("nycgoSimpleCard",(0,s.downgradeComponent)({component:d.CardSimpleComponent})).directive("nycgoTileCard",(0,s.downgradeComponent)({component:p.CardTileComponent})).directive("nycgoFavoritesHeart",(0,s.downgradeComponent)({component:h.FavHeartComponent})).directive("nycgoFavoriteNav",(0,s.downgradeComponent)({component:f.FavNavigationComponent})).directive("nycgoFavoriteButton",(0,s.downgradeComponent)({component:m.FavButtonComponent})),t.default=v},176:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(9)),r=_interopRequireDefault(i(177)),a=_interopRequireDefault(i(178)),o=_interopRequireDefault(i(179)),s=_interopRequireDefault(i(180)),l=_interopRequireDefault(i(181)),c=_interopRequireDefault(i(182)),u=_interopRequireDefault(i(174)),d=_interopRequireDefault(i(38));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var p="nycgoCollection";n.module(p,[d.default]).constant("SERVICE_URL",window.nycgoGlobalSettings.serviceUrl).component("nycgoCollectionBlock",a.default).component("nycgoThreeColumnBlock",o.default).component("nycgoListingContainer",s.default).component("nycgoEventsBlock",l.default).component("nycgoRandomizer",c.default).service("slickHelpers",u.default).service("collectionFactory",r.default).filter("capitalize",function(){return function(e){return e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}}),t.default=p},177:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function Af(s,l,c){return{getCollectionData:function getCollectionData(e){var t=e.entryId,i=e.blockId,n=(e.limit,e.feed),r=e.version,a=[c,"/nycgo/",r||"v2","/"+n+"?","&entryId="+t];i&&a.push("&blockId="+i),a=a.join("");var o=[];return e.feed&&(o=s.jsonp(l.trustAsResourceUrl(a),{cache:!1,jsonpCallbackParam:"callback"})),o}}}Af.$inject=["$http","$sce","SERVICE_URL"],t.default=Af},178:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(4);var a=(n(ComponentController,[{key:"$onInit",value:function $onInit(){var t=this;this.limit=(0,r.isMobile)()?3==this.limit?3:4:this.limit,this.items=[],this.state={includesAd:"Yes"==this.includeAd,horizontalScroll:"Yes"==this.horizontalScroll,isCarousel:!(0,r.isMobile)()&&this.layout&&_.includes(this.layout,"carousel"),isButtonDisabled:"card-short-list"==this.layout,isDescriptionDisabled:"card-short-list"==this.layout,isLegacy:!/^card/.test(this.layout),moduleTracking:"Collections"},this.$timeout(function(){t.layoutClass={},t.layoutClass.container=t.layout&&_.includes(t.layout,"-list")?"card-list-container":"card-simple-container",t.layoutClass.cardFlex=t.layout&&_.includes(t.layout,"-list")?"":"card-flex-"+(t.state.includesAd||"half"==t.layout?"2":"4")});var e={entryId:this.entryId,blockId:this.blockId,feed:"body-collection-blocks"};this.collectionFactory.getCollectionData(e).then(function(e){t.items=e.data.data[0].collection,t.items=t.transformItems(t.items),3==t.items.length&&3==t.limit&&(t.layoutClass.cardFlex="card-flex-3"),6==t.items.length&&6==t.limit&&(t.layoutClass.cardFlex="card-flex-3")})}},{key:"sliderInit",value:function sliderInit(){var e=this;setTimeout(function(){$("#collection-items-"+e.blockId+" .card-flex").removeClass(".card-flex"),e.slickSlider=e.slickHelpers.slickMobleFriendly("#collection-items-"+e.blockId)},0)}},{key:"transformItems",value:function transformItems(e){return _.map(e,function(e,t){return(e=(0,r.genDateLabels)(e)).index=t,e.isActivityMap=!0,e})}},{key:"$postLink",value:function $postLink(){this.state.isLegacy||this.dotdotdot()}}]),ComponentController);function ComponentController(e,t,i,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$filter=e,this.$timeout=t,this.collectionFactory=i,this.dotdotdot=r.dotdotdot,this.slickHelpers=n,this.adSettings=[{id:"gpt-unit-right",unit:"/Sponsor",size:"160x600-sm-300x600-md-lg",lazy:"false",primary:nycgoGlobalSettings.adDetails.primary||"",categories:nycgoGlobalSettings.adDetails.categories||""}]}a.$inject=["$filter","$timeout","collectionFactory","slickHelpers"];var o={bindings:{entryId:"@",blockId:"@",limit:"@",header:"@",description:"@",layout:"@",grid:"@",sort:"@",order:"@",includeAd:"@",horizontalScroll:"@",moreText:"@",moreLink:"@"},controller:a,templateUrl:"/app/hybrid-app/src/app-legacy/collection/components/nycgoCollectionBlock.html"};t.default=o},179:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(4);var a=(n(ComponentController,[{key:"$onInit",value:function $onInit(){var t=this;this.items=[],this.state={hideCardButtons:!0,moduleTracking:"Collections"};var e={entryId:this.entryId,blockId:this.blockId,feed:"body-grid-3column"};this.collectionFactory.getCollectionData(e).then(function(e){t.items=e.data.data[0].verticals,t.$timeout(function(){(0,r.dotdotdot)("nycgo-three-column-block .card-copy")},250)})}}]),ComponentController);function ComponentController(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$timeout=e,this.collectionFactory=t}a.$inject=["$timeout","collectionFactory"];var o={bindings:{entryId:"@",blockId:"@",limit:"@",header:"@",description:"@"},controller:a,templateUrl:"/app/hybrid-app/src/app-legacy/collection/components/nycgoThreeColumnBlock.html"};t.default=o},18:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FavoritesModule=void 0;var n=i(0),r=i(7),a=i(1),o=i(16),s=i(187),l=i(3),c=i(8),u=i(11),d=i(171),p=i(28),h=i(20),f=i(17),m=i(21);var g=function FavoritesModule(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FavoritesModule)};t.FavoritesModule=g=(0,n.__decorate)([(0,a.NgModule)({declarations:[d.AppComponent,p.FavButtonComponent,h.FavNavigationComponent,m.FavHeartComponent],imports:[r.BrowserModule,l.StoreModule.forRoot({favoriteStore:f.favoriteReducer}),s.StoreDevtoolsModule.instrument({maxAge:25}),o.HttpClientModule,o.HttpClientJsonpModule],providers:[c.ApiService,u.ProcessorService],exports:[p.FavButtonComponent,h.FavNavigationComponent,m.FavHeartComponent],entryComponents:[p.FavButtonComponent,h.FavNavigationComponent,m.FavHeartComponent]})],g),t.FavoritesModule=g},180:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(4);var a=(n(ComponentController,[{key:"$onInit",value:function $onInit(){var t=this;this.items=[],this.state={isButtonDisabled:"card-short-list"==this.layout,isDescriptionDisabled:"card-short-list"==this.layout,moduleTracking:"Listing Container"},"card-summary"==this.layout&&_.merge(this.state,{hasBigButton:!0,isEyebrowDisabled:!0,isTitleDisabled:!0,cardFeatures:{summary:!0,centeredDeck:!0}});var e={entryId:this.entryId,blockId:this.blockId,feed:"body-listing-containers",version:this.layout&&_.includes(this.layout,"tile")?"v1":"v2"};this.collectionFactory.getCollectionData(e).then(function(e){t.header=e.data.data[0].heading,t.items=e.data.data[0].listingContainer,t.items=t.transformItems(t.items)}),this.$timeout(function(){t.cardLayout=t.layout&&_.includes(t.layout,"list")?"card-list-container":t.layout&&_.includes(t.layout,"tile")?"card-tile-container":"card-simple-container"})}},{key:"transformItems",value:function transformItems(e){return e.length,_.map(e,function(e,t){return"calendar_events"==e.channelShortName&&(e=(0,r.genDateLabels)(e)),e.description=e.summary,e.index=t,e.isActivityMap=!0,e.overlayImagePath&&(e.overlayImagePath=(0,r.getCloudImage)({image:e.overlayImagePath,width:342,height:144})),e})}}]),ComponentController);function ComponentController(e,t,i){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$filter=e,this.$timeout=t,this.collectionFactory=i}a.$inject=["$filter","$timeout","collectionFactory"];var o={bindings:{entryId:"@",blockId:"@",limit:"@",header:"@",description:"@",layout:"@",sort:"@",order:"@",moreText:"@",moreLink:"@",moreTarget:"@"},controller:a,templateUrl:"/app/hybrid-app/src/app-legacy/collection/components/nycgoListingContainer.html"};t.default=o},181:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(4);var a=(n(ComponentController,[{key:"$onInit",value:function $onInit(){var t=this;this.items=[],this.state={horizontalScroll:"Yes"==this.horizontalScroll,type:"all",isList:this.layout&&_.includes(this.layout,"list"),isCarousel:!(0,r.isMobile)()&&this.layout&&_.includes(this.layout,"carousel"),isButtonDisabled:"card-short-list"==this.layout,isDescriptionDisabled:"card-short-list"==this.layout,moduleTracking:"Collections"},this.currentDate=new Date,this.loadLimit=this.state.isCarousel?12:4,this.more.text=this.more.text||"view more",this.state.horizontalScroll&&(this.loadLimit=null),this.collectionFactory.getCollectionData({entryId:this.entryId,blockId:this.blockId,feed:"body-events-blocks"}).then(function(e){t.items=e.data.data[0].events,t.loadMoreEnabled=4<t.items.length&&!t.state.horizontalScroll,t.items=t.transformItems(t.items)})}},{key:"$postLink",value:function $postLink(){this.dotdotdot()}},{key:"sortMap",value:function sortMap(e){return e?{Ascending:"asc",Descending:"desc"}[e]:"desc"}},{key:"orderMap",value:function orderMap(e){return e?{Title:"shortTitle","Start Date":"nextOccurrence","Start Time":"nextOccurrence"}[e]:"nextOccurrence"}},{key:"transformItems",value:function transformItems(e){return _.map(e,function(e,t){return(e=(0,r.genDateLabels)(e)).index=t,e.isActivityMap=!0,e})}},{key:"sliderInit",value:function sliderInit(){var e=this;setTimeout(function(){$("#collection-items-"+e.blockId+" .card-flex").removeClass(".card-flex"),e.slickSlider=e.slickHelpers.slickMobleFriendly("#collection-items-"+e.blockId)},0)}},{key:"loadMore",value:function loadMore(e){var t=0<arguments.length&&void 0!==e?e:4;this.loadLimit+=t}},{key:"cardView",value:function cardView(){return this.viewCardStyle[this.layout]}}]),ComponentController);function ComponentController(e,t,i,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.collectionFactory=n,this.$filter=e,this.$timeout=t,this.slickHelpers=i,this.dotdotdot=r.dotdotdot,this.viewCardStyle=(0,r.viewCardMapping)()}a.$inject=["$filter","$timeout","slickHelpers","collectionFactory"];var o={bindings:{entryId:"@",blockId:"@",header:"@",layout:"@",more:"<",sort:"@",order:"@",horizontalScroll:"@"},controller:a,templateUrl:"/app/hybrid-app/src/app-legacy/collection/components/nycgoEventsBlock.html"};t.default=o},182:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=i(4);var o=(r(ComponentController,[{key:"$onInit",value:function $onInit(){var t=this;this.items=[],this.state={isButtonDisabled:"card-short-list"==this.layout,isDescriptionDisabled:"card-short-list"==this.layout},this.collectionFactory.getCollectionData({entryId:this.entryId,blockId:this.blockId,feed:"body-listing-containers"}).then(function(e){t.header=e.data.data[0].heading,t.backgroundImage=e.data.data[0].randomizerBackground,t.items=e.data.data[0].listingContainer,t.items=t.transformItems(t.items)})}},{key:"controlRandomizer",value:function controlRandomizer(e,t){var i={eventInfoData:{eventName:"Content Interaction",interaction:"Family Randomizer - "+("object"==(void 0===t?"undefined":n(t))?t.buttonText+" | "+t.shortTitle:t)}};(0,a.trackEvent)(i)}},{key:"transformItems",value:function transformItems(e){return _.map(e,function(e,t){return e.shortTitle=e.shortTitle||e.displayTitle,e.description=e.summary,e.index=t,e.isActivityMap=!0,e.imagePath=(0,a.getCloudImage)({image:e.image||e.imagePath,display:"cardDouble"}),e})}},{key:"finished",value:function finished(){$(".random-slide-container").slick({fade:!0,arrows:!1,swipe:!1,speed:0,adaptiveHeight:!0})}}]),ComponentController);function ComponentController(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$filter=e,this.collectionFactory=t}o.$inject=["$filter","collectionFactory"];var s={bindings:{entryId:"@",blockId:"@",limit:"@",header:"@",description:"@",layout:"@",sort:"@",order:"@"},controller:o,templateUrl:"/app/hybrid-app/src/app-legacy/components/nycgoRandomizer.html"};t.default=s},183:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i(4);var r=(n(ComponentController,[{key:"$onInit",value:function $onInit(){var t=this;this.getData().then(function(e){t.items=e.data?e.data.data:[]}),this.state=this.state||{},this.state.moduleTracking="What's Popular"}},{key:"getData",value:function getData(){var e=[this.serviceUrl,"/nycgo/v2/search-featured"].join("");return this.$http.get(e,{cache:!1})}}]),ComponentController);function ComponentController(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$http=e,this.serviceUrl=t,this.state={}}r.$inject=["$http","SERVICE_URL"];var a={bindings:{header:"@"},controller:r,templateUrl:"/app/hybrid-app/src/app-legacy/components/nycgoMostPopularSearchNav.html"};t.default=a},185:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessorService=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(5);var s=(n(ProcessorService,[{key:"handleContentFrame",value:function handleContentFrame(e){var t=e.appState,i=e.route,n=e.router,r=t.active;r&&r.item&&r.item.id?n.navigate(["../browse",r.item.id],{relativeTo:i,queryParamsHandling:"preserve"}):!r||t.initialState||r.item&&r.item.length||n.navigate(["/"],{queryParamsHandling:"preserve"})}},{key:"openContentFrameLegacy",value:function openContentFrameLegacy(e,t){t.item&&e.go("home.entryView",{entryId:t.item.id,channel:(0,o.channelShortNameMap)(t.item.channelShortName),interaction:t.interaction}),document.body.classList.add("noscroll")}}]),ProcessorService);function ProcessorService(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ProcessorService)}t.ProcessorService=s=(0,r.__decorate)([(0,a.Injectable)({providedIn:"root"}),(0,r.__metadata)("design:paramtypes",[])],s),t.ProcessorService=s},188:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridCommonModule=void 0;var n=i(0),r=i(1),a=i(7),o=i(31),s=i(213),l=i(34),c=i(35),u=i(36),d=i(37),p=i(185);var h=function GridCommonModule(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GridCommonModule)};t.GridCommonModule=h=(0,n.__decorate)([(0,r.NgModule)({declarations:[l.SingleSelectComponent,c.MultiSelectComponent,u.BadgesComponent,d.TextSearchComponent],entryComponents:[l.SingleSelectComponent,c.MultiSelectComponent,u.BadgesComponent,d.TextSearchComponent],imports:[a.BrowserModule,o.FormsModule,s.BsDropdownModule.forRoot()],providers:[p.ProcessorService],exports:[l.SingleSelectComponent,c.MultiSelectComponent,u.BadgesComponent,d.TextSearchComponent]})],h),t.GridCommonModule=h},193:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ngBLazy=new Blazy({src:"ng-blazy",offset:200,breakpoints:[{width:480,src:"data-src-small"}]})},195:function(e,t){function webpackEmptyAsyncContext(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,(e.exports=webpackEmptyAsyncContext).id=195},196:function(e,t,i){"use strict";function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}(ComponentController,[{key:"$onChanges",value:function $onChanges(e){e.adUnit&&e.adUnit.isFirstChange()}},{key:"$postLink",value:function $postLink(){this.randomId=Math.random(),this.googleRefreshSlots=[],this.refreshAd()}},{key:"refreshAd",value:function refreshAd(){var a=this;setTimeout(function(){googletag.cmd.push(function(){switch(a.adSize){case"160x600-sm-300x600-md-lg":var e=googletag.sizeMapping().addSize([753,0],[160,600]).addSize([977,0],[[160,600],[300,600]]).build();break;case"300x50-xs-sm-970x90-md-lg":e=googletag.sizeMapping().addSize([0,0],[300,250]).addSize([977,0],[[970,90],[970,250]]).build();break;case"300x50-xs-sm-970x90-md-lg-only":e=googletag.sizeMapping().addSize([0,0],[300,50]).addSize([977,0],[970,90]).build();break;case"300x250-lg":e=googletag.sizeMapping().addSize([0,0],[]).addSize([753,0],[300,250]).build();break;case"300x250-xs-sm-md-lg":e=googletag.sizeMapping().addSize([0,0],[300,250]).build();break;case"300x50-sm":e=googletag.sizeMapping().addSize([0,0],[]).addSize([1185,0],[300,50]).build();break;case"300x600-lg":e=googletag.sizeMapping().addSize([0,0],[]).addSize([1185,0],[300,600]).build();break;default:e=googletag.sizeMapping().addSize([768,0],[300,250]).addSize([768,0],[300,250]).build()}var t=e[0][1][0]||e[1][1][0],i=e[0][1][1]||e[1][1][1],n="/"+a.dfpNetwork+"/"+a.dfpUnit+a.adUnit;if("oop"==a.adSize&&a.entryId)a.googleRefreshSlots.push(googletag.defineOutOfPageSlot(n,a.adId).addService(googletag.pubads().setTargeting("size",a.adSize).setTargeting("pos",a.adId).setTargeting("url",window.location.pathname)).setTargeting("content","itinerary").setTargeting("location","Citywide").setTargeting("primary","Things to Do").setTargeting("entry",a.entryId));else{var r=googletag.pubads().setTargeting("size",a.adSize).setTargeting("pos",a.adId).setTargeting("url",window.location.pathname).setTargeting("entry",a.entryId);a.categories&&googletag.cmd.push(function(){googletag.pubads().setTargeting("categories",a.categories)}),a.googleRefreshSlots.push(googletag.defineSlot(n,[t,i],a.adId).defineSizeMapping(e).addService(r))}googletag.display(a.adId),googletag.pubads().refresh(a.googleRefreshSlots)})},200)}}]),ComponentController);function ComponentController(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.dfpNetwork=e,this.dfpUnit=t}n.$inject=["DFP_NETWORK","DFP_UNIT"];var r={bindings:{adId:"@",adSize:"@",adUnit:"@",entryId:"@",categories:"@"},controller:n,templateUrl:"/app/hybrid-app/src/app-legacy/components/nycgoAdUnit.html"};t.default=r},20:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FavNavigationComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(3),s=i(8),l=i(11),c=i(2);var u=(n(FavNavigationComponent,[{key:"ngOnInit",value:function ngOnInit(){this.FB.init({appId:"152559674784851",status:!0,cookie:!0,xfbml:!0})}},{key:"ngAfterViewInit",value:function ngAfterViewInit(){var t=this;this.FB&&(this.FB.getLoginStatus(function(e){"connected"===e.status&&t.processorService.fbLogin(e,"FB STATUS")}),this.FB.Event.subscribe("auth.login",function(e){"connected"===e.status&&t.processorService.fbLogin(e,"FB LOGIN")}),this.FB.Event.subscribe("auth.logout",function(e){t.processorService.fbLogin(e,"CLEAR")}),this.FB.Event.subscribe("xfbml.render",function(){t.fbLoaded=!0}))}}]),FavNavigationComponent);function FavNavigationComponent(e,t,i){var n=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FavNavigationComponent),this.store=e,this.apiService=t,this.processorService=i,this.FB=(0,c.get)(window,"FB"),this.fbLoaded=!1,this.favState$=e.select("favoriteStore"),this.favState$.subscribe(function(e){var t=e.favorites;n.favorites=t})}t.FavNavigationComponent=u=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-favorite-nav",templateUrl:"/app/hybrid-app/projects/favorites/src/app/navigation.component.html"}),(0,r.__metadata)("design:paramtypes",[o.Store,s.ApiService,l.ProcessorService])],u),t.FavNavigationComponent=u},201:function(e,t,i){var n={"./af":42,"./af.js":42,"./ar":43,"./ar-dz":44,"./ar-dz.js":44,"./ar-kw":45,"./ar-kw.js":45,"./ar-ly":46,"./ar-ly.js":46,"./ar-ma":47,"./ar-ma.js":47,"./ar-sa":48,"./ar-sa.js":48,"./ar-tn":49,"./ar-tn.js":49,"./ar.js":43,"./az":50,"./az.js":50,"./be":51,"./be.js":51,"./bg":52,"./bg.js":52,"./bm":53,"./bm.js":53,"./bn":54,"./bn.js":54,"./bo":55,"./bo.js":55,"./br":56,"./br.js":56,"./bs":57,"./bs.js":57,"./ca":58,"./ca.js":58,"./cs":59,"./cs.js":59,"./cv":60,"./cv.js":60,"./cy":61,"./cy.js":61,"./da":62,"./da.js":62,"./de":63,"./de-at":64,"./de-at.js":64,"./de-ch":65,"./de-ch.js":65,"./de.js":63,"./dv":66,"./dv.js":66,"./el":67,"./el.js":67,"./en-SG":68,"./en-SG.js":68,"./en-au":69,"./en-au.js":69,"./en-ca":70,"./en-ca.js":70,"./en-gb":71,"./en-gb.js":71,"./en-ie":72,"./en-ie.js":72,"./en-il":73,"./en-il.js":73,"./en-nz":74,"./en-nz.js":74,"./eo":75,"./eo.js":75,"./es":76,"./es-do":77,"./es-do.js":77,"./es-us":78,"./es-us.js":78,"./es.js":76,"./et":79,"./et.js":79,"./eu":80,"./eu.js":80,"./fa":81,"./fa.js":81,"./fi":82,"./fi.js":82,"./fo":83,"./fo.js":83,"./fr":84,"./fr-ca":85,"./fr-ca.js":85,"./fr-ch":86,"./fr-ch.js":86,"./fr.js":84,"./fy":87,"./fy.js":87,"./ga":88,"./ga.js":88,"./gd":89,"./gd.js":89,"./gl":90,"./gl.js":90,"./gom-latn":91,"./gom-latn.js":91,"./gu":92,"./gu.js":92,"./he":93,"./he.js":93,"./hi":94,"./hi.js":94,"./hr":95,"./hr.js":95,"./hu":96,"./hu.js":96,"./hy-am":97,"./hy-am.js":97,"./id":98,"./id.js":98,"./is":99,"./is.js":99,"./it":100,"./it-ch":101,"./it-ch.js":101,"./it.js":100,"./ja":102,"./ja.js":102,"./jv":103,"./jv.js":103,"./ka":104,"./ka.js":104,"./kk":105,"./kk.js":105,"./km":106,"./km.js":106,"./kn":107,"./kn.js":107,"./ko":108,"./ko.js":108,"./ku":109,"./ku.js":109,"./ky":110,"./ky.js":110,"./lb":111,"./lb.js":111,"./lo":112,"./lo.js":112,"./lt":113,"./lt.js":113,"./lv":114,"./lv.js":114,"./me":115,"./me.js":115,"./mi":116,"./mi.js":116,"./mk":117,"./mk.js":117,"./ml":118,"./ml.js":118,"./mn":119,"./mn.js":119,"./mr":120,"./mr.js":120,"./ms":121,"./ms-my":122,"./ms-my.js":122,"./ms.js":121,"./mt":123,"./mt.js":123,"./my":124,"./my.js":124,"./nb":125,"./nb.js":125,"./ne":126,"./ne.js":126,"./nl":127,"./nl-be":128,"./nl-be.js":128,"./nl.js":127,"./nn":129,"./nn.js":129,"./pa-in":130,"./pa-in.js":130,"./pl":131,"./pl.js":131,"./pt":132,"./pt-br":133,"./pt-br.js":133,"./pt.js":132,"./ro":134,"./ro.js":134,"./ru":135,"./ru.js":135,"./sd":136,"./sd.js":136,"./se":137,"./se.js":137,"./si":138,"./si.js":138,"./sk":139,"./sk.js":139,"./sl":140,"./sl.js":140,"./sq":141,"./sq.js":141,"./sr":142,"./sr-cyrl":143,"./sr-cyrl.js":143,"./sr.js":142,"./ss":144,"./ss.js":144,"./sv":145,"./sv.js":145,"./sw":146,"./sw.js":146,"./ta":147,"./ta.js":147,"./te":148,"./te.js":148,"./tet":149,"./tet.js":149,"./tg":150,"./tg.js":150,"./th":151,"./th.js":151,"./tl-ph":152,"./tl-ph.js":152,"./tlh":153,"./tlh.js":153,"./tr":154,"./tr.js":154,"./tzl":155,"./tzl.js":155,"./tzm":156,"./tzm-latn":157,"./tzm-latn.js":157,"./tzm.js":156,"./ug-cn":158,"./ug-cn.js":158,"./uk":159,"./uk.js":159,"./ur":160,"./ur.js":160,"./uz":161,"./uz-latn":162,"./uz-latn.js":162,"./uz.js":161,"./vi":163,"./vi.js":163,"./x-pseudo":164,"./x-pseudo.js":164,"./yo":165,"./yo.js":165,"./zh-cn":166,"./zh-cn.js":166,"./zh-hk":167,"./zh-hk.js":167,"./zh-tw":168,"./zh-tw.js":168};function webpackContext(e){var t=webpackContextResolve(e);return i(t)}function webpackContextResolve(e){if(i.o(n,e))return n[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackContext.keys=function webpackContextKeys(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,(e.exports=webpackContext).id=201},205:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=i(193),o=i(4);function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var r=(n(ComponentController,[{key:"$onInit",value:function $onInit(){this.isSponsored="true"==this.sponsored;var e="51261"==this.entryId,t="true"===this.hidePager,i="list"==this.view?"card-list-container":"card-simple-container";this.cardCount="list"==this.view?2:4,(this.includeAd||this.isSponsored)&&(this.cardCount=this.cardCount-1),this.override=!1,"479"==this.entryId&&(this.override=!0,this.cardCount=this.cardCount-1),this.state={pageSize:e?8:6,pageNumber:1,total:0,view:i,isHomepage:e,hidePager:t,moduleTracking:"Featured Content",override:this.override},this.tracking={prop22:"Featured Content | Pagination",pev2:"Featured Content Module Pagination"},this.items=[],this.hideFilters="true"===this.hideFilters,this.categories=[{name:"All",isSelected:!0}]}},{key:"$postLink",value:function $postLink(){var r=this;this.adSettings=[{id:"gpt-unit-right",unit:"/Sponsor",size:"160x600-sm-300x600-md-lg",lazy:"false",primary:nycgoGlobalSettings.adDetails.primary||"",categories:nycgoGlobalSettings.adDetails.categories||""}],this.getData(this.entryId,this.channel,this.limit).then(function(e){r.items=e.data.data.filter(function(e){return null!==e.displayTitle&&null!==e.url});var t=r.items,i=_.chain(t).filter(function(e){return null!==e.name}).map(function(e){return{name:e.primaryCategoryName,isSelected:!1}}).uniqBy(function(e){return e.name}).value();i=r.state.isHomepage?_.sortBy(i,["name"]):i,r.categories=[].concat(_toConsumableArray(r.categories),_toConsumableArray(i)),_.map(r.items,function(e,t){e=function channelPropAdditions(e){switch(e.channelShortName){case"venue":return"Shopping"===e.primaryCategoryName&&(e.channel="shopping"),e.showMoreInfo=!0,e;case"gallery":return e.showSlidesIcon=!0,e;case"itinerary":return e.showMapMarker=!0,e.showMoreInfo=!0,e;case"neighborhood":return e.showMoreInfo=!0,e;case"video":return e.showPlay=!0,e;case"calendar_events":var t=(e.nextOccurrence?new Date(1e3*e.nextOccurrence):new Date).toLocaleTimeString("en-US",{month:"short",day:"numeric"}).split(",")[0];return e.date={month:t.split(" ")[0],day:t.split(" ")[1]},e;default:return e}}(e),(e=(0,o.genDateLabels)(e)).url=(0,o.buildLink)(e.channelShortName,e.url),e.index=t,e.isActivityMap=!!r.state.isHomepage});var n=_.chunk(r.items,r.state.pageSize);r.filteredItems=n[0],r.state.total=n.length*r.state.pageSize,setTimeout(function(){a.ngBLazy.revalidate()},0)})}},{key:"getData",value:function getData(e,t,i){var n=["/nycgo/v2",this.state.isHomepage?"/homepage/":"/","featured-content"],r=[this.serviceUrl,n.join(""),"?entryId="+e,"&limit="+i].join("");return this.$http.get(r,{cache:!1})}},{key:"applyFilter",value:function applyFilter(){var t=this,e=this.items,i=this.items;this.selectedCategory=_.find(this.categories,{isSelected:!0}),"All"!=this.selectedCategory.name&&(i=e.filter(function(e){return e.primaryCategoryName==t.selectedCategory.name}));var n=_.chunk(i,this.state.pageSize);this.filteredItems=n[this.state.pageNumber-1],this.state.total=n.length*this.state.pageSize,this.$timeout(function(){a.ngBLazy.revalidate()},0)}},{key:"changeCategory",value:function changeCategory(e,t){e.preventDefault(),this.state.pageNumber=1,this.categories=this.helpers.handleSingleSelect(t,this.categories),this.applyFilter()}},{key:"pageChange",value:function pageChange(e){this.state.pageNumber=e.page,this.applyFilter()}}]),ComponentController);function ComponentController(e,t,i,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$timeout=e,this.$http=t,this.helpers=i,this.serviceUrl=n}r.$inject=["$timeout","$http","helpers","SERVICE_URL"];var s={bindings:{entryId:"@",channel:"@",limit:"@",view:"@",header:"@",hideFilters:"@",hidePager:"@",sponsored:"@",includeAd:"@"},controller:r,templateUrl:"/app/hybrid-app/src/app-legacy/components/nycgoFeaturedContent.html"};t.default=s},21:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FavHeartComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(3);var s=(n(FavHeartComponent,[{key:"ngOnInit",value:function ngOnInit(){var i=this;this.favState$=this.store.select("favoriteStore"),this.favState$.subscribe(function(e){var t=e.totalFavorites;i.totalFavs=t||"0"})}}]),FavHeartComponent);function FavHeartComponent(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FavHeartComponent),this.store=e}t.FavHeartComponent=s=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-favorites-heart",template:'\n    \t<a id="favoritesWidget" role="button" data-toggle="collapse" data-target="#nycgoUser" aria-expanded="false"\n        aria-controls="nycgoUser" class="nav-item alt-text pull-left">\n        <span class="fav-heart disabled"></span>\n        <span id="favNum" [innerHtml]="totalFavs"></span>\n      </a>'}),(0,r.__metadata)("design:paramtypes",[o.Store])],s),t.FavHeartComponent=s},211:function(e,t,i){"use strict";function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}(ComponentController,[{key:"$onInit",value:function $onInit(){var e=this;this.elementClass=".multi"+this.type,this.enableFiltering=void 0===this.enableFiltering||this.enableFiltering,this.$timeout(function(){e.items&&(e.itemsInitialized=!0,e.initializeDropDown())},0)}},{key:"$onChanges",value:function $onChanges(e){!this.itemsInitialized&&this.items&&(this.itemsInitialized=!0,this.initializeDropDown()),e.filtered&&e.filtered.isFirstChange()||e.filtered&&!e.filtered.currentValue&&this.refreshMultiSelect()}},{key:"initializeDropDown",value:function initializeDropDown(){this.initMultiSelect(),this.refreshChecked()}},{key:"onChange",value:function onChange(e){this.onMultiSelect({node:this.type,id:e})}},{key:"refreshChecked",value:function refreshChecked(){var e=_.filter(this.items,{isSelected:!0}).map(function(e){return e.id.toString()});e&&$(this.elementClass).multiselect("select",e)}},{key:"refreshMultiSelect",value:function refreshMultiSelect(){var e=this;this.$timeout(function(){$(e.elementClass).multiselect("refresh")},200)}},{key:"initMultiSelect",value:function initMultiSelect(){var i=this;$(this.elementClass).multiselect({enableFiltering:this.enableFiltering,nonSelectedText:this.title,selectedClass:"selected",enableCaseInsensitiveFiltering:!0,numberDisplayed:2,maxHeight:400,templates:{filter:""},onChange:function onChange(e){var t=e.context.value;i.onChange(t)},onDropdownShown:function onDropdownShown(){$(i.elementClass).velocity("scroll",{container:$("#modalFilter"),duration:600,offset:480,easing:"ease-in-out"})}})}}]),ComponentController);function ComponentController(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$timeout=e.bind(this),this.itemsInitialized=!1}n.$inject=["$timeout"];var r={bindings:{items:"<",title:"@",type:"@",hideLabel:"@",enableFiltering:"<",onMultiSelect:"&",filtered:"<"},controller:n,templateUrl:"/app/hybrid-app/src/app-legacy/components/filters/nycgoFilterMultiDropdown.html"};t.default=r},212:function(e,t,i){"use strict";function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}(ComponentController,[{key:"$onInit",value:function $onInit(){var t=this;if(this.isMainCollapsedTypeName="isMainCollapsed"+this.type,this.isCollapsed=this.isExpanded||!1,this.isFeatured=null==this.isFeatured||this.isFeatured,this.isCollapsedOnInitialization=this.isMainCollapsed=!this.isFeatured,this.isIcon){var i='<i class="icon icon-'+this.icon+'"></i>';this.items.map(function(e){return e.icons=_.times(e.name,function(){return i}).join(""),e.icons=t.$sce.trustAsHtml(e.icons),e})}}},{key:"onChange",value:function onChange(e,t){this.onMultiSelect({node:this.type,id:t.id})}}]),ComponentController);function ComponentController(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$sce=e,this.helpers=t}n.$inject=["$sce","helpers"];var r={bindings:{items:"<",title:"@",type:"@",vertical:"@",onMultiSelect:"&",isIcon:"<",icon:"@",isFeatured:"<",isExpanded:"<"},controller:n,templateUrl:"/app/hybrid-app/src/app-legacy/components/filters/nycgoFilterMultiSelect.html"};t.default=r},214:function(e,t,i){"use strict";function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}(ComponentController,[{key:"$postLink",value:function $postLink(){var e=this;this.$timeout(function(){e.initDatePicker()},250)}},{key:"initDatePicker",value:function initDatePicker(){var a=this,e=$("#"+this.id),t=this.dates.minDate||this.$filter("date")(new Date,"MM/dd/yyyy");Date.parse(this.dates.startDate)<Date.parse(t)&&(this.dates.startDate=this.$filter("date")(Date.parse(this.dates.minDate),"yyyy-MM-dd")),this.single&&(this.dates.endDate=this.dates.startDate);var i={autoApply:!0,dateLimit:{days:30},minDate:t};if(this.single&&(i=_.extend(i,{singleDatePicker:!0})),e.daterangepicker(i,function(e,t,i){a.dates.startDate=a.$filter("date")(e,"yyyy-MM-dd"),a.dates.endDate=a.$filter("date")(t,"yyyy-MM-dd");var n=e.format("YYYY-MM-DD"),r=t.format("YYYY-MM-DD");a.onDateChange({start:n,end:r})}),this.single&&this.dates.startDate){var n=this.dates.startDate.substr(5,2)+"/"+this.dates.startDate.substr(8,2)+"/"+this.dates.startDate.substr(0,4);e.data("daterangepicker").setStartDate(n),e.data("daterangepicker").setEndDate(n)}else if(!this.single&&this.dates.startDate){var r=this.dates.startDate.substr(5,2)+"/"+this.dates.startDate.substr(8,2)+"/"+this.dates.startDate.substr(0,4);if(e.data("daterangepicker").setStartDate(r),this.dates.endDate){var o=this.dates.endDate.substr(5,2)+"/"+this.dates.endDate.substr(8,2)+"/"+this.dates.endDate.substr(0,4);e.data("daterangepicker").setEndDate(o)}}e.on("show.daterangepicker",function(e,t){$("td.available").hover(function(){return a.listenDateChange()})})}},{key:"listenDateChange",value:function listenDateChange(){$("input[name=daterangepicker_start]").val()}}]),ComponentController);function ComponentController(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$filter=t,this.$timeout=e}n.$inject=["$timeout","$filter"];var r={controller:n,bindings:{id:"@",label:"@",class:"@",dates:"<",single:"<",isModal:"<",onDateChange:"&"},templateUrl:"/app/hybrid-app/src/app-legacy/components/nycgoDateRangeLegacy.html"};t.default=r},22:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardsModule=void 0;var n=i(0),r=i(1),a=i(7),o=i(200),s=i(26),l=i(27),c=i(18),u=i(172),d=i(173);var p=function CardsModule(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CardsModule)};t.CardsModule=p=(0,n.__decorate)([(0,r.NgModule)({declarations:[s.CardSimpleComponent,l.CardTileComponent,u.ProgramButtons,d.TruncatePipe],imports:[a.BrowserModule,c.FavoritesModule,o.TooltipModule.forRoot()],entryComponents:[s.CardSimpleComponent,l.CardTileComponent],exports:[s.CardSimpleComponent,l.CardTileComponent]})],p),t.CardsModule=p},220:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function zo(r,e,a,n,t,o,i){var s=function mapVerticalToUrl(e){var t=i+"/nycgo/";if(e)switch(e.toLowerCase()){case"attractionsmap":t+="v1/browse-app/attractions-map";break;case"offbroadway":t+="v2/browse-app/off-broadway";break;case"performingarts":t+="v2/browse-app/performing-arts";break;default:t+="v2/browse-app/"+e}return t};return{getVerticalData:function getVerticalData(t){var e=s(t||"hotels"),i=e;return r.get(i,{cache:!1}).then(function(e){return n.prerenderReady=!0,e.data}).catch(function(e){return console.error("Failed "+t+" feed",e.status,e.data),null})},getQuicklinks:function getQuicklinks(){var e=i+"/nycgo/v1/browse-app/quick-links";return r.get(e,{cache:!1}).then(function(e){return e.data.data}).catch(function(e){return console.error("Failed browse quicklinks",e.status,e.data),null})},getSort:function getSort(){var e=[{id:1,label:"Default",value:"default",order:null,isSelected:!1}],t=[{id:4,label:"Name (A-Z)",value:"sortTitle",order:"asc",isSelected:!1},{id:5,label:"Name (Z-A)",value:"sortTitle",order:"desc",isSelected:!1}],i=[{id:6,label:"Price - high to low",value:"minPrice",order:"desc",isSelected:!1},{id:7,label:"Price - low to high",value:"minPrice",order:"asc",isSelected:!1}];return{hotel:[].concat(e,[{id:2,label:"Hotel rating",value:"rating",order:"desc",isSelected:!1}],t,i),broadway:[{id:1,label:"Featured",value:"featured",order:null,isSelected:!1}].concat(t,i),full:[].concat(e,[{id:3,label:"Rating",value:"rating",order:"desc",isSelected:!1}],t,i),common:[].concat(e,[{id:3,label:"Rating",value:"rating",order:"desc",isSelected:!1}],t),mini:[].concat(e,t),distance:[{id:10,label:"Nearest",value:"distance",order:"asc",isSelected:!0}]}},getRatings:function getRatings(e){var t=[],i="rating"==e;return _.times(5,function(e){e++,t.push({id:e,name:e,urlTitle:e.toString(),isSelected:!1,isAvailable:!i||1!=e})}),t.reverse()},getDefaultState:function getDefaultState(){return{pageNumber:1,pageSize:24,total:0,view:e.view||"grid",sortBy:"default",sortOrder:null,filterCount:0,fetching:!1,isiPhone:(0,l.isiPhone)(),isMap:"map"==e.view,isMapExpanded:!1,isModal:!1,isModalFilter:!1,isMobile:(0,l.isMobile)(),isGeoLocated:!1,isSecondaryCollapsed:!1,isHomePage:"/"==n.location.pathname,radius:.5,geoItemCount:20,geoResultsBy:"count",nearbyAttraction:null,inView:!1,showFilters:!1,mapDisabled:!1,scrollDetectActive:!1,user:{}}},getHotelsAvailability:function getHotelsAvailability(e,t,i){var n=[o,"api/v2/hotel-availability-direct","?checkin=",e,"&checkout=",t,"&room1=",i].join("");return r.jsonp(a.trustAsResourceUrl(n),{cache:!1,jsonpCallbackParam:"callback"})},getBroadwayAvailability:function getBroadwayAvailability(e,t){var i=[o,"api/v1/show-availability-feed","?date_begins=",e,"&date_ends=",t].join("");return r.jsonp(a.trustAsResourceUrl(i),{cache:!1,jsonpCallbackParam:"callback"})},getAutoComplete:function getAutoComplete(e){var t="https://maps.googleapis.com/maps/api/place/autocomplete/json?\n      input="+e+"\n      &types=geocode\n      &key=AIzaSyCgRsL5N6a2kvV4FkjKpUdy0AyTd6I0OME";return r.jsonp(t,{cache:!1})},generateLabel:function generateLabel(e,t){var i=0<arguments.length&&void 0!==e?e:parseInt(i),n=t,r=[];return _.times(i,function(e){e++;var t=_.times(e,function(){return"A"}).join(","),i=e+" "+n+(1<e?"s":"");r.push({label:i,value:t,id:e,isSelected:2==e})}),r}}}var l=i(4);zo.$inject=["$http","$stateParams","$sce","$window","helpers","API_URL","SERVICE_URL"],t.default=zo},221:function(e,t,i){"use strict";function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ComponentController(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController)}Object.defineProperty(t,"__esModule",{value:!0});var n={controller:(function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}(ComponentController,[{key:"$onInit",value:function $onInit(){this.state=this.state||{},this.state.moduleTracking="Browse Widget"}}]),ComponentController),bindings:{class:"@",state:"<",filters:"<",dates:"<",allItems:"<",widgetItems:"<",quickLinks:"<",filterEnabled:"&",getAvailability:"&",handleSingleSelect:"&",handleSelectTypeAhead:"&",onDateChange:"&",switchModal:"&",url:"=",searchButtonText:"@"},templateUrl:"/app/hybrid-app/src/app-legacy/browse/components/nycgoSearchWidget.html"};t.default=n},222:function(e,t,i){"use strict";function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ComponentController(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController)}Object.defineProperty(t,"__esModule",{value:!0});var n={controller:(function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}(ComponentController,[{key:"getLinkName",value:function getLinkName(e){return e.title+" | Search "+e.index.charAt(0).toUpperCase()+e.index.slice(1)}}]),ComponentController),bindings:{items:"<"},templateUrl:"/app/hybrid-app/src/app-legacy/browse/components/nycgoQuickLinks.html"};t.default=n},225:function(e,t,i){"use strict";function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}(ComponentController,[{key:"$onInit",value:function $onInit(){this.enableFiltering=void 0===this.enableFiltering||this.enableFiltering;var e=this.groupByKey?this.groupByKey:"borough";this.locations=_.groupBy(this.items,e)}},{key:"$postLink",value:function $postLink(){var e=this;this.$timeout(function(){e.$element=$(".multi"+e.type),e.initMultiSelect(),e.refreshChecked()})}},{key:"$onChanges",value:function $onChanges(e){e.filtered&&e.filtered.isFirstChange()||e.filtered&&!e.filtered.currentValue&&this.refreshMultiSelect()}},{key:"getBoroughLabel",value:function getBoroughLabel(t){t=parseInt(t);var e=_.find(this.boroughs,function(e){return e.id==t?e:void 0});return e?e.title||e.name:void 0}},{key:"onChange",value:function onChange(e){this.onMultiSelect({node:this.neighborhoodFilterKey,id:e})}},{key:"refreshChecked",value:function refreshChecked(){var e=_.filter(this.items,{selected:!0}).map(function(e){return e.id.toString()});e&&this.$element.multiselect("select",e)}},{key:"refreshMultiSelect",value:function refreshMultiSelect(){var e=this;this.$timeout(function(){e.$element.multiselect("refresh")},200)}},{key:"initMultiSelect",value:function initMultiSelect(){var t=this;this.$element.multiselect({enableFiltering:this.enableFiltering,nonSelectedText:this.type,selectedClass:"selected",enableCaseInsensitiveFiltering:!0,enableClickableOptGroups:!0,enableCollapsibleOptGroups:!0,numberDisplayed:2,maxHeight:400,templates:{filter:'<li class="multiselect-item filter">\n                  <div class="input-group">\n                    <span class="input-group-addon"><i class="icon icon-search"></i></span>\n                    <input class="form-control multiselect-search" type="text">\n                  </div>\n                </li>'},onChange:function onChange(e){t.onChange(e.context.value)},onDropdownShown:function onDropdownShown(){t.$element.velocity("scroll",{container:$("#modalFilter"),duration:600,offset:480,easing:"ease-in-out"})}})}}]),ComponentController);function ComponentController(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$timeout=e.bind(this)}n.$inject=["$timeout"];var r={bindings:{items:"<",boroughs:"<",neighborhoodFilterKey:"@",groupByKey:"@",title:"@",type:"@",enableFiltering:"<",onMultiSelect:"&",filtered:"<"},controller:n,templateUrl:"/app/hybrid-app/src/app-legacy/components/filters/nycgoFilterLocation.html"};t.default=r},228:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(9)),r=_interopRequireDefault(i(229)),a=_interopRequireDefault(i(230)),o=_interopRequireDefault(i(220)),s=_interopRequireDefault(i(231)),l=_interopRequireDefault(i(232)),c=_interopRequireDefault(i(233)),u=_interopRequireDefault(i(221)),d=_interopRequireDefault(i(222)),p=_interopRequireDefault(i(234)),h=_interopRequireDefault(i(212)),f=_interopRequireDefault(i(211)),m=_interopRequireDefault(i(225)),g=_interopRequireDefault(i(236)),y=_interopRequireDefault(i(214)),v=_interopRequireDefault(i(237)),b=_interopRequireDefault(i(38));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _="nycgoBrowseApp";n.module(_,[b.default]).config(["$stateProvider","$urlRouterProvider","$locationProvider",r.default]).config(["$compileProvider",function(e){return e.debugInfoEnabled(!0)}]).component("nycgoBrowse",s.default).component("nycgoParent",l.default).component("nycgoFeaturedInline",c.default).component("nycgoSearchWidget",u.default).component("nycgoQuickLinks",d.default).component("nycgoTypeAheadAdvanced",p.default).component("nycgoTypeAhead",v.default).component("nycgoFilterMultiSelect",h.default).component("nycgoFilterLocation",m.default).component("nycgoFilterMultiDropdown",f.default).component("nycgoFilterRangeSlider",g.default).component("nycgoDateRangeLegacy",y.default).service("dataFactory",o.default).service("utilities",a.default),t.default=_},229:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function Er(e,t,i){var n=window.location.pathname.split("/").pop(),r=["borough","neighborhood","amenity","types","internet","transportation","miscellaneous","services","hotelChain","hotelType","arrival_date","departure_date","max_persons","audience","categories","genres","specials","begin_date","end_date","tickets","rating","cuisines","dietaryNeeds","match","dogify","top"],a=["/{currentPage}?anchor&browse&open"].concat(r).join("&"),o={currentPage:{value:n}},s={value:null,squash:!0},l=Object.assign({},r);Object.keys(l).forEach(function(e){o[l[e]]=s}),e.state("home",{url:a,params:o,reloadOnSearch:!1,resolve:{data:c,quickLinks:u,sort:d,rating:p,nearby:h},template:'<nycgo-parent\n                  class="browse"\n                  data="$resolve.data"\n                  quick-links="$resolve.quickLinks"\n                  sort="$resolve.sort"\n                  rating="$resolve.rating"\n                  nearby="$resolve.nearby"\n                  vertical={{$ctrl.vertical}}\n                  inline={{$ctrl.inline}} >\n                </nycgo-parent>'}),i.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1})}var n=$("nycgo-browse").attr("vertical")||"",c=function resolveVertical(e){return e.getVerticalData(n)},u=function resolveQuickLinks(e){return e.getQuicklinks()},d=function resolveSort(e){return e.getSort()},p=function resolveRating(e){return"hotels"==n?e.getRatings():null},h=function resolveNearby(e){return"hotels"==n?e.getVerticalData("attractionsMap"):null};Er.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],c.$inject=["dataFactory"],u.$inject=["dataFactory"],d.$inject=["dataFactory"],p.$inject=["dataFactory"],h.$inject=["dataFactory"],t.default=Er},23:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingComponent=void 0;var n=i(0),r=i(1);var a=function LoadingComponent(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LoadingComponent)};(0,n.__decorate)([(0,r.Input)(),(0,n.__metadata)("design:type",String)],a.prototype,"title",void 0),t.LoadingComponent=a=(0,n.__decorate)([(0,r.Component)({selector:"nycgo-loading",templateUrl:"/app/hybrid-app/src/app/components/shared/loading.component.html"})],a),t.LoadingComponent=a},230:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var M=i(4);function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function utilities(S,e,t,i,k,w){var I=function formatPrice(e){e=Number(e);var t=_.ceil(e);return 0===t?null:t},T=function verticalHash(){return{attractions:{header:"attractions",sort:"mini",mainCategory:"types",catLimit:2,typesLookupName:"attractionType",filterExcludes:["borough","neighborhood","primaryLocation"]},broadway:{header:"shows",sort:"broadway",priceLabel:"Price",dateLabel:{start:"To",end:"From"},pageSize:15,url:"events",mainCategory:"types",filterExcludes:[]},dining:{header:"restaurants",sort:"mini",url:"restaurants",mainCategory:"cuisines",filterExcludes:["amenity","borough","neighborhood","primaryLocation"]},hotels:{header:"hotels",ratingLabel:"Hotel",priceLabel:"Price per Night",icon:"star",sort:"hotel",dateLabel:{start:"Check <span>In</span>",end:"Check <span>Out</span>"},mainCategory:"types",filterExcludes:["borough","neighborhood","primaryLocation","rating"]},museums:{header:"museums",sort:"mini",url:"museums-galleries",mainCategory:"types",catLimit:3,typesLookupName:"museumType",filterExcludes:["borough","neighborhood","primaryLocation"]},nightlife:{header:"nightlife",sort:"mini",mainCategory:"types",typesLookupName:"nightlifeType",filterExcludes:["borough","neighborhood","primaryLocation"]},offBroadway:{header:"shows",sort:"broadway",dateLabel:{start:"<span>From</span>",end:"<span>To</span>"},pageSize:20,url:"events",mainCategory:"types",filterExcludes:[]},services:{header:"services",sort:"mini",url:"venues",mainCategory:"types",typesLookupName:"serviceType",filterExcludes:["borough","neighborhood","primaryLocation"]},shopping:{header:"shopping",sort:"mini",mainCategory:"types",catLimit:3,typesLookupName:"shoppingType",filterExcludes:["borough","neighborhood","primaryLocation"]},tours:{header:"tours",ratingLabel:"User",priceLabel:"Price",icon:"heart",sort:"full",mainCategory:"types",catLimit:3,typesLookupName:"tourType",filterExcludes:["rating"]}}},P=function filterHash(e,t){return-1!=={types:["attractions","broadway","hotels","museums","nightlife","offBroadway","performingArts","services","shopping","tours"],typesLabel:["attractions","nightlife","museums","performingArts","shopping","services","tours"],genres:["broadway","nightlife","offBroadway","performingArts"],misc:["broadway","hotels","offBroadway"],dates:["broadway","hotels","offBroadway"],audience:["broadway","offBroadway"],rating:["hotels","tours"],amenities:["hotels"],minPrice:["broadway","hotels","offBroadway","tours"],locationDisabled:["broadway","offBroadway","tours"],customUrl:["broadway","dining","museums","offBroadway","services"],singleDate:["broadway","offBroadway"]}[e].indexOf(t)};return{transformItems:function transformItems(e,b,C){P("customUrl",C)&&T()[C].url;return e.map(function(n){if(n.image=_.has(n.imageByType,"small")?n.imageByType.small:w.placeHolderImage(),"tours"==C){if(n.image=_.has(n.imageByType,"viatorDefault")&&null!=n.imageByType.viatorDefault?n.imageByType.viatorDefault:n.image,n.image=_.has(n.imageByType,"medium")?n.imageByType.medium:n.image,n.ecommerce){var t=[];n.ecommerce.forEach(function(e){e.price&&t.push(e.price)}),n.minPrice=I(_.min(t))}n.title="tour"==n.channelShortName?n.displayTitle:n.operator,n.reviewRating=n.reviewScore||null}if("hotels"==C){if(n.hotelStars=_.times(n.rating,function(){return'<i class="icon icon-star"></i>'}).join(""),n.hotelId=parseInt(n.id),n.ecommerce){var i=[];n.ecommerce.forEach(function(e){e.minPrice&&i.push(e.minPrice)}),n.minPrice=I(_.min(i)),n.ecommerce.length&&n.ecommerce[0].partnerId&&(n.bookingId=n.ecommerce[0].partnerId)}n.hotelCardTag=S.defaultSettings.flag}if("broadway"==C){if(n.image=_.has(n.logoByType,"medium")?n.logoByType.medium:n.image,n.image=(0,M.getCloudImage)({image:n.image||n.logoByType.default,width:"300",height:"400"}),n.image=k.trustAsResourceUrl(n.image),n.ecommerce){var r=[];n.ecommerce.forEach(function(e){e.minPrice&&r.push(e.minPrice)}),n.minPrice=I(_.min(r)),n.ecommerce.length&&n.ecommerce[0].partnerId&&(n.showCode=n.ecommerce[0].partnerId)}var e=w.extractLookupInfoIds("showType",n),a=e?e.split(","):[],o=b.showType.filter(function(e){if(0<a.length)return-1!=a.indexOf(e.id)}).map(function(e){return e.name}),s=w.extractLookupInfoIds("audience",n),l=_.filter(b.audience,{id:s}).map(function(e){return e.name});n.categoryName=[].concat(_toConsumableArray(o),_toConsumableArray(l)).join(" | ")}if("dining"==C){var c=w.extractLookupInfoIds("cuisine",n),u=c?c.split(","):[];0<u.length&&(n.cuisinesLabel=b.cuisine.filter(function(e){return-1!=u.indexOf(e.id)}).map(function(e){return e.name}),n.cuisinesLabel=n.cuisinesLabel.join(", "))}if(P("typesLabel",C)){var d=T()[C].catLimit||5,p=T()[C].typesLookupName,h=b[p].filter(function(e){var t=w.extractLookupInfoIds(p,n),i=t?t.split(","):[];if(0<i.length)return-1!=i.indexOf(e.id)}).map(function(e){return e.name}),f=[],m=[];h.length>d?(h.forEach(function(e,t){1==t?f.push(e):m.push(e)}),m.join(", "),n.typesLabel=f.join(", "),n.typesLabelPop=m.join(", ")):n.typesLabel=h.join(", ")}n.urlOriginal=n.url;var g=w.extractLookupInfoIds("primaryLocation",n);if(g){var y=_.find(b.neighborhood,{id:g});if(!(y?y.boroughId:null)){var v=_.find(b.borough,{id:g});v?v.id:null}}return n.sortTitle?n.sortTitle=n.sortTitle.toLowerCase():(n.shortTitle&&(n.sortTitle=n.shortTitle.toLowerCase()),n.sortTitle=!n.sortTitle&&n.displayTitle?n.displayTitle.toLowerCase():n.sortTitle),n.sortTitle=n.sortTitle.replace(/^the |^a |^an /,""),n.sortTitle=_.trim(n.sortTitle),n.titleNormalized=n.sortTitle,n.titleNormalizedLC=n.sortTitle.toLowerCase(),n})},applyRangeFilter:function applyRangeFilter(e,t,i){var n=t.minInitial,r=t.maxInitial,a=t.minCurrent,o=t.maxCurrent;return a==n&&o==r?e:e.filter(function(e){return e[i]>=a&&e[i]<=o})},updateSlideIndex:function updateSlideIndex(e){return e.map(function(e,t){return e.slide=t,e})},updatePriceRange:function updatePriceRange(e){var t=_.filter(e,function(e){return!!e.minPrice}).map(function(e){return e.minPrice}),i=0,n=0;return t.length&&(i=_.min(t),n=_.max(t)),{minInitial:i,maxInitial:n,minCurrent:i,maxCurrent:n}},formatPrice:I,createFilters:function createFilters(t,e){var i={},n=Object.keys(t);return"dining"==e&&(n=_.filter(n,function(e){return!("amenities"==e)})),_.forEach(n,function(e){i[e]=_.sortBy(t[e],"name"),i[e]=w.setSelected(String(e),i[e])}),i},sortByProperty:function sortByProperty(e,n){var t=e.reduce(function(e,t){var i=t[n];return"imageByType"==n?i=!(!t[n]||!t[n].card):"logoByType"==n&&(i=!(!t[n]||!t[n].medium)),i||e.noProperty.push(t),i&&e.withProperty.push(t),e},{withProperty:[],noProperty:[]});return[].concat(_toConsumableArray(t.withProperty),_toConsumableArray(t.noProperty))},verticalHash:T,filterHash:P,isSingleSelected:function isSingleSelected(e){return 1==_.filter(e,{selected:!0})}}}utilities.$inject=["$stateParams","$state","$filter","$timeout","$sce","helpers"],t.default=utilities},231:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function Zt(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Zt),this.verticalHash=e.verticalHash()}Zt.$inject=["utilities"];var n={controller:Zt,bindings:{vertical:"@",inline:"@"},template:'<div ui-view>\n                <div class="text-center loading">\n                  <h3 class="fetching text-center">\n                      Loading <span ng-bind-html="$ctrl.verticalHash[$ctrl.vertical].header"></span>\n                  </h3>\n                </div>\n              </div>'};t.default=n},232:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=i(4),o=i(193);function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var s=(r(ComponentController,[{key:"$onInit",value:function $onInit(){switch(this.state=this.dataFactory.getDefaultState(),this.filters=this.utilities.createFilters(this.data.lookup,this.vertical),this.filtersTemp={},this.webStore="nycgo_"+this.vertical,this.qstrings=Object.keys(this.data.lookup),this.verticalHash=this.utilities.verticalHash()[this.vertical],this.sortDistance=this.sort.distance,this.state.sort=this.sort[this.verticalHash.sort],this.sortSpecial=["minPrice","userRating","rating"],this.currentDate=new Date,this.isSpider=(0,a.isSpider)(),this.filterEnabled("dates")&&(this.state.tickets=this.dataFactory.generateLabel(8,"ticket"),this.state.guests=this.dataFactory.generateLabel(8,"guest")),this.state.moduleTracking="Grid",this.state.title=this.verticalHash.header,this.state.mapDisabled=this.filterEnabled("locationDisabled"),this.state.previous=[],this.state.vertical=this.vertical,this.state.icon=this.$stateParams.dogify?"dog":null,this.state.catLimit=this.verticalHash.catLimit||5,this.state.redirectSearch=!1,this.quickLinks=_.filter(this.quickLinks,{index:this.vertical}),this.quickLinks=_.forEach(this.quickLinks,function(e){e.baseUrl=_.clone(e.index),"hotels"==e.baseUrl&&(e.baseUrl="plan-your-trip/hotels-in-nyc")}),this.state.pageSize=this.verticalHash.pageSize||this.state.pageSize,this.filterEnabled("rating")&&(this.filters.rating=this.dataFactory.getRatings("rating"),this.$stateParams.rating&&(this.filters.rating=this.helpers.setSelected("rating",this.filters.rating))),this.vertical){case"attractions":this.filters.attractionType=this.helpers.setSelected("types",this.filters.attractionType);break;case"broadway":this.filters.showType=this.helpers.setSelected("types",this.filters.showType),this.filters.audience=this.helpers.setSelected("audience",this.filters.audience);break;case"dining":this.filters.cuisine=this.helpers.setSelected("cuisines",this.filters.cuisine),this.filters.dietaryNeed=this.helpers.setSelected("dietaryNeeds",this.filters.dietaryNeed);break;case"hotels":this.filters.hotelType=this.helpers.setSelected("types",this.filters.hotelType),this.ratingDataField="rating";break;case"museums":this.filters.museumType=this.helpers.setSelected("types",this.filters.museumType);break;case"nightlife":this.filters.genre=this.helpers.setSelected("genres",this.filters.genre),this.filters.nightlifeType=this.helpers.setSelected("types",this.filters.nightlifeType);break;case"offBroadway":this.filters.showType=this.helpers.setSelected("types",this.filters.showType),this.filters.audience=this.helpers.setSelected("audience",this.filters.audience);break;case"services":this.filters.serviceType=this.helpers.setSelected("types",this.filters.serviceType);break;case"shopping":this.filters.shoppingType=this.helpers.setSelected("types",this.filters.shoppingType);break;case"tours":this.filters.tourType=this.helpers.setSelected("types",this.filters.tourType),this.ratingDataField="reviewScore"}var e=Object.keys(this.filters).filter(function(e){return"borough"!=e&&"neighborhood"!=e&&"primaryLocation"!=e}).length;if(this.state.isSingleFilter=1==e,this.filtersTemp=_.clone(this.filters),this.state.isFiltered=(0,a.isFiltered)(this.filters),(this.state.isFiltered||this.$stateParams.anchor||this.$stateParams.open||this.$stateParams.browse||this.isSpider)&&this.switchModal(!0),"hotels"==this.vertical&&(this.$stateParams.defaultSettings={flag:"for 1 night"}),this.allItems=this.utilities.transformItems(this.data.data,this.filters,this.vertical),this.allItems=this.utilities.sortByProperty(this.allItems,"isFeatured"),"broadway"==this.vertical||"offBroadway"==this.vertical?this.allItems=this.utilities.sortByProperty(this.allItems,"logoPath"):this.allItems=this.utilities.sortByProperty(this.allItems,"imagePath"),"dining"==this.vertical&&(this.allItems=this.helpers.diningSort(this.allItems)),this.origItems=Object.freeze(this.allItems),this.widgetItems=_.clone(this.allItems),this.state.total=this.allItems.length,this.items=(0,a.paginate)(this.allItems,this.state.pageNumber,this.state.pageSize),this.items=this.utilities.updateSlideIndex(this.items),this.filterEnabled("minPrice")&&(this.sliderOptions=this.utilities.updatePriceRange(this.allItems),this.sliderOptionsOrig=_.clone(this.sliderOptions)),this.filterEnabled("dates")&&(this.dates={startDate:this.$stateParams.arrival_date,endDate:this.$stateParams.departure_date,startLabel:this.verticalHash.dateLabel.start,endLabel:this.verticalHash.dateLabel.end},"hotels"==this.vertical&&(this.widgetItems=(0,a.randomizeItems)(this.widgetItems),this.widgetItems=this.utilities.sortByProperty(this.widgetItems,"imageByType"),this.nearby=this.nearby?this.nearby.data:null,this.dates.minDate=this.$filter("date")(this.currentDate,"MM/dd/yyyy"),Date.parse(this.dates.startDate)<Date.parse(this.dates.minDate)&&(this.dates.startDate=this.$filter("date")(Date.parse(this.dates.minDate),"yyyy-MM-dd")),this.dates.startDate&&this.dates.endDate&&this.getAvailableHotels(this.dates)),"broadway"==this.vertical||"offBroadway"==this.vertical)){var t=new Date;if(t=t.setDate(this.currentDate.getDate()+1),this.dates.minDate=this.$filter("date")(t,"MM/dd/yyyy"),!this.dates.startDate&&!this.dates.endDate){var i=new Date;i=i.setDate(this.currentDate.getDate()+14),this.dates.startDate=this.$filter("date")(this.currentDate,"yyyy-MM-dd"),this.dates.endDate=this.$filter("date")(this.currentDate,"yyyy-MM-dd"),Date.parse(this.dates.startDate)<Date.parse(this.dates.minDate)&&(this.dates.startDate=this.$filter("date")(Date.parse(this.dates.minDate),"yyyy-MM-dd"))}}this.state.view=this.state.showPosterCards?"list":"grid",!this.state.showPosterCards&&"hotels"!=this.vertical||(this.state.lockView=!0),this.state.isFiltered&&this.applyFilter(),this.state.isModal&&this.helpers.toggleBodyScroll(),this.lazyLoadImages()}},{key:"$postLink",value:function $postLink(){this.state.isMobile&&this.detectScroll(),this.lazyLoadImages()}},{key:"applyFilter",value:function applyFilter(e,t){var i=this;this.state.isLoading=!0,this.state.pageNumber=e?this.state.pageNumber:1,this.state.isModal||this.switchModal(!0),this.$timeout(function(){var e=_.clone(i.allItems);e=i.filters.searchText?i.helpers.applyTextSearch(e,i.filters.searchText,"browseApp"):e,e=i.mainFilter(e),e=_.orderBy(e,i.state.sortBy,i.state.sortOrder),t||!i.filterEnabled("minPrice")||i.state.isMobile||(i.sliderOptions=i.utilities.updatePriceRange(e),i.sliderOptionsOrig=_.clone(i.sliderOptions)),i.sortSpecial.includes(i.state.sortBy)&&(e=i.utilities.sortByProperty(e,i.state.sortBy)),i.items=i.helpers.paginate(e,i.state.pageNumber,i.state.pageSize),i.items=i.utilities.updateSlideIndex(i.items),i.state.isLoading=!1,i.helpers.updateUrl(i.filters,i.qstrings,i.webStore)},100),this.lazyLoadImages()}},{key:"mainFilter",value:function mainFilter(n){var r=this;return this.vertical,this.state.isFiltered=(0,a.isFiltered)(this.filters),this.state.filterCount=(0,a.filterCount)(this.filters),this.state.isFilteredPrice=!!this.sliderOptions&&!_.isEqual(this.sliderOptions,this.sliderOptionsOrig),this.state.isFiltered&&Object.keys(this.filters).filter(function(e){return"searchText"!=e}).forEach(function(e){var t=!!_.find(r.filters[e],{isSelected:!0}),i="neighborhoods"==e||"boroughs"==e?e.slice(0,-1):e;t&&(n=r.helpers.applyMultiSelect(n,r.filters[e],i,!1,r.customDataSearchKeys))}),this.state.isGeoLocated&&"count"==this.state.geoResultsBy&&"distance"==this.state.sortBy&&(n=n.slice(0,this.state.geoItemCount)),this.filterEnabled("minPrice")&&(n=(0,a.applyRangeFilter)(n,this.sliderOptions,"minPrice")),this.state.total=n.length,n}},{key:"handleTextSearch",value:function handleTextSearch(e){this.filters.searchText=e,(this.state.isModal||!this.state.isModal&&e)&&this.applyFilter()}},{key:"handleMultiSelect",value:function handleMultiSelect(e,t,i){"object"==(void 0===e?"undefined":n(e))&&(t=e.id,e=e.node),t=Number(t),i&&(this.customDataSearchKeys[e]={filterName:e,dataFieldKey:i}),this.state.isModalFilter?this.filtersTemp[e]=this.helpers.handleMultiSelect(t,this.filtersTemp[e]):(this.filters[e]=this.helpers.handleMultiSelect(t,this.filters[e]),this.applyFilter())}},{key:"handleSlider",value:function handleSlider(e){this.sliderOptions.minCurrent=e[0],this.sliderOptions.maxCurrent=e[1],this.applyFilter(null,!0)}},{key:"handleSingleSelect",value:function handleSingleSelect(e,t){this.state[t]=(0,a.handleSingleSelect)(this.state[t],e),_.find(this.state[t],{id:e}).isSelected=!0,"guests"==t&&(this.state.isModal?this.getAvailableHotels(this.dates):this.$timeout()),"tickets"==t&&(this.state.isModal?this.getBroadwayShows(this.dates):this.$timeout())}},{key:"handleSelectTypeAhead",value:function handleSelectTypeAhead(t,i,e){function iv(e,t,i){var n=2<arguments.length&&void 0!==i&&i;if(a.state.pageNumber=1,n&&"searchText"==e)return a.handleTextSearch(null),!1;"boroughs"==e&&(e="borough"),"neighborhoods"==e&&(e="neighborhood");var r=_.find(a.state.isModalFilter?a.filtersTemp[e]:a.filters[e],{id:t});n?(r&&(r.isSelected=!1),a.state.previousCatKey==t&&a.state.previousCatType==e&&(a.filters.searchText=null)):r&&(r.isSelected=!r.isSelected),a.applyFilter()}var a=this,n=["neighborhoods","boroughs","types","cuisines"],r={search:function search(){return a.handleTextSearch(t)},autocomplete:function autocomplete(){return a.handleAutoComplete(t,e)},default:function _default(){return iv(i,t)}},o={search:function search(){return a.handleTextSearch("")},autocomplete:function autocomplete(){return a.removeDistance()},default:function _default(){return iv(a.state.searchType,a.state.previousCatKey,!0)}};if("search"==i){if(this.state.redirectSearch&&!this.state.isModal){var s=_.find(this.allItems,function(e){return e.title==t});if(s&&s.url)return void(this.$window.location.href=s.url)}var l=[];_.forEach(n,function(e){if(l[e]=_.find(a.filters[e],function(e){return e.title.toLowerCase()==t}),l[e])return t=l[i=e].id,!1})}this.state.searchType="clear"==i?this.state.searchType:i,n.includes(i)&&(this.state.previousCatKey=t,this.state.previousCatType=i),"clear"==i?(o[this.state.searchType]||o.default)():(r[i]||r.default)(),this.state.isMobile&&this.toggleFilter(!0)}},{key:"handleAutoComplete",value:function handleAutoComplete(e,t){var i=this,n=new google.maps.Geocoder,r={placeId:t||e,bounds:this.defaultBounds};this.$timeout(function(){n.geocode(r,function(e,t){"OK"==t?i.handlePlacesSelect({location:e[0]}):console.log("Geocode was not successful for the following reason: "+t)})},250)}},{key:"handlePlacesSelect",value:function handlePlacesSelect(e){this.state.user.location=null,this.state.user.text=null,e&&(this.state.user.location=e.location.geometry.location,this.state.user.text=e.location.formatted_address,this.allItems=this.addDistance(this.allItems,this.state.user.location,!0))}},{key:"handleQuickSelect",value:function handleQuickSelect(e){var t=this,i=e.title,n=e.parentCategory,r=e.category_id;return this.filters=this.helpers.resetFilters(this.filters),"All"==i?this.switchModal(!0):r&&(1==r.length?this.handleMultiSelect(n,r[0]):_.forEach(r,function(e){t.$timeout(function(){t.handleMultiSelect(n,e)},100)})),!1}},{key:"addDistance",value:function addDistance(e,t,i){var n=this,r=t.latitude,a=t.longitude;return i&&(r=t.lat(),a=t.lng(),this.addSortDistance()),e.forEach(function(e){var t=n.helpers.calcDistance(r,a,e.latitude,e.longitude);e.distance=+t.toFixed(2),e.inHood="Nearby "+n.state.user.text}),e}},{key:"removeDistance",value:function removeDistance(){this.allItems.forEach(function(e){e.inHood&&delete e.inHood,delete e.distance}),this.state.isGeoLocated=!1,this.state.sort=_.filter(this.state.sort,function(e){return"Nearest"!=e.label}),this.handleSortOrder({id:1})}},{key:"addSortDistance",value:function addSortDistance(e){var t=0<arguments.length&&void 0!==e?e:null;this.state.isGeoLocated||(this.state.sort=[].concat(_toConsumableArray(this.state.sort),_toConsumableArray(this.sortDistance))),this.state.nearbyAttraction=t,this.state.isGeoLocated=!0,this.handleSortOrder({id:10})}},{key:"onDateChange",value:function onDateChange(e,t){if(!e&&!t)return!1;this.dates.startDate=e,this.dates.endDate=t,this.state.isModal?this.getAvailability():this.$timeout()}},{key:"getCalendarTimeframe",value:function getCalendarTimeframe(e,t){var i=(new Date(e)-new Date(t))/864e5,n="for "+i+" night";return 2<=i?n+"s":n}},{key:"getAvailability",value:function getAvailability(){"hotels"==this.vertical&&this.getAvailableHotels(this.dates),"broadway"!=this.vertical&&"offBroadway"!=this.vertical||this.getBroadwayShows(this.dates)}},{key:"onSwitchView",value:function onSwitchView(e){this.state.view=e,this.$timeout()}},{key:"toggleState",value:function toggleState(e){this.state[e]=!this.state[e]}},{key:"switchModal",value:function switchModal(e){var t=0<arguments.length&&void 0!==e&&e;this.toggleState("isModal"),this.helpers.toggleBodyScroll(!t),this.state.isModal||this.$stateParams.top||(0,a.anchorScrollBrowse)()}},{key:"toggleFilter",value:function toggleFilter(e){var t=this;e&&this.$timeout(function(){t.filtersTemp=_.clone(t.filters),t.state.isMobile}),this.toggleState("isModalFilter")}},{key:"applyModalFilter",value:function applyModalFilter(){this.filters=_.clone(this.filtersTemp),this.toggleState("isModalFilter"),this.applyFilter()}},{key:"handleGuestSelect",value:function handleGuestSelect(e){this.handleSingleSelect(e.id,"guests")}},{key:"handleTicketSelect",value:function handleTicketSelect(e){this.handleSingleSelect(e.id,"tickets")}},{key:"handleSortOrder",value:function handleSortOrder(e){var t=e.id;this.state.sort=(0,a.handleSingleSelect)(this.state.sort,t);var i=_.find(this.state.sort,{id:t});i.isSelected=!0,this.state.sortBy=i.value,this.state.sortOrder=i.order,this.applyFilter()}},{key:"updateActive",value:function updateActive(e,t,i){if(e=parseInt(e),this.state.activeId=""+e||null,i){var n=_.find(this.items,{id:""+e});this.$slickContainer.slick("slickGoTo",n.slide)}this.$timeout()}},{key:"updateHover",value:function updateHover(e){e=parseInt(e),this.state.hoverId=""+e||null,this.$timeout()}},{key:"clearSearch",value:function clearSearch(e,t){var i=1<arguments.length&&void 0!==t&&t;this.filterEnabled("misc")&&(this.dates.startDate=null,this.dates.endDate=null,this.filterEnabled("dates")&&("hotels"==this.vertical&&(this.state.guests=this.dataFactory.generateLabel(8,"guest"),e&&($("#"+e).data("daterangepicker").setStartDate(this.dates.minDate),$("#"+e).data("daterangepicker").setEndDate(this.dates.minDate))),"broadway"!=this.vertical&&"offBroadway"!=this.vertical||(this.state.tickets=this.dataFactory.generateLabel(8,"ticket"),this.dates.startDate=this.$filter("date")(this.currentDate,"yyyy-MM-dd"),Date.parse(this.dates.startDate)<Date.parse(this.dates.minDate)&&(this.dates.startDate=this.$filter("date")(Date.parse(this.dates.minDate),"yyyy-MM-dd")),e&&($("#"+e).data("daterangepicker").setStartDate(this.dates.minDate),$("#"+e).data("daterangepicker").setEndDate(this.dates.minDate))))),"hotels"==this.vertical&&this.hotelsDataReset(),this.filterEnabled("minPrice")&&(this.sliderOptions=_.clone(this.sliderOptionsOrig)),i||this.applyFilter()}},{key:"hotelsDataReset",value:function hotelsDataReset(){var e=new Date(this.dates.minDate);e=e.setDate(e.getDate()+1);var t={startDate:this.$filter("date")(new Date(this.dates.minDate),"yyyy-MM-dd"),endDate:this.$filter("date")(e,"yyyy-MM-dd")};this.getAvailableHotels(t)}},{key:"getAvailableHotels",value:function getAvailableHotels(e){var r=this;this.state.isLoading=!0;var a=e.startDate,o=e.endDate;if(o){var t=moment(a,"YYYY-MM-DD"),i=moment(o,"YYYY-MM-DD"),n=moment.duration(i.diff(t));n&&n.isValid()&&(this.state.duration=n.asDays())}var s=_.find(this.state.guests,{isSelected:!0}).value;this.dataFactory.getHotelsAvailability(a,o,s).then(function(e){var n=e.data.data;r.allItems=_.filter(r.origItems,function(t){var e=_.find(n,function(e){if(t.bookingId=parseInt(t.bookingId),e.hotelId==t.bookingId)return e});if(e){var i="?checkin="+a+"&checkout="+o+"&room1="+s;t.url=t.urlOriginal+i,t.minPrice=r.utilities.formatPrice(e.price),t.hotelCardTag=r.getCalendarTimeframe(o,a)}return e}),r.state.isLoading=!1,r.sliderOptions=r.utilities.updatePriceRange(r.allItems),r.applyFilter()}),this.$state.go("home",{arrival_date:this.dates.startDate,departure_date:this.dates.endDate})}},{key:"getBroadwayShows",value:function getBroadwayShows(e){var n=this;this.state.isLoading=!0;var t=e.startDate,i=e.endDate;this.dataFactory.getBroadwayAvailability(t,i).then(function(e){var i=e.data.data;n.allItems=_.filter(n.origItems,function(e){var t=_.find(i,{showCode:e.showCode});return t&&(e.minPrice=n.utilities.formatPrice(t.minPrice)),t}),n.sliderOptions=n.utilities.updatePriceRange(n.allItems),n.state.isLoading=!1,n.applyFilter()}),this.$state.go("home",{begin_date:this.dates.startDate,end_date:this.dates.endDate})}},{key:"onPageChange",value:function onPageChange(e){this.state.pageNumber=e.page,this.applyFilter(e.page),this.$timeout(function(){(0,a.anchorScrollBrowse)(".topper",-200,".card-items")},100)}},{key:"filterEnabled",value:function filterEnabled(e,t){var i=1<arguments.length&&void 0!==t?t:this.vertical;return!!e&&this.utilities.filterHash(e,i)}},{key:"detectScroll",value:function detectScroll(){var n=this;this.$timeout(function(){var t=$(".card-items"),i=0,e=_.debounce(function(){var e=t.scrollTop();n.state.isSecondaryCollapsed=i<e,i=e},500);t.on("scroll",e)})}},{key:"resetFilters",value:function resetFilters(){this.filters=this.helpers.resetFilters(this.filters),this.filtersTemp=_.clone(this.filters),this.filters.searchText="",this.filterEnabled("minPrice")&&(this.sliderOptions.minCurrent=this.sliderOptions.minInitial,this.sliderOptions.maxCurrent=this.sliderOptions.maxInitial),this.filterEnabled("dates")&&this.clearSearch(null,!0),this.applyFilter()}},{key:"lazyLoadImages",value:function lazyLoadImages(){this.$timeout(function(){o.ngBLazy.load(document.querySelectorAll(".card-items .b-lazy"),!0)})}}]),ComponentController);function ComponentController(e,t,i,n,r,a,o,s){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$timeout=i,this.$stateParams=e,this.$state=t,this.$filter=n,this.$window=r,this.helpers=a,this.dataFactory=o,this.utilities=s,this.ratingDataField=null,this.customDataSearchKeys=[],this.isSlickInitialized=!1,this.defaultBounds=new google.maps.LatLngBounds(new google.maps.LatLng(40.4959961,-74.2590879),new google.maps.LatLng(40.91525559999999,-73.70027209999999))}s.$inject=["$stateParams","$state","$timeout","$filter","$window","helpers","dataFactory","utilities"];var l={controller:s,bindings:{data:"<",quickLinks:"<",sort:"<",rating:"<",nearby:"<",vertical:"@",inline:"@"},templateUrl:"/app/hybrid-app/src/app-legacy/browse/components/nycgoParent.html"};t.default=l},233:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={bindings:{items:"<",state:"<",switchModal:"&"},templateUrl:"/app/hybrid-app/src/app-legacy/browse/components/nycgoFeaturedInline.html"}},234:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(i(235));var a=(n(ComponentController,[{key:"$onInit",value:function $onInit(){this.availPlaceIds=_.map(this.filters.neighborhood,function(e){return e.googlePlaceId}),this.verticalHash=this.utilities.verticalHash()[this.vertical],this.hasLocation=!this.utilities.filterHash("locationDisabled",this.vertical);var e=_.capitalize(this.verticalHash.mainCategory);this.placeholder="Search by Name"+(this.hasLocation?", "+e+", Borough, Neighborhood or near a Location":" or "+e)}},{key:"$postLink",value:function $postLink(){var e=this;this.$timeout(function(){e.$element=$("."+e.id),e.initTypeAhead()},100)}},{key:"$onChanges",value:function $onChanges(e){if(e){if(e.text&&e.text.isFirstChange())return;if(e.filters){if(e.filters.borough&&e.filters.borough.isFirstChange())return;if(e.filters.neighborhood&&e.filters.neighborhood.isFirstChange())return}e.text&&(e.text.currentValue?this.text=_.clone(this.text):this.clearInput()),this.filters=_.clone(this.filters)}}},{key:"searchOnEnter",value:function searchOnEnter(e,t){var i=e.currentTarget.value;if(i?(!t||"search"==t.type||_.isEqual(this.previousSearch,t)&&i!=this.previousText)&&(this.$element.typeahead("close"),this.handleSelectTypeAhead({key:i,type:"search"})):this.clearInput(),t){var n=t.key,r=t.type;this.previousSearch={key:n,type:r}}this.previousText=i}},{key:"clearInput",value:function clearInput(){this.$element.typeahead("val",null),this.text=null,this.handleSelectTypeAhead({key:null,type:"clear"}),this.$timeout()}},{key:"initTypeAhead",value:function initTypeAhead(){function Ex(i,n){return function(e,t){if(!e)return!1;"neighborhoods"!=n&&"boroughs"!=n||(i=_.filter(i,function(e){return!e.isSelected})),t(o.helpers.applyTextSearch(i,e,"typeahead"))}}var o=this,e=this.verticalHash.mainCategory,t=_.capitalize(this.verticalHash.header),i=this.verticalHash.typesLookupName,n=[{name:"search",source:function(e,t){t([{title:e,isTextSearch:!0}])},displayKey:"title",templates:{suggestion:function suggestion(e){return'<h5 class="typeahead-group">Search for: <span>'+e.title+"</span></h5>"}}},{name:t,source:Ex(this.items),displayKey:"displayTitle",templates:{header:'<h5 class="typeahead-group">'+t+"</h5>"}},{name:e,source:Ex(this.filters[i],e),displayKey:"name",templates:{header:'<h5 class="typeahead-group">'+_.capitalize(e)+"</h5>"}}],r=[{name:"neighborhoods",source:Ex(this.filters.neighborhood,"neighborhoods"),displayKey:"name",templates:{header:'<h5 class="typeahead-group">Neighborhoods</h5>'}},{name:"boroughs",source:Ex(this.filters.borough,"boroughs"),displayKey:"name",templates:{header:'<h5 class="typeahead-group">Boroughs</h5>'}},{name:"places",source:function placeMatcher(){return function(e,t){if(!e)return!1;var i=new google.maps.places.AutocompleteService,n={input:e,types:["geocode"],componentRestrictions:{country:"US"},bounds:o.defaultBounds};i.getPlacePredictions(n,function(e,t){if(o.places=[],t===google.maps.places.PlacesServiceStatus.OK){var a=["NY,","NJ,","CT,"];_.forEach(e,function(i){var n=i.structured_formatting.secondary_text,r=0<=o.availPlaceIds.indexOf(i.place_id);_.forEach(a,function(e){var t=0<=n.indexOf(e);!r&&t&&o.places.push({id:i.place_id,title:i.description})})})}}),t(o.places)}}(),displayKey:"title",templates:{header:'<h5 class="typeahead-group">Places Near:</h5>'}}],a=this.hasLocation?[].concat(n,r):n;this.$element.typeahead({hint:!1,highlight:!0,minLength:3},a).on("typeahead:select",function(e,t){o.currentSearch={},o.text=e.currentTarget.value;var i="autocomplete",n=t.id,r=t.googlePlaceId;_.has(t,"isSelected")&&(i=_.has(t,"boroughId")?"neighborhoods":t.googlePlaceId&&t.id&&2==t.id.length?"boroughs":o.verticalHash.mainCategory),(_.has(t,"sortTitle")||_.has(t,"isTextSearch"))&&(i="search",n=t.displayTitle),o.currentSearch.key=n,o.currentSearch.type=i,o.currentSearch.gpid=r,o.handleSelectTypeAhead({key:n,type:i,gpid:r})}).on("keyup",function(e){13==e.keyCode&&o.searchOnEnter(e,o.currentSearch)})}}]),ComponentController);function ComponentController(e,t,i){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$timeout=e,this.helpers=t,this.utilities=i,this.defaultBounds=r.default}a.$inject=["$timeout","helpers","utilities"];var o={controller:a,bindings:{id:"@",items:"<",filters:"<",text:"@",placeholder:"@",vertical:"@",handleSelectTypeAhead:"&"},templateUrl:"/app/hybrid-app/src/app-legacy/browse/components/nycgoTypeAheadAdvanced.html"};t.default=o},235:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new google.maps.LatLngBounds(new google.maps.LatLng(40.4959961,-74.2590879),new google.maps.LatLng(40.91525559999999,-73.70027209999999));t.default=n},236:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(i(275));var a=(n(ComponentController,[{key:"$onInit",value:function $onInit(){var e=this;this.$timeout(function(){e.initializeSlider()})}},{key:"$onChanges",value:function $onChanges(e){e.options.isFirstChange()||e&&e.options.currentValue&&(this.options=_.clone(this.options),this.$element&&this.updateSlider())}},{key:"updateSlider",value:function updateSlider(){var e=this.options.minCurrent,t=this.options.maxCurrent;!e&&!t||e==t?(this.disableSlider(),this.hasMinMax=!1):(this.hasMinMax=!0,this.enableSlider(),this.$element.noUiSlider.updateOptions({start:[e,t],range:{min:e,max:t}}))}},{key:"enableSlider",value:function enableSlider(){$(this.$element).find(".noUi-handle-upper").show()}},{key:"disableSlider",value:function disableSlider(){$(this.$element).find(".noUi-handle-upper").hide()}},{key:"initializeSlider",value:function initializeSlider(){var t=this;this.hasMinMax=!0,this.$element=document.getElementById("range-slider-"+this.id);var e=this.options.minCurrent,i=this.options.maxCurrent;r.default.create(this.$element,{start:[e||0,i||1],connect:!0,density:1,step:1,range:{min:e||0,max:i||1},format:{to:function to(e){return parseInt(e)},from:function from(e){return parseInt(e)}}}),!e&&!i||e==i?(this.disableSlider(),this.hasMinMax=!1):this.hasMinMax=!0,this.$element.noUiSlider.on("change",function(e){t.onChange({values:e})}),this.$element.noUiSlider.on("update",function(e){t.options.minCurrent=e[0],t.options.maxCurrent=e[1],t.$timeout()})}}]),ComponentController);function ComponentController(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController),this.$timeout=e}a.$inject=["$timeout"];var o={controller:a,bindings:{options:"<",type:"@",id:"@",title:"@",onChange:"&"},templateUrl:"/app/hybrid-app/src/app-legacy/components/filters/nycgoFilterRangeSlider.html"};t.default=o},237:function(e,t,i){"use strict";function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}(ComponentController,[{key:"$postLink",value:function $postLink(){this.initTypeAhead()}},{key:"initTypeAhead",value:function initTypeAhead(){function lz(t){return function(i,e){e(_.filter(t,function(e){var t=!1;return i=i.toLowerCase(),null!=e.title&&(t=0<=e.title.toLowerCase().indexOf(i)),t}).map(function(e){return e.title}))}}var i=this;$(".typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"restaurants",source:lz(this.items),templates:{header:'<h3 class="typeahead-group">Neighborhoods</h3>'}},{name:"restaurants",source:lz(this.items),templates:{header:'<h3 class="typeahead-group">Google places</h3>'}}).bind("typeahead:select",function(e,t){i.handleTextSearch({text:t})})}}]),ComponentController);function ComponentController(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComponentController)}n.$inject=[];var r={controller:n,bindings:{items:"<",placeholder:"@",handleTextSearch:"&"},templateUrl:"/app/hybrid-app/src/app-legacy/restaurant-week-upgrade/components/nycgoTypeAhead.html"};t.default=r},24:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenTableComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(31);var s=(n(OpenTableComponent,[{key:"onSubmit",value:function onSubmit(){this.submit.emit(this.reservationForm.value)}},{key:"closeModal",value:function closeModal(){this.close.emit()}},{key:"closeAll",value:function closeAll(){this.closeModal(),this.closeEntry.emit()}},{key:"ngOnDestroy",value:function ngOnDestroy(){this.submitted=!1}},{key:"firstName",get:function get(){return this.reservationForm.get("firstName")}},{key:"lastName",get:function get(){return this.reservationForm.get("lastName")}},{key:"emailAddress",get:function get(){return this.reservationForm.get("emailAddress")}},{key:"phoneNumber",get:function get(){return this.reservationForm.get("phoneNumber")}}]),OpenTableComponent);function OpenTableComponent(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OpenTableComponent),this.formBuilder=e,this.reservationForm=this.formBuilder.group({firstName:["",o.Validators.required],lastName:["",o.Validators.required],emailAddress:["",o.Validators.compose([o.Validators.required,o.Validators.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])],phoneNumber:["",o.Validators.compose([o.Validators.required,o.Validators.minLength(10),o.Validators.maxLength(10),o.Validators.pattern(/^-?([0-9]\d*)?$/)])],specialRequest:[""],subscribeNewsletter:[!1]}),this.validated=!1,this.close=new a.EventEmitter,this.submit=new a.EventEmitter,this.closeEntry=new a.EventEmitter,this.validationMessages={firstName:[{type:"required",message:"First name is required"}],lastName:[{type:"required",message:"Last name is required"}],emailAddress:[{type:"required",message:"Email is required"},{type:"pattern",message:"Enter a valid email"}],phoneNumber:[{type:"required",message:"Phone number is required"},{type:"minlength",message:"Enter a valid phone number"},{type:"maxLength",message:"Enter a valid phone number"},{type:"pattern",message:"Only numbers allowed"}]}}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],s.prototype,"confirmation",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],s.prototype,"state",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Boolean)],s.prototype,"submitted",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Boolean)],s.prototype,"processing",void 0),(0,r.__decorate)([(0,a.Output)(),(0,r.__metadata)("design:type",a.EventEmitter)],s.prototype,"close",void 0),(0,r.__decorate)([(0,a.Output)(),(0,r.__metadata)("design:type",a.EventEmitter)],s.prototype,"submit",void 0),(0,r.__decorate)([(0,a.Output)(),(0,r.__metadata)("design:type",a.EventEmitter)],s.prototype,"closeEntry",void 0),t.OpenTableComponent=s=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-opentable-modal",templateUrl:"/app/hybrid-app/src/app/components/opentable-modal.component.html"}),(0,r.__metadata)("design:paramtypes",[o.FormBuilder])],s),t.OpenTableComponent=s},25:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(4),s=i(6),l=i(3);var c=(n(PaginationComponent,[{key:"ngOnChanges",value:function ngOnChanges(e){e&&this.updatePager()}},{key:"updatePager",value:function updatePager(){var i=this,e=this.total>this.pageSize?Math.ceil(this.total/this.pageSize):1;this.state={pageTotal:e,slots:[1,2,3,4,5,6,7]},this.transform={1:function _(){return 1},2:function _(e){return e<5?2:"..."},3:function _(e,t){return e<5?3:e<t-3?e-1:e===t-3?t-4:null},4:function _(e,t){return e<5?3<=e?4:null:e<t-3?e:e<=t-2?t-3:null},5:function _(e,t){return e<5?4<=e?5:null:e<t-3?e+1:t-2},6:function _(e,t){return e<t-3?"...":t-1},7:function _(e,t){return t}},this.listItems=this.state.slots.map(function(e,t){return i.state.pageTotal<=6?t+1<=i.state.pageTotal?t+1:null:i.transform[e](i.pageNumber,i.state.pageTotal)}).filter(function(e){return null!==e})}},{key:"update",value:function update(e,t){var i={eventInfoData:{eventName:"Content Interaction",interaction:"Pagination | "+t+" | "+e}};(0,o.trackEvent)(i),0<this.pageChange.observers.length?this.pageChange.emit({page:e}):this.store.dispatch({type:s.CHANGE_PAGE,pageNumber:e})}},{key:"generateAriaLabel",value:function generateAriaLabel(e,t){return"..."===e?"Pagination - See More Pages":"Pagination - "+e+" of "+t}}]),PaginationComponent);function PaginationComponent(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PaginationComponent),this.store=e,this.pageChange=new a.EventEmitter}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Number)],c.prototype,"pageNumber",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Number)],c.prototype,"pageSize",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Number)],c.prototype,"total",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],c.prototype,"state",void 0),(0,r.__decorate)([(0,a.Output)(),(0,r.__metadata)("design:type",a.EventEmitter)],c.prototype,"pageChange",void 0),t.PaginationComponent=c=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-pagination",templateUrl:"/app/hybrid-app/src/app/components/shared/pagination.component.html"}),(0,r.__metadata)("design:paramtypes",[l.Store])],c),t.PaginationComponent=c},26:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardSimpleComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(3),s=i(6),l=i(5),c=i(2),u=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(13));var d=(n(CardSimpleComponent,[{key:"ngOnInit",value:function ngOnInit(){var i=this,e=(0,c.includes)(this.class,"card-poster")&&this.item.logoPath,t="bww"===this.state.program&&this.item.logoPath,n=(e||t?this.item.logoPath:this.item.imagePath)||(0,l.placeHolderImage)(),r=["https://images.nycgo.com/image/fetch/q_65,c_fill,f_auto,",e?"w_200,h_285/":"w_300,h_200/"].join(""),a=(0,c.startsWith)(document.location.hostname,"local-upgrade")?"https://dev-upgrade.nycgo.com":document.location.protocol+"//"+document.location.hostname;this.cardImage=(0,c.startsWith)(n,"https://images.nycgo")?n:r+((0,c.startsWith)(n,"https://")?"":a)+n,this.item.ecom={},this.item.ecommerce&&this.item.ecommerce[0]&&(this.item.ecom.hasBroadway=this.item.ecommerce[0].partnerId&&"Broadway"===this.item.primaryCategoryName,this.item.ecom.hasOpenTable=this.item.ecommerce[0].partnerId&&"OpenTable"===this.item.ecommerce[0].partnerName,this.item.ecom.hasBooking=this.item.ecommerce[0].partnerId&&"Booking.com"===this.item.ecommerce[0].partnerName,this.item.ecom.hasUrl=!!this.item.ecommerce[0].url),this.hasEcom=this.item.ecom.hasUrl||this.item.ecom.hasBroadway||this.item.ecom.hasOpenTable||this.item.ecom.hasBooking,"Staten Island Ferry"===this.item.displayTitle&&console.log(this),this.hasBtns=this.state.openContentFrame||this.state.hasBigButton,this.hasIcon=!!(0,c.includes)(Object.keys(l.cardIconMap),this.item.channelShortName),this.hasIcon&&(this.item.icon=l.cardIconMap[this.item.channelShortName]),this.state.cardFeatures&&(this.hasFeatures=!0,(0,c.forEach)(this.state.cardFeatures,function(e,t){!0===e&&("highlightFeatured"===t&&i.item.isFeatured&&(i.item.flagLabel={featured:!0}),"summary"===t&&(i.item.cardDeck=i.item.summary||i.item.description))})),"calendar_events"===this.item.channelShortName&&this.item.nextOccurrence&&(this.item.flagLabel={month:u.unix(this.item.nextOccurrence).format("MMM"),day:u.unix(this.item.nextOccurrence).format("D")})}},{key:"kebabCase",value:function kebabCase(){this.kebabCategory=this.item.kebabCategory||(0,c.kebabCase)(this.item.primaryCategoryName),this.kebabChannel=this.item.kebabChannel||(0,c.kebabCase)(this.item.channelShortName)}},{key:"trackEcom",value:function trackEcom(e){if(this.state.moduleTracking){var t={eventInfoData:{eventName:"Card Ecommerce",interaction:this.state.moduleTracking},productInfoData:{name:e.displayTitle,category:e.primaryCategoryName,type:e.channelName,location:e.primaryLocationName}};(0,l.trackEvent)(t)}}},{key:"eyebrowLabel",value:function eyebrowLabel(){if(this.item.isSponsored)this.item.eyebrowLabel="Sponsored Content";else{var eyebrowLabel=[this.item.primaryCategoryName,this.item.channelName];this.item.primaryLocationName&&("venue"===this.item.channelShortName&&(eyebrowLabel=[this.item.primaryLocationName]),"tour"!==this.item.channelShortName&&"itinerary"!==this.item.channelShortName||eyebrowLabel[0]!==eyebrowLabel[1]||(eyebrowLabel[0]=this.item.primaryLocationName)),eyebrowLabel[1]="Calendar: Events"===eyebrowLabel[1]?"Events":"Page"===eyebrowLabel[1]?"":eyebrowLabel[1],eyebrowLabel[0]===eyebrowLabel[1]&&(eyebrowLabel=[eyebrowLabel[0]+' <span class="sr-only">'+eyebrowLabel[1]+"</span>"]),this.item.eyebrowLabel=this.item.eyebrowLabel||(0,c.compact)([eyebrowLabel[0],1<(0,c.compact)(eyebrowLabel).length?"&middot;":null,eyebrowLabel[1]]).join(" ")}return!0!==this.state.isEyebrowDisabled}},{key:"primaryAction",value:function primaryAction(e){this.state.openContentFrame&&this.store.dispatch({type:s.UPDATE_ACTIVE,payload:{interaction:e,item:this.item}})}},{key:"createStars",value:function createStars(e){return e%1!=0&&(this.item.halfStar=!0),e?new Array(Math.floor(e)):[]}},{key:"genEcomBtnText",value:function genEcomBtnText(){var e=this.item.ecommerce&&this.item.ecommerce[0],t="Buy Tickets";return e&&("venue"===this.item.channelShortName&&"Hotels"===this.item.primaryCategoryName&&(t="Book Now"),"OpenTable"===e.partnerName&&e.partnerId&&(t="Find a Table")),!!e&&(e.buttonText||t)}},{key:"genEcomUrl",value:function genEcomUrl(){var e=this.item.ecommerce&&this.item.ecommerce[0],t=e.url||null;if(e&&this.item.ecom)return this.item.ecom.hasBooking&&(t=(0,c.endsWith)(e.url,"?aid="+e.partnerId)?e.url:e.url+"?aid="+e.partnerId),this.item.ecom.hasOpenTable&&(t="https://www.opentable.com/single.aspx?rid="+e.partnerId+"&m=8&t=single&ref=7057"),this.item.ecom.hasBroadway&&(t=e.url||"https://tickets.nycgo.com/event/"+e.partnerId),!!this.item.ecom&&t}}]),CardSimpleComponent);function CardSimpleComponent(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CardSimpleComponent),this.store=e,this.hasFeatures=!1}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],d.prototype,"item",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],d.prototype,"state",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],d.prototype,"class",void 0),t.CardSimpleComponent=d=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-simple-card",templateUrl:"/app/hybrid-app/src/app/components/cards/card-simple.component.html"}),(0,r.__metadata)("design:paramtypes",[o.Store])],d),t.CardSimpleComponent=d},27:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardTileComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(3);var s=(n(CardTileComponent,[{key:"ngOnInit",value:function ngOnInit(){this.item.activityMap=this.item.isActivityMap?this.item.displayTitle+" | Slot "+this.item.index:null}}]),CardTileComponent);function CardTileComponent(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CardTileComponent),this.store=e}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],s.prototype,"item",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],s.prototype,"state",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],s.prototype,"class",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],s.prototype,"shorty",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],s.prototype,"noSlide",void 0),t.CardTileComponent=s=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-tile-card",templateUrl:"/app/hybrid-app/src/app/components/cards/card-tile.component.html"}),(0,r.__metadata)("design:paramtypes",[o.Store])],s),t.CardTileComponent=s},28:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FavButtonComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(3),s=i(8),l=i(2),c=i(11);var u=(n(FavButtonComponent,[{key:"ngOnInit",value:function ngOnInit(){var i=this;!this.item&&(0,l.get)(window,"nycgoSettings.entryId")&&(this.item={id:(0,l.get)(window,"nycgoSettings.entryId")},this.buttonType="primary"),this.favoriteState$=this.store.select("favoriteStore"),this.favoriteState$.subscribe(function(e){var t=e.favorites;i.favorites=t,i.isFavorite=!(!i.item||!(0,l.find)(i.favorites,{id:i.item.id}))})}},{key:"updateFav",value:function updateFav(){this.isFavorite?this.processorService.removeFavorite({entryId:this.item.id,btnType:this.buttonType}):this.processorService.addFavorite({entryId:this.item.id,list:this.program,btnType:this.buttonType})}}]),FavButtonComponent);function FavButtonComponent(e,t,i){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FavButtonComponent),this.store=e,this.apiService=t,this.processorService=i,this.favorites=[]}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],u.prototype,"item",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],u.prototype,"buttonType",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],u.prototype,"program",void 0),t.FavButtonComponent=u=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-favorite-button",templateUrl:"/app/hybrid-app/projects/favorites/src/app/button.component.html"}),(0,r.__metadata)("design:paramtypes",[o.Store,s.ApiService,c.ProcessorService])],u),t.FavButtonComponent=u},34:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleSelectComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(2),s=i(6),l=i(3);var c=(n(SingleSelectComponent,[{key:"change",value:function change(e,t){this.handleSortOrder.observers&&this.handleSortOrder.observers.length?this.handleSortOrder.emit(t):"sort"===e?this.store.dispatch({type:s.UPDATE_SORT,sortBy:t.value,order:t.order,selectedSort:t.name}):this.store.dispatch({type:s.UPDATE_FILTERS,payload:function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},e,t)})}}]),SingleSelectComponent);function SingleSelectComponent(e){var i=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SingleSelectComponent),this.store=e,this.handleSortOrder=new a.EventEmitter,this.filterState$=e.select("filterStore"),this.filterState$.subscribe(function(t){if("sort"===i.type){var e=(0,o.find)(t.sort,{isSelected:!0});e&&(i.selected=e.name)}else(0,o.forEach)(i.items,function(e){i.selected=(0,o.find)(t.filters[i.type],{id:e.id})||i.items[0].name})})}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],c.prototype,"label",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],c.prototype,"type",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],c.prototype,"items",void 0),(0,r.__decorate)([(0,a.Output)(),(0,r.__metadata)("design:type",a.EventEmitter)],c.prototype,"handleSortOrder",void 0),t.SingleSelectComponent=c=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-single-select",templateUrl:"/app/hybrid-app/src/app/components/grid/single-select.component.html"}),(0,r.__metadata)("design:paramtypes",[l.Store])],c),t.SingleSelectComponent=c},35:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSelectComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(2),s=i(5),l=i(6),c=i(3);var u=(n(MultiSelectComponent,[{key:"ngOnInit",value:function ngOnInit(){var t=this;this.filterState$.subscribe(function(e){t.items=(0,o.clone)(e.filters[t.type]),t.filterDetails=e.filterDetails&&(0,o.clone)((0,o.find)(e.filterDetails,function(e){return e.name===t.type}))||null}),this.filteredItems="location"===this.type?this.groupNeighborhoods(this.items.borough,this.items.neighborhood):this.items,"collection"===this.display&&(0,o.forEach)(this.items,function(e){e.icon=(0,s.getIcon)(e.name)})}},{key:"change",value:function change(e,t){this.store.dispatch({type:l.UPDATE_FILTERS,exclusive:!t.isSelected&&(0,o.get)(this.filterDetails,"exclusive"),collection:(0,o.get)(this.filterDetails,"collection"),payload:function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},e,t)});var i={eventInfoData:"Browse Refinement",pageInfoData:{refinement:this.title+" | "+t.name}};(0,s.trackEvent)(i)}},{key:"groupNeighborhoods",value:function groupNeighborhoods(e,r){return e.reduce(function(e,t){var i=t.id,n=t.name;return e.some(function(e){return e.id===i})||e.push({id:i,name:n,neighborhoods:r.filter(function(e){return e.boroughId===i})}),e},[])}},{key:"filterOptions",value:function filterOptions(){var t=this;if(this.filterText)if("location"===this.type){var e=this.groupNeighborhoods(this.items.borough,this.items.neighborhood);(0,o.forEach)(e,function(e){(0,o.includes)((0,o.lowerCase)(e.name),(0,o.lowerCase)(t.filterText))||(e.neighborhoods=(0,o.filter)(e.neighborhoods,function(e){return(0,o.includes)((0,o.lowerCase)(e.name),(0,o.lowerCase)(t.filterText))}))}),this.filteredItems=e}else{var i=(0,o.filter)(this.items,function(e){return(0,o.includes)((0,o.lowerCase)(e.name),(0,o.lowerCase)(t.filterText))});this.filteredItems=i}}}]),MultiSelectComponent);function MultiSelectComponent(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MultiSelectComponent),this.store=e,this.filterState$=e.select("filterStore")}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],u.prototype,"title",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],u.prototype,"type",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],u.prototype,"display",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Boolean)],u.prototype,"includeSearch",void 0),t.MultiSelectComponent=u=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-multi-select",templateUrl:"/app/hybrid-app/src/app/components/grid/multi-select.component.html"}),(0,r.__metadata)("design:paramtypes",[c.Store])],u),t.MultiSelectComponent=u},36:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BadgesComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(6),s=i(3),l=i(2);var c=(n(BadgesComponent,[{key:"ngOnInit",value:function ngOnInit(){var i=this;this.filterState$.subscribe(function(e){e?(i.isFiltered=e.isFiltered,(0,l.forEach)((0,l.clone)(e.filters),function(e,t){"location"!==t&&(i.items[t]=e)})):(i.isFiltered=!1,i.inCollection=!1)})}},{key:"notExcluded",value:function notExcluded(e){return!!this.state.excludeFilterBadges&&!(0,l.includes)(this.state.excludeFilterBadges,e)}},{key:"reset",value:function reset(){this.store.dispatch({type:o.RESET_FILTERS})}},{key:"clickBadge",value:function clickBadge(e,t){"searchText"===e?this.store.dispatch({type:o.UPDATE_FILTERS,searchTerms:!1}):this.store.dispatch({type:o.UPDATE_FILTERS,payload:function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},e,t)}),console.log(this.items)}}]),BadgesComponent);function BadgesComponent(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BadgesComponent),this.store=e,this.items=[],this.inCollection=!1,this.filterState$=e.select("filterStore")}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",Object)],c.prototype,"state",void 0),t.BadgesComponent=c=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-badges",templateUrl:"/app/hybrid-app/src/app/components/grid/badges.component.html"}),(0,r.__metadata)("design:paramtypes",[s.Store])],c),t.BadgesComponent=c},37:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextSearchComponent=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(190),s=i(40),l=i(6),c=i(3),u=i(5);var d=(n(TextSearchComponent,[{key:"ngOnInit",value:function ngOnInit(){this.placeholder=this.placeholder||"search"}},{key:"onChange",value:function onChange(e){this.textChanged.next(e)}},{key:"handleKeyPress",value:function handleKeyPress(e){"Enter"===e.key&&e.preventDefault()}},{key:"clearInput",value:function clearInput(){this.handleTextSearch.observers&&this.handleTextSearch.observers.length?(this.handleTextSearch.emit({text:null}),this.text=null):this.store.dispatch({type:l.UPDATE_FILTERS,searchTerms:!1})}}]),TextSearchComponent);function TextSearchComponent(e){var i=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TextSearchComponent),this.store=e,this.handleTextSearch=new a.EventEmitter,this.textChanged=new o.Subject,this.textChanged.pipe((0,s.debounceTime)(500),(0,s.distinctUntilChanged)()).subscribe(function(e){if(i.handleTextSearch.observers&&i.handleTextSearch.observers.length)i.handleTextSearch.emit({text:e});else{i.store.dispatch({type:l.UPDATE_FILTERS,searchTerms:e});var t={eventInfoData:{eventName:"Browse Search"},pageInfoData:{onsiteSearchTerm:e}};(0,u.trackEvent)(t)}}),this.filterState$=e.select("filterStore"),this.filterState$.subscribe(function(e){e&&(i.text=e.filters.searchText[0].searchTerms)})}(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],d.prototype,"placeholder",void 0),(0,r.__decorate)([(0,a.Input)(),(0,r.__metadata)("design:type",String)],d.prototype,"title",void 0),(0,r.__decorate)([(0,a.Output)(),(0,r.__metadata)("design:type",a.EventEmitter)],d.prototype,"handleTextSearch",void 0),t.TextSearchComponent=d=(0,r.__decorate)([(0,a.Component)({selector:"nycgo-text-search",templateUrl:"/app/hybrid-app/src/app/components/grid/text-search.component.html"}),(0,r.__metadata)("design:paramtypes",[c.Store])],d),t.TextSearchComponent=d},38:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(9));i(29);var r=i(15),a=i(34),o=i(35),s=i(36),l=i(37);var c="nycgoCommonGrid";n.module(c,[]).directive("nycgoSingleSelect",(0,r.downgradeComponent)({component:a.SingleSelectComponent})).directive("nycgoMultiSelect",(0,r.downgradeComponent)({component:o.MultiSelectComponent})).directive("nycgoBadges",(0,r.downgradeComponent)({component:s.BadgesComponent})).directive("nycgoTextSearch",(0,r.downgradeComponent)({component:l.TextSearchComponent})),t.default=c},39:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedModule=void 0;var n=i(0),r=i(1),a=i(7),o=i(31),s=i(23),l=i(24),c=i(25),u=i(41),d=i(12);var p=function SharedModule(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SharedModule)};t.SharedModule=p=(0,n.__decorate)([(0,r.NgModule)({declarations:[s.LoadingComponent,l.OpenTableComponent,c.PaginationComponent],entryComponents:[s.LoadingComponent,l.OpenTableComponent,c.PaginationComponent,d.CollectionsBlockComponent],imports:[a.BrowserModule,o.ReactiveFormsModule,u.CollectionsModule],exports:[s.LoadingComponent,l.OpenTableComponent,c.PaginationComponent]})],p),t.SharedModule=p},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.slickMobleFriendly=t.isInViewport=t.applyRangeFilter=t.extractLookupInfoIds=t.applyAlphaFilter=t.generateAlphabetFilter=t.getPrimaryCategory=t.trackEvent=t.openTableLink=t.rwDiningSort=t.transformMeals=t.applyMultiSelect=t.getCloudImage=t.transformGalleryImages=t.resetFilters=t.filterCount=t.isFiltered=t.groupNeighborhoods=t.selectedItems=t.handleSingleSelect=t.filterByText=t.filterByLookup=t.createPagerData=t.paginate=t.matchMedia=t.anchorScrollBrowse=t.toggleBodyScroll=t.dotdotdot=t.detectChrome=t.randomizeItems=t.isSpider=t.isTablet=t.isMobile=t.isiPhone=t.cardIconMap=t.gravityValues=t.boroughMap=void 0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.genDateLabels=function genDateLabels(e){if(e.startDate){var t=function formatDateLabel(e){return(e=e.split(" "))[0]+" "+e[1]+(a?", "+e[2]:"")},i=(new Date).getFullYear(),n=moment.unix(e.startDate).format("MMM D Y"),r=e.endDate?moment.unix(e.endDate).format("MMM D Y"):null,a=n&&r?n.split(" ")[2]!=i||r.split(" ")[2]!=i:null;if(e.endDate||e.isOngoing){var o=t(n);e.startDate!=e.endDate&&n!=r&&(o=e.isOngoing?"Ongoing":(1e3*e.startDate<Date.now()?"Now":t(n))+" &ndash; "+t(r)),e.detailsLabel=['<i class="icon icon-sm icon-clock-o"></i> '+o]}e.nextOccurrence&&(e.flagLabel={month:moment.unix(e.nextOccurrence).format("MMM"),day:moment.unix(e.nextOccurrence).format("D")})}return e},t.genEcom=function genEcom(i){var e=i.ecommerce&&i.ecommerce[0],t=i.channelShortName?i.channelShortName.toLowerCase():null;!t&&i.channelId&&(t=_.find({1:"articles",4:"venue",6:"video",7:"gallery",9:"neighborhood",10:"borough",15:"itinerary",16:"page",17:"tour",22:"calendar_events",71:"listicle"},function(e,t){return t==i.channelId}));i.primaryCatIds=i.primaryCatIds||(i.primaryCategory?i.primaryCategory.ids:null);var n="calendar_events"==t&&(i.primaryCatIds&&0<i.primaryCatIds.split(",").length&&_.includes(i.primaryCatIds.split(","),"65")||"Broadway"==i.primaryCategoryName),r="venue"==t&&(i.primaryCatIds&&0<i.primaryCatIds.split(",").length&&_.includes(i.primaryCatIds.split(","),"3")||"Hotel"==i.primaryCategoryName),a="Buy Tickets";"tour"==t&&(a="Check Availability");r&&(a="Book Now");i.openTableId&&(a="Find a Table");e&&i.ecommerce[0].buttonText&&(a=i.ecommerce[0].buttonText);var o=e?i.ecommerce[0].url:i.url&&n?i.url+"#ecommerce":null;i.openTableId&&(o="https://www.opentable.com/single.aspx?rid="+i.openTableId+"&m=8&t=single&ref=7057");var s=t?"TC-"+(n?"broadway":r?"hotel":t):null;i.openTableId&&(s="TC-openTable");return{url:o,text:a,dx:s}},t.viewCardMapping=function viewCardMapping(){return{grid:"card-deck",list:"card-list",carousel:"card-deck","carousel-large":"card-deck","carousel-inline":"card-deck","card-simple":"card-simple","card-tile":"card-tile"}},t.isHomePage=isHomePage,t.truncate=function truncate(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".card-copy p",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50;window.setTimeout(function(){(0,r.default)(e,t)},250)},t.randomImage=function randomImage(){return _.sample(["//www.fillmurray.com","//www.stevensegallery.com","//www.placecage.com","//morganfillman.space","//placekitten.com","//placebear.com"])+"/400/320"},t.buildLink=function buildLink(e,t){if(/^http/.test(t)||/^\//.test(t))return t;var i=_.find([{url:"/articles/",title:"article"},{url:"/photo-galleries/",title:"gallery"},{url:"/itineraries/",title:"itinerary"},{url:"/videos/",title:"video"},{url:"/tours/",title:"tour"},{url:"/",title:"page"},{url:"/events/",title:"calendar_events"},{url:"/neighborhoods/",title:"neighborhood"},{url:"/venues/",title:"venue"},{url:"/shopping/",title:"shopping"},{url:"/listicles/",title:"listicle"}],{title:e});return void 0!==i?i.url+t:t},t.placeHolderImage=placeHolderImage,t.isSmTab=function isSmTab(){return window.matchMedia("(min-width: 768px) and (max-width: 992px)").matches};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(198));function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function helpers(r,l,i,a,e){function mG(e){try{var t=window[e],i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(e){return!1}}function qG(e,t,i){var n=r[e]?r[e].split(","):[];return t.map(function(e){return i?0<=i.indexOf(e.boroughId)&&(e.isSelected=!0):0<=n.indexOf(e.urlTitle)&&(e.isSelected=!0),e})}var c=function updateWebStore(e,t,i){mG("localStorage")?setTimeout(function(){o(t)?localStorage.setItem(i,JSON.stringify(e)):localStorage.removeItem(i)},0):console.log("Sorry, your browser does not support Web Storage")},n=function handleMultiSelect(t,e){return e.map(function(e){return e.name!=t&&e.id!=t||(e.isSelected=!e.isSelected,e.selected=e.isSelected),e})},o=function checkParams(e){var t=_.filter(e,function(e){return!!r[e]||"venue"==e});return!_.isEmpty(t)},u=function extractLookupInfoIds(i,e){var n=null;return void 0!==e.lookupInfo&&_.forEach(e.lookupInfo,function(e,t){if(e.lookupName==i)return n=e.ids,!1}),n};return{setSelected:qG,handleLocations:function handleLocations(e){if(!r.neighborhoods&&r.boroughs){var t=r.boroughs?r.boroughs.split(","):[];return _.filter(e,function(e){return 0<=t.indexOf(e.urlTitle)}).map(function(e){return e.id})}},handleMultiSelect:n,handleSingleSelect:function handleSingleSelect(e,t){return _.forEach(t,function(e){e.isSelected=!1,e.selected=!1}),n(e,t)},handleBoroughSelect:function handleBoroughSelect(e,t,i){return e.map(function(e){return e.borough==t&&(e.isSelected=i,e.selected=e.isSelected),e})},updateUrl:function updateUrl(e,n,t,i,r){var a={},o={};e.venue=i&&r?[{isSelected:!0,urlTitle:i,id:r}]:[],_.forIn(e,function(e,t){if(_.isArray(e)){var i=e.filter(function(e){return e.isSelected}).map(function(e){return e.urlTitle}).join(",");0<=n.indexOf(t)&&(o=_defineProperty({},t,i))}a=_.extend(a,o)}),a.id=r,i?l.go("home.entryView",a,{cache:!1}):l.go(l.current,a,{cache:!1}),t&&c(e,n,t)},applyMultiSelect:function applyMultiSelect(e,t,r,a,o){var i=_.clone(e);if(!_.find(t,{isSelected:!0}))return i;var s=_.filter(t,{isSelected:!0}).map(function(e){return e.id});return i.filter(function(e){if(o[r]){var t=o[r].dataFieldKey;return _.isArray(e[t])?a?_.intersection(s,e[t]).length==checked.length:0<_.intersection(s,e[t]).length:0<=s.indexOf(e[t])}var i=u(r,e),n=i?i.split(","):[];return a?_.intersection(s,n).length==checked.length:0<_.intersection(s,n).length})},applyTextSearch:function applyTextSearch(e,o){if(!e)return null;if(!o)return e;var s=o.toLowerCase();return e.filter(function(e){var t=!1,i=!1,n=!1,r=!1,a=!1;return null!=e.displayTitle&&(t=0<=e.displayTitle.indexOf(o)||0<=e.displayTitle.indexOf(s)),null!=e.sortTitle&&(i=0<=e.sortTitle.indexOf(o)||0<=e.sortTitle.indexOf(s)),null!=e.titleNormalized&&(n=0<=e.titleNormalized.indexOf(o)||0<=e.titleNormalizedLC.indexOf(o)||0<=e.titleNormalizedLC.indexOf(s)),null!=e.url&&(r=0<=e.url.indexOf(s)),null!=e.name&&(a=0<=e.name.toLowerCase().indexOf(s)),t||i||r||n||a})},placeHolderImage:function placeHolderImage(){return"/images/uploads/default-images/nycgo-default-image-"+_.padStart(_.random(3,7),2,"0")+"_card.jpg"},createFilters:function createFilters(e){var t={},i=e,n=Object.keys(e);return _.forEach(n,function(e){t[e]=_.sortBy(i[e],"name"),t[e]=qG(String(e),t[e])}),t},applyRangeFilter:function applyRangeFilter(e,t,i){var n=t.minCurrent,r=t.maxCurrent;return n==t.minInitial&&r==t.maxInitial?e:e.filter(function(e){return e[i]>=n&&e[i]<=r})},calcDistance:function calcDistance(e,t,i,n){var r=Math.PI*e/180,a=Math.PI*i/180,o=t-n,s=Math.PI*o/180,l=Math.sin(r)*Math.sin(a)+Math.cos(r)*Math.cos(a)*Math.cos(s);return l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515},convertUTCtoDate:function convertUTCtoDate(e){var t=new Date(1e3*e);return{month:i("date")(t,"MMM"),day:t.getDate(),year:t.getFullYear()}},matchMedia:function matchMedia(){var e={xs:window.matchMedia("(max-width: 480px)").matches,sm:window.matchMedia("(min-width: 481px) and (max-width: 767px)").matches,md:window.matchMedia("(min-width: 767px) and (max-width: 991px)").matches,lg:window.matchMedia("(min-width: 992px)").matches};return _.findKey(e,function(e){return 1==e})},resetFilters:function resetFilters(e){return _.forEach(e,function(e,t){_.isArray(e)&&_.forEach(e,function(e){e.isSelected=!1,e.selected=!1})}),e},checkParams:o,geoFindMe:function geoFindMe(){if(!navigator.geolocation)return!1;return navigator.geolocation.getCurrentPosition(function success(e){return{latitude:e.coords.latitude,longitude:e.coords.longitude}},function error(){console.log("Unable to retrieve your location")})},extractLookupInfoIds:u,getFilterDisplayNameFromLookupName:function getFilterDisplayNameFromLookupName(e){return 0<=["attractionType","hotelType","museumType","nightlifeType","performanceType","serviceType","shoppingType","showType","tourType"].indexOf(e)?"Types":"amenity"==e?"Amenities":"cuisine"==e?"Cuisines":"dietaryNeed"==e?"Dietary Needs":"genre"==e?"Genres":"hotelChain"==e?"Hotel Chains":"service"==e?"Services":e},sortData:function sortData(e,t,i,n,r){if(0==Boolean(n))return e;var a=_.filter(t,function(e){return e.id==i}).map(function(e){return e.value});if(e=_.map(e,function(e){return e[a]||(e[a]=""),e}),6==i||7==i){var o=r||"minPrice";e=_.filter(e,function(e){return 0!=e[o]})}return _.orderBy(e,a,n)},resultsWithImagesFirst:function resultsWithImagesFirst(e){var i=null,t=e.reduce(function(e,t){return i=t.image,t.hasOwnProperty("logo")&&(i=t.logo),null!=i&&e.withImage.push(t),null==i&&e.noImage.push(t),e},{withImage:[],noImage:[]});return t=[].concat(_toConsumableArray(t.withImage),_toConsumableArray(t.withoutImage))},diningSort:function diningSort(e){var t=e.reduce(function(e,t){return t.imagePath?(t.ecommerce&&t.ecommerce[0]&&t.ecommerce[0].partnerId&&e.withImageId.push(t),t.ecommerce&&t.ecommerce[0]&&t.ecommerce[0].partnerId||e.withImageNoId.push(t)):(t.ecommerce&&t.ecommerce[0]&&t.ecommerce[0].partnerId&&e.noImageWithId.push(t),t.ecommerce&&t.ecommerce[0]&&t.ecommerce[0].partnerId||e.noImageNoId.push(t)),e},{withImageId:[],withImageNoId:[],noImageWithId:[],noImageNoId:[]});return t=[].concat(_toConsumableArray(t.withImageId),_toConsumableArray(t.withImageNoId),_toConsumableArray(t.noImageWithId),_toConsumableArray(t.noImageNoId))},toggleBodyScroll:function toggleBodyScroll(e){setTimeout(function(){e?$("body").removeClass("noscroll"):$("body").addClass("noscroll")},50)},updateWebStore:c,updateLocalStore:function updateLocalStore(e,t){var i=1<arguments.length&&void 0!==t?t:"nycgo-data";mG("localStorage")?localStorage.setItem(i,JSON.stringify(e)):console.log("Sorry, your browser does not support Web Storage")},isMobile:function isMobile(){return window.matchMedia("(max-width: 767px)").matches},isTablet:function isTablet(){return window.matchMedia("(min-width: 768px) and (max-width: 992px)").matches},paginate:function paginate(e,t,i){e.length;var n=(t-1)*i,r=t*i,a=e.slice(n,r),o=(t-1)*i+1;return a=_.map(a,function(e){return e.index=o,o++,e})},paginateByCardFormat:function paginateByCardFormat(e,t){var i="cardFormat",o=t;if(e.reduce(function(e,t){return e+t[i]},0)<=o)return{data:[e]};var s={init:function init(e){var t=this.setOrder(e);return{data:this.breakArray(t)}},count:function count(e){return e.reduce(function(e,t){return e+t[i]},0)},rowCheck:function rowCheck(e){return e.reduce(function(e,t,i,n){var r=s.count(t.slice(0,3)),a=s.count(t.slice(3));return n.length>i+1&&r!==a&&(e=!1),n.length===i+1&&(r<=3&&0===a&&(e=e),3===r&&a<=3&&(e=e),(3<r||3<a)&&(e=!1),o<r+a&&(e=!1)),e},!0)},setCheck:function setCheck(e){return s.count(e)%o==0},breakArray:function breakArray(e){var n=[],r=[];return e.forEach(function(e,t,i){(0<t&&s.setCheck(r)||s.count(r)>=o)&&(n.push(r),r=[]),r.push(e),i.length===t+1&&n.push(r)}),n},setOrder:function setOrder(e){return e.map(function(e,t,i){return e})}};return s.init(e)},trackProp:function trackProp(e,t,i,n){var r=void 0!==t?t:"";s.linkTrackVars=n,s[n]=i,s.tl(!0,e,r),a(function(){s[n]=null},250)}}}helpers.$inject=["$stateParams","$state","$filter","$timeout","$window"],t.default=helpers;var a=t.boroughMap={20:"Brooklyn",21:"The Bronx",22:"Queens",23:"Manhattan",24:"Staten Island"},o=t.gravityValues=["north_east","north","north_west","west","south_west","south","south_east","east","face"];t.cardIconMap={article:"icon-book",gallery:"icon-gallery",video:"icon-play",itinerary:"icon-list"};function isHomePage(e){return"/"==e.location.pathname}function placeHolderImage(){return"/images/uploads/default-images/nycgo-default-image-"+_.padStart(_.random(3,7),2,"0")+"_card.jpg"}isHomePage.$inject=["$window"];t.isiPhone=function isiPhone(){return/iPhone/.test(navigator.userAgent)&&!window.MSStream};var l=t.isMobile=function isMobile(){return window.matchMedia("(max-width: 767px)").matches},c=(t.isTablet=function isTablet(){return window.matchMedia("(min-width: 768px) and (max-width: 992px)").matches},t.isSpider=function isSpider(){return/bot|googlebot|crawler|spider|robot|crawling|prerender/i.test(navigator.userAgent)},t.randomizeItems=function randomizeItems(e){return e.sort(function(e,t){return.5-Math.random()})},t.detectChrome=function detectChrome(){return!!window.chrome&&!!window.chrome.webstore},t.dotdotdot=function dotdotdot(e,t){var i=t,n=$(0<arguments.length&&void 0!==e?e:".card-list-deck");i=i||l()?100:75,setTimeout(function(){n.dotdotdot({height:i,watch:"window"})},1e3)},t.toggleBodyScroll=function toggleBodyScroll(i){setTimeout(function(){var e=$("body"),t=function getScrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}()+"px";i?e.removeClass("noscroll").css("padding-right","0"):e.addClass("noscroll").css("padding-right",t)},50)},t.anchorScrollBrowse=function anchorScrollBrowse(e,t,i){var n=1<arguments.length&&void 0!==t?t:-25,r=i;e=e?$(e):$(".browse-in-page");var a={duration:600,offset:n,easing:"ease-in-out"};if(r){var o={container:$(r)};a=_.merge(a,o)}e.velocity("scroll",a)},t.matchMedia=function matchMedia(){var e={xs:window.matchMedia("(max-width: 480px)").matches,sm:window.matchMedia("(min-width: 481px) and (max-width: 767px)").matches,md:window.matchMedia("(min-width: 767px) and (max-width: 991px)").matches,lg:window.matchMedia("(min-width: 992px)").matches};return _.findKey(e,function(e){return 1==e})},t.paginate=function paginate(e,t,i){e.length;var n=(t-1)*i,r=t*i,a=e.slice(n,r),o=(t-1)*i+1;return a=_.map(a,function(e){if(e)return e.index=o,o++,e})},t.createPagerData=function createPagerData(e){e=parseInt(e);var t=[];return _.range(e).forEach(function(e){t.push({id:e+1,label:e+1,value:e+1})}),t},t.filterByLookup=function filterByLookup(e,t,i){var n=_.filter(t,function(e){return e.isSelected});if(!n)return e;var r=[];return _.forEach(n,function(e){r.push(e.id.toString())}),e.filter(function(e){var t=e?_.find(e.lookupInfo,function(e){return e.lookupName==i}):null;return(t?_.intersection(t.ids.split(","),r):[]).length})},t.filterByText=function filterByText(e,i){return i?_.filter(e,function(e,t){return _.includes(e.displayTitle.toLowerCase(),i.toLowerCase())}):e},t.handleSingleSelect=function handleSingleSelect(e){return _.forEach(e,function(e){e.isSelected=!1,e.selected=!1})},t.selectedItems=function selectedItems(e,t){return _.filter(t,{isSelected:!0}).map(function(e){return e.title||e.name}).join(" | ")},t.groupNeighborhoods=function groupNeighborhoods(e){var t=_.groupBy(e.neighborhood,"boroughId"),i=Object.keys(t).map(function(e){return _defineProperty({},a[e]||e,t[e])});t=Object.assign.apply(Object,[{}].concat(_toConsumableArray(i))),t=_(t).toPairs().sortBy(0).fromPairs().value();var n={};return Object.keys(t).sort(function(e,t){if("The Bronx"==t)return 1}).forEach(function(e){n[e]=t[e]}),n},t.isFiltered=function isFiltered(e,t){var i=1<arguments.length&&void 0!==t?t:[],n=!1;return _.each(e,function(e,t){if(_.isArray(e)&&!i.includes(t)&&(n=!!_.find(e,{isSelected:!0})))return!1;_.isString(e)&&!i.includes(t)&&(n=!!e)}),n},t.filterCount=function filterCount(e){var n=0;return _.forEach(e,function(e,t){var i=_.filter(e,{isSelected:!0});n+=i.length}),n},t.resetFilters=function resetFilters(e){return _.forEach(e,function(e,t){_.isArray(e)&&_.forEach(e,function(e){e.isSelected=!1,e.selected=!1})}),e},t.transformGalleryImages=function transformGalleryImages(e,i){return e=_.each(e,function(e){e.imageOrig=_.clone(e.imagePath);var t={image:e.imageOrig};return i&&o.includes(i)&&(t=_.merge(t,{gravity:i})),e.imageMobile=c(_.merge(t,{width:400})),e.imageThumb=c(_.merge(t,{width:120})),e.imageDesktop=c(_.merge(t,{width:840})),e})},t.getCloudImage=function getCloudImage(e){var t=e.image,i=e.width,n=e.height,r=e.transform,a=e.display,o=e.gravity,s=e.effect,l=e.gradient,c=e.quality,u=window.nycgoGlobalSettings.cloudinaryUrl,d=("local-upgrade.nycgo.com"==window.location.hostname?"https://dev-upgrade.nycgo.com":window.nycgoGlobalSettings.siteUrl)+(t||placeHolderImage()),p=u.default,h=void 0;if(o&&""!=o.trim()){var f=o.split(" ");_.includes(f,"top")&&(o="north"),_.includes(f,"bottom")&&(o="south"),_.includes(f,"left")&&(o="north"==o||"south"==o?o+"_east":"east"),_.includes(f,"right")&&(o="north"==o||"south"==o?o+"_west":"west")}if(a)h=u[a],l&&(h+="/e_gradient_fade,y_-0.7,b_"+l+"/"),s&&null!=(void 0===s?"undefined":g(s))&&!_.includes(t,"default-image")?h+="e_art:"+s+"/"+d:h+=d;else{var m=["q_65,c_fill,f_auto"];c&&(m=["q_"+c+",c_fill,f_auto"]),i&&m.push("w_"+i),n&&m.push("h_"+n),o&&""!=o.trim()&&m.push("g_"+o),m=m.join(","),h=p+(m=r||m)+"/"+d}return h});t.applyMultiSelect=function applyMultiSelect(e,t,n,r){var i=_.clone(e);if(!_.find(t,{isSelected:!0}))return i;var a=_.filter(t,{isSelected:!0}).map(function(e){return e.id});return i.filter(function(e){var t=!1;if(e&&_.isArray(e[n]))t=r?_.intersection(a,e[n]).length==checked.length:0<_.intersection(a,e[n]).length;else if(e&&!(t=0<=a.indexOf(e[n]))&&e.lookupInfo){var i=_.find(e.lookupInfo,{lookupName:n});t=!!i&&_.includes(i.ids,a)}return t})},t.transformMeals=function transformMeals(e){return e=(e=(e=(e=e.replace(/Mon-Fri Lunch/g,"Mon-Fri: Lunch - $26")).replace(/Mon-Fri Dinner/g,"Mon-Fri: Dinner - $42")).replace(/Sun Brunch\/Lunch/g,"Sun: Brunch/Lunch - $26")).replace(/Sun Dinner/g,"Sun: Dinner - $42")},t.rwDiningSort=function rwDiningSort(e){var t=e.reduce(function(e,t){return t.menu&&t.image&&e.menuImage.push(t),null==t.menu&&t.image&&e.noMenuImage.push(t),t.menu&&null==t.image&&e.menuNoImage.push(t),null==t.menu&&null==t.image&&e.noMenuNoImage.push(t),e},{menuImage:[],noMenuImage:[],menuNoImage:[],noMenuNoImage:[]});return t=[].concat(_toConsumableArray(t.menuImage),_toConsumableArray(t.noMenuImage),_toConsumableArray(t.menuNoImage),_toConsumableArray(t.noMenuNoImage))},t.openTableLink=function openTableLink(e,t){var i=new Date,n=new Date("2019/07/22"),r="&searchDateTime="+(i.getMonth()+1)+"/"+i.getDate()+"/"+i.getFullYear();r+="%207:00%20PM&party=2";var a="&d="+(i.getMonth()+1)+"/"+i.getDate()+"/"+i.getFullYear(),o="//www.opentable.com/single.aspx?rid="+e+"&ref="+t;return o+=n<=i?a+="%207:00%20PM&p=2":"&d=7/22/2019%207:00%20PM&p=2",o+=n<=i?r:"&searchDateTime=7/22/2019%207:00%20PM&party=2"},t.trackEvent=function trackEvent(e){var t=e.eventInfoData,i=e.pageInfoData,n=e.productInfoData;if(window.digitalData&&"movableInk"==t)window.digitalData.movable=t;else if(window.digitalData&&window.digitalData.page){var r=window.digitalData.page.pageInfo,a=window.digitalData.product.productInfo={};i&&_.forEach(i,function(e,t){r[t]=e}),n&&_.forEach(n,function(e,t){a[t]=e}),window.digitalData.event="string"==typeof t?[{eventInfo:{eventName:t}}]:[{eventInfo:t}]}},t.getPrimaryCategory=function getPrimaryCategory(e,t){var i=_.find(e.lookupInfo,_.matchesProperty("lookupName","primaryCategory"));return i&&i.ids?(i=i.ids.split(",")[0],_.find(t.primaryCategory,_.matchesProperty("id",i)).name):null},t.generateAlphabetFilter=function generateAlphabetFilter(){var e=[];for(i=0;i<26;i++){var t={id:i+1,isSelected:!1,name:_.upperCase((i+10).toString(36)),urlTitle:(i+10).toString(36),isDisabled:!1};e.push(t)}return e.push({id:314,isSelected:!1,name:"#",urlTitle:"%23",isDisabled:!1}),e},t.applyAlphaFilter=function applyAlphaFilter(e,t){var i=_.find(t,"isSelected");return i&&(e=_.filter(e,function(e){return 314==i.id?Number.isInteger(Number(e.sortTitle.charAt(0))):_.startsWith(e.sortTitle.toLowerCase(),i.name.toLowerCase())})),e},t.extractLookupInfoIds=function extractLookupInfoIds(i,e){var n=null;return void 0!==e.lookupInfo&&_.forEach(e.lookupInfo,function(e,t){if(e.lookupName==i)return n=e.ids,!1}),n},t.applyRangeFilter=function applyRangeFilter(e,t,i){var n=t.minCurrent,r=t.maxCurrent;return n||r?n==t.minInitial&&r==t.maxInitial?e:e.filter(function(e){return e[i]>=n&&e[i]<=r}):e},t.isInViewport=function isInViewport(e){var t={};t.top=$(window).scrollTop(),t.bottom=t.top+$(window).height();var i={};return i.top=e.offset().top,i.bottom=i.top+e.outerHeight(),i.top<=t.bottom&&i.bottom>=t.top},t.slickMobleFriendly=function slickMobleFriendly(e){$(e).slick({slidesToShow:4,slidesToScroll:4,dots:!0,arrows:!0,infinite:!1,responsive:[{breakpoint:993,settings:{slidesToShow:2,slidesToScroll:2,swipe:!0,swipeToSlide:!0}},{breakpoint:769,settings:{slidesToShow:2,slidesToScroll:2,dots:!1,arrows:!1,centerMode:!0,swipe:!0,swipeToSlide:!0,infinite:!0}},{breakpoint:671,settings:{slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!1,centerMode:!0,swipe:!0,swipeToSlide:!0}}]}).on("setPosition",function(e){1==e.target.slick.$slides.length?$(this).addClass("no-slider"):$(this).removeClass("no-slider")}).on("swipe",function(e,t,i){bLazy.load($(this).find(".card-image"))})}},41:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionsModule=void 0;var n=i(0),r=i(1),a=i(7),o=i(14),s=i(12),l=i(22);var c=function CollectionsModule(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionsModule)};t.CollectionsModule=c=(0,n.__decorate)([(0,r.NgModule)({declarations:[s.CollectionsBlockComponent],imports:[a.BrowserModule,l.CardsModule],providers:[o.ApiService],exports:[s.CollectionsBlockComponent]})],c),t.CollectionsModule=c},5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=t.getBorough=t.unselectFiltersDeep=t.filterByQueryParams=t.navigateQueryParams=t.getIcon=t.filterLabelMap=t.returnFiltered=t.hasSelected=t.filterByLookup=t.filterByText=t.cardIconMap=t.channelShortNameMap=t.trackEvent=t.bootstrapDynamicComponents=t.getBinding=void 0,t.placeHolderImage=function placeHolderImage(){return"/images/uploads/default-images/nycgo-default-image-0"+(0,l.random)(3,7)+"_card.jpg"},t.paginate=function paginate(e){var t=e.items,i=e.page,n=e.size;t.length;var r=(i-1)*n,a=i*n,o=t.slice(r,a),s=(i-1)*n+1;return o=(0,l.map)(o,function(e){if(e)return e.index=s,s++,e})};var l=i(2);t.getBinding=function getBinding(i,n){(0,l.forEach)(i,function(e,t){"binding"===e&&(i[t]=n.nativeElement.getAttribute(t))})},t.bootstrapDynamicComponents=function bootstrapDynamicComponents(n,r,e){(0,l.forEach)(e,function(t){var e=r.resolveComponentFactory(t),i=document.getElementsByTagName(e.selector);i&&0<i.length&&(0,l.forEach)(i,function(e){n.bootstrap(t,e)})})},t.trackEvent=function trackEvent(e){var t=e.eventInfoData,i=e.pageInfoData,n=e.productInfoData,r=window.digitalData.product.productInfo={};if(window.digitalData&&"movableInk"===t)window.digitalData.movable=t;else if(window.digitalData&&window.digitalData.page){var a=window.digitalData.page.pageInfo;i&&(0,l.forEach)(i,function(e,t){a[t]=e}),n&&(0,l.forEach)(n,function(e,t){r[t]=e}),window.digitalData.event="string"==typeof t?[{eventInfo:{eventName:t}}]:[{eventInfo:t}]}n&&(0,l.forEach)(n,function(e,t){r[t]=e}),window.digitalData.event="string"==typeof t?[{eventInfo:{eventName:t}}]:[{eventInfo:t}]},t.channelShortNameMap=function channelShortNameMap(e){return{venue:"venues",calendar_events:"events"}[e]},t.cardIconMap={article:"icon-book",gallery:"icon-gallery",video:"icon-play",itinerary:"icon-list"};t.filterByText=function filterByText(e,i){return i?(0,l.filter)(e,function(e,t){return(0,l.includes)(e.displayTitle.toLowerCase(),i.toLowerCase())}):e},t.filterByLookup=function filterByLookup(e,t,i){var n=(0,l.filter)(t,function(e){return e.isSelected});if(!n||!(0,l.find)(t,function(e){return e.id}))return e;var r=[];return(0,l.forEach)(n,function(e){r.push(e.id.toString())}),e.filter(function(e){var t=e?(0,l.find)(e.lookupInfo,function(e){return e.lookupName==i}):null;return(t&&t.ids?(0,l.intersection)(t.ids.split(","),r):[]).length})},t.hasSelected=function hasSelected(e){return!!(0,l.find)(e,function(e){return e.isSelected})};var n=t.returnFiltered=function returnFiltered(e){var t=0<arguments.length&&void 0!==e?e:[],i={};return(0,l.forEach)(t,function(e,t){(0,l.forEach)(e,function(e){i[t]=i[t]||[],e.isSelected&&i[t].push(e)})}),i=(0,l.pickBy)(i,function(e){return!(0,l.isEmpty)(e)}),!(0,l.isEmpty)(i)&&i};t.filterLabelMap={attractionType:"Type",borough:"Borough",category:"Category",cuisine:"Cuisine",curated:"Collections +",dietaryNeed:"Dietary Needs",featured:"Featured",hotelAmenity:"Amenities",hotelChain:"Hotel Chain",hotelService:"Services",hotelType:"Type",jamesBeard:"Award Winners",location:"Location",museumType:"Type",neighborhood:"Neighborhood",nightlifeGenre:"Genre",nightlifeType:"Type",primaryCategory:"Category",primaryLocation:"Locale",restaurantAmenity:"Amenities",serviceType:"Type",shoppingType:"Type",tourType:"Type",price:"Price",reviews:"Reviews",hotelRating:"Rating"},t.getIcon=function getIcon(i){var n=null;return(0,l.forEach)({"icon-culinary":["Global Cuisine"],"icon-music":["Live Music"],"icon-sun":["Outdoor Adventure"],"icon-camera":["Family Photo Ops"],"icon-shopping-bag-alt":["Destination Shopping"],"icon-baseball":["Spectator Sports"],"icon-art":["Art Scene"],"icon-cityhall":["Historic Sites"]},function(e,t){(0,l.includes)(e,i)&&(n=t)}),n},t.navigateQueryParams=function navigateQueryParams(e,t){var i=n(e);(0,l.forEach)(i,function(e,t){return i[t]="searchText"==t?(0,l.kebabCase)(e[0].searchTerm):(0,l.map)(e,"urlTitle").join(",")}),t.navigate([""],{queryParams:i,replaceUrl:!0})},t.filterByQueryParams=function filterByQueryParams(e,i){return(0,l.forEach)(e,function(e,t){(0,l.forEach)(e,function(e){(0,l.includes)(i[t],e.urlTitle)&&(e.isSelected=!0)})}),e},t.unselectFiltersDeep=function unselectFiltersDeep(e){return(0,l.forEach)(e,function(e){(0,l.forEach)(e,function(e){e.isSelected=!1,e.searchTerms&&(e.searchTerms=null)})}),e},t.getBorough=function getBorough(e,t){var i={20:{urlTitle:"brooklyn",displayTitle:"Brooklyn"},21:{urlTitle:"the-bronx",displayTitle:"The Bronx"},22:{urlTitle:"queens",displayTitle:"Queens"},23:{urlTitle:"manhattan",displayTitle:"Manhattan"},24:{urlTitle:"staten-island",displayTitle:"Staten Island"}};return i[e]?i[e][1<arguments.length&&void 0!==t?t:"displayTitle"]:void 0},t.isMobile=function isMobile(){return window.matchMedia("(max-width: 767px)").matches}},6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_FILTERS=t.UPDATE_SORT=t.RESET_FILTERS=t.CHANGE_PAGE=t.SPECIFY_FILTERS=t.INITIATE_FILTERS=t.UPDATE_ACTIVE=t.TOGGLE_DEBUG=t.INITIATE_STATE=void 0,t.appReducer=function appReducer(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u.appState,t=arguments[1];switch(t.type){case n:var i=Object.assign({},e);return(0,d.forEach)(t.activeState,function(e,t){i[t]=e}),i;case r:return Object.assign(Object.assign({},e),{debug:!e.debug});case a:return Object.assign(Object.assign({},e),{active:t[_],initialState:!1});default:return e}},t.filterReducer=function filterReducer(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u.filterState,n=arguments[1];switch(n.type){case h:var i=(0,d.clone)(b);return(0,d.forEach)(n.initialState,function(e,t){i[t]=e}),Object.assign({},i);case f:var r=b.filters;return(0,d.forEach)(n.initialFilters,function(e,t){r[t]=e}),Object.assign(Object.assign({},e),{isFiltered:!!(0,p.returnFiltered)(r),filters:r,filterDetails:n.filterDetails});case v:var a=(0,d.clone)(e.filters),o=!1;return n.exclusive&&(a=(0,p.unselectFiltersDeep)(a)),void 0!==n.searchTerms&&(a.searchText[0].searchTerms=""!==n.searchTerms&&!1!==n.searchTerms?n.searchTerms:null),a.searchText[0].isSelected=!!a.searchText[0].searchTerms,(0,d.forEach)(n[_],function(e,t){var i=(0,d.find)(a[t],{id:e.id});i&&(i.isSelected&&n.collection&&(o=!0),i.isSelected=!i.isSelected)}),Object.assign(Object.assign({},e),{pageNumber:1,isFiltered:!!(0,p.returnFiltered)(a),filters:a,initialState:!1,inCollection:!o&&(!(!e.inCollection||n.collection)||n.collection)});case g:var t=(0,d.clone)(e.sort);(0,d.forEach)(t,function(e){e.isSelected="Default"===e.name});var s=(0,d.clone)(e.filters);return{pageNumber:1,isFiltered:s.isFiltered=!1,initialState:!1,filters:s=(0,p.unselectFiltersDeep)(s),inCollection:!1,sort:t};case y:var l=(0,d.clone)(e),c=(0,d.find)(e.sort,function(e){return e.name===n.selectedSort&&e.value===n.sortBy&&e.order===n.order});return(0,d.forEach)(l.sort,function(e){e.isSelected=e===c}),Object.assign({},e);case m:return Object.assign(Object.assign({},e),{pageNumber:n.pageNumber,initialState:!1});default:return e}};var u=i(169),d=i(2),p=i(5),n=t.INITIATE_STATE="INITIATE_STATE",r=t.TOGGLE_DEBUG="TOGGLE_DEBUG",a=t.UPDATE_ACTIVE="UPDATE_ACTIVE",h=t.INITIATE_FILTERS="INITIATE_FILTERS",f=t.SPECIFY_FILTERS="SPECIFY_FILTERS",m=t.CHANGE_PAGE="CHANGE_PAGE",g=t.RESET_FILTERS="RESET_FILTERS",y=t.UPDATE_SORT="UPDATE_SORT",v=t.UPDATE_FILTERS="UPDATE_FILTERS",b=(0,d.clone)(u.filterState),_="payload"},727:function(e,t,i){"use strict";i(194),i(29);var n=i(197),r=i(15),a=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(9)),o=i(728);(0,r.setAngularJSGlobal)(a),(0,n.platformBrowserDynamic)().bootstrapModule(o.AppModule)},728:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppModule=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(7),s=i(39),l=i(15),c=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(i(729)),u=i(188),d=i(18),p=i(22);var h=(n(AppModule,[{key:"ngDoBootstrap",value:function ngDoBootstrap(){this.upgrade.bootstrap(document.documentElement,[c.default],{strictDi:!0})}}]),AppModule);function AppModule(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AppModule),this.upgrade=e}t.AppModule=h=(0,r.__decorate)([(0,a.NgModule)({imports:[o.BrowserModule,s.SharedModule,l.UpgradeModule,u.GridCommonModule,p.CardsModule,d.FavoritesModule]}),(0,r.__metadata)("design:paramtypes",[l.UpgradeModule])],h),t.AppModule=h},729:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function _interopRequireWildcard(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(9)),r=_interopRequireDefault(i(202)),a=_interopRequireDefault(i(206)),o=_interopRequireDefault(i(205)),s=_interopRequireDefault(i(196)),l=_interopRequireDefault(i(4)),c=_interopRequireDefault(i(175)),u=_interopRequireDefault(i(38)),d=_interopRequireDefault(i(228));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var p="nycgoHotels";n.module(p,[r.default,a.default,c.default,u.default,d.default]).component("nycgoFeaturedContent",o.default).component("nycgoAdUnit",s.default).service("helpers",l.default),t.default=p},8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiService=void 0;var n=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),a=i(1),o=i(16),s=i(2);var l=(n(ApiService,[{key:"getFavorites",value:function getFavorites(e){var t=e.list,i=Cookies.get("fav_uid"),n=[this.FAVORITES_SERVICE_URL,"/nycgo/v1/users/",i,"/favorites"].join("");return t&&(n=n+"?list="+t),this.http.get(n)}},{key:"createUser",value:function createUser(e){var t=e.fbToken,i=e.fbEmail,n=(e.method,e.newFbToken,{headers:new o.HttpHeaders({"Content-Type":"application/json"})});return this.http.post(this.FAVORITES_SERVICE_URL+"/nycgo/v1/users",t&&i?{token:t,email:i}:{token:t},n)}},{key:"updateUser",value:function updateUser(e,t,i){var n={headers:new o.HttpHeaders({"Content-Type":"application/json"})};return this.http.put(this.FAVORITES_SERVICE_URL+"/nycgo/v1/users/"+e,{params:{userId:e},data:{token:t,email:i}},n)}},{key:"addRemoveItem",value:function addRemoveItem(e){var t=e.method,i=e.uid,n=e.entryId,r=e.list,a={headers:new o.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"})};return"POST"===t?this.http.post(this.FAVORITES_SERVICE_URL+"/nycgo/v1/users/"+i+"/favorites/"+n,{list:r},a):this.http.delete(this.FAVORITES_SERVICE_URL+"/nycgo/v1/users/"+i+"/favorites/"+n,a)}}]),ApiService);function ApiService(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ApiService),this.http=e,this.FAVORITES_SERVICE_URL=(0,s.get)(window,"nycgoGlobalSettings.favoritesServiceUrl")}t.ApiService=l=(0,r.__decorate)([(0,a.Injectable)({providedIn:"root"}),(0,r.__metadata)("design:paramtypes",[o.HttpClient])],l),t.ApiService=l}});