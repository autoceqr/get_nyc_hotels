// All code and conventions are protected by copyright
!function(e,t,n){function i(){T.addEventHandler(e,"orientationchange",i.orientationChange)}function a(e){this.delay=250,this.FB=e,T.domReady(T.bind(function(){T.poll(T.bind(this.initialize,this),this.delay,8)},this))}function r(){this.rules=T.filter(T.rules,function(e){return"videoplayed"===e.event.substring(0,11)}),this.eventHandler=T.bind(this.onUpdateTime,this)}function o(){this.rules=T.filter(T.rules,function(e){return"elementexists"===e.event})}function s(){T.getToolsByType("nielsen").length>0&&T.domReady(T.bind(this.initialize,this))}function c(){this.lastURL=T.URL(),this._fireIfURIChanged=T.bind(this.fireIfURIChanged,this),this._onPopState=T.bind(this.onPopState,this),this._onHashChange=T.bind(this.onHashChange,this),this._pushState=T.bind(this.pushState,this),this._replaceState=T.bind(this.replaceState,this),this.initialize()}function l(){var e=T.filter(T.rules,function(e){return 0===e.event.indexOf("dataelementchange")});this.dataElementsNames=T.map(e,function(e){return e.event.match(/dataelementchange\((.*)\)/i)[1]},this),this.initPolling()}function u(){var e=this.eventRegex=/^hover\(([0-9]+)\)$/,t=this.rules=[];T.each(T.rules,function(n){n.event.match(e)&&t.push([Number(n.event.match(e)[1]),n.selector])})}function d(){this.defineEvents(),this.visibilityApiHasPriority=!0,t.addEventListener?this.setVisibilityApiPriority(!1):this.attachDetachOlderEventListeners(!0,t,"focusout");T.bindEvent("aftertoolinit",function(){T.fireEvent(T.visibility.isHidden()?"tabblur":"tabfocus")})}function g(t){T.domReady(T.bind(function(){this.twttr=t||e.twttr,this.initialize()},this))}function f(t){t=t||T.rules,this.rules=T.filter(t,function(e){return"inview"===e.event}),this.elements=[],this.eventHandler=T.bind(this.track,this),T.addEventHandler(e,"scroll",this.eventHandler),T.addEventHandler(e,"load",this.eventHandler)}function p(e){T.BaseTool.call(this,e),this.name=e.name||"Basic"}function h(e){T.BaseTool.call(this,e),this.name=e.name||"VisitorID",this.initialize()}function m(){T.BaseTool.call(this),this.asyncScriptCallbackQueue=[],this.argsForBlockingScripts=[]}function v(e){T.BaseTool.call(this,e),this.defineListeners(),this.beaconMethod="plainBeacon",this.adapt=new v.DataAdapters,this.dataProvider=new v.DataProvider.Aggregate}function b(e){T.BaseTool.call(this,e),this.styleElements={},this.targetPageParamsStore={}}function y(e){T.BaseTool.call(this,e),this.varBindings={},this.events=[],this.products=[],this.customSetupFuns=[]}function w(e){T.BaseTool.call(this,e)}function k(e){T.BaseTool.call(this,e)}var E,S,V,x=Object.prototype.toString,P=e._satellite&&e._satellite.override,T={initialized:!1,$data:function(e,t,i){if(e){var a="__satellite__",r=T.dataCache,o=e[a];o||(o=e[a]=T.uuid++);var s=r[o];if(s||(s=r[o]={}),i===n)return s[t];s[t]=i}},uuid:1,dataCache:{},keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},values:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},isArray:Array.isArray||function(e){return"[object Array]"===x.apply(e)},isObject:function(e){return null!=e&&!T.isArray(e)&&"object"==typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"[object Number]"===x.apply(e)&&!T.isNaN(e)},isNaN:function(e){return e!=e},isRegex:function(e){return e instanceof RegExp},isLinkTag:function(e){return!(!e||!e.nodeName||"a"!==e.nodeName.toLowerCase())},each:function(e,t,n){for(var i=0,a=e.length;i<a;i++)t.call(n,e[i],i,e)},map:function(e,t,n){for(var i=[],a=0,r=e.length;a<r;a++)i.push(t.call(n,e[a],a,e));return i},filter:function(e,t,n){for(var i=[],a=0,r=e.length;a<r;a++){var o=e[a];t.call(n,o,a,e)&&i.push(o)}return i},any:function(e,t,n){for(var i=0,a=e.length;i<a;i++){var r=e[i];if(t.call(n,r,i,e))return!0}return!1},every:function(e,t,n){for(var i=!0,a=0,r=e.length;a<r;a++){var o=e[a];i=i&&t.call(n,o,a,e)}return i},contains:function(e,t){return-1!==T.indexOf(e,t)},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=e.length;n--;)if(t===e[n])return n;return-1},find:function(e,t,n){if(!e)return null;for(var i=0,a=e.length;i<a;i++){var r=e[i];if(t.call(n,r,i,e))return r}return null},textMatch:function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))},stringify:function(e,t){if(t=t||[],T.isObject(e)){if(T.contains(t,e))return"<Cycle>";t.push(e)}if(T.isArray(e))return"["+T.map(e,function(e){return T.stringify(e,t)}).join(",")+"]";if(T.isString(e))return'"'+String(e)+'"';if(T.isObject(e)){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i+": "+T.stringify(e[i],t));return"{"+n.join(", ")+"}"}return String(e)},trim:function(e){return null==e?null:e.trim?e.trim():e.replace(/^ */,"").replace(/ *$/,"")},bind:function(e,t){return function(){return e.apply(t,arguments)}},throttle:function(e,t){var n=null;return function(){var i=this,a=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,a)},t)}},domReady:function(e){function n(e){for(g=1;e=a.shift();)e()}var i,a=[],r=!1,o=t,s=o.documentElement,c=s.doScroll,l="DOMContentLoaded",u="addEventListener",d="onreadystatechange",g=/^loade|^c/.test(o.readyState);return o[u]&&o[u](l,i=function(){o.removeEventListener(l,i,r),n()},r),c&&o.attachEvent(d,i=function(){/^c/.test(o.readyState)&&(o.detachEvent(d,i),n())}),e=c?function(t){self!=top?g?t():a.push(t):function(){try{s.doScroll("left")}catch(n){return setTimeout(function(){e(t)},50)}t()}()}:function(e){g?e():a.push(e)}}(),loadScript:function(e,n){var i=t.createElement("script");T.scriptOnLoad(e,i,n),i.src=e,t.getElementsByTagName("head")[0].appendChild(i)},scriptOnLoad:function(e,t,n){function i(e){e&&T.logError(e),n&&n(e)}"onload"in t?(t.onload=function(){i()},t.onerror=function(){i(new Error("Failed to load script "+e))}):"readyState"in t&&(t.onreadystatechange=function(){var e=t.readyState;"loaded"!==e&&"complete"!==e||(t.onreadystatechange=null,i())})},loadScriptOnce:function(e,t){T.loadedScriptRegistry[e]||T.loadScript(e,function(n){n||(T.loadedScriptRegistry[e]=!0),t&&t(n)})},loadedScriptRegistry:{},loadScriptSync:function(e){t.write?T.domReadyFired?T.notify('Cannot load sync the "'+e+'" script after DOM Ready.',1):(e.indexOf('"')>-1&&(e=encodeURI(e)),t.write('<script src="'+e+'"></script>')):T.notify('Cannot load sync the "'+e+'" script because "document.write" is not available',1)},pushAsyncScript:function(e){T.tools["default"].pushAsyncScript(e)},pushBlockingScript:function(e){T.tools["default"].pushBlockingScript(e)},addEventHandler:e.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},removeEventHandler:e.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)},preventDefault:e.addEventListener?function(e){e.preventDefault()}:function(e){e.returnValue=!1},stopPropagation:function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},containsElement:function(e,t){return e.contains?e.contains(t):!!(16&e.compareDocumentPosition(t))},matchesCss:function(n){function i(e,t){var n=t.tagName;return!!n&&e.toLowerCase()===n.toLowerCase()}var a=n.matchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector||n.msMatchesSelector;return a?function(n,i){if(i===t||i===e)return!1;try{return a.call(i,n)}catch(r){return!1}}:n.querySelectorAll?function(e,t){if(!t.parentNode)return!1;if(e.match(/^[a-z]+$/i))return i(e,t);try{for(var n=t.parentNode.querySelectorAll(e),a=n.length;a--;)if(n[a]===t)return!0}catch(r){}return!1}:function(e,t){if(e.match(/^[a-z]+$/i))return i(e,t);try{return T.Sizzle.matches(e,[t]).length>0}catch(n){return!1}}}(t.documentElement),cssQuery:(E=t,E.querySelectorAll?function(e,t){var n;try{n=E.querySelectorAll(e)}catch(i){n=[]}t(n)}:function(e,t){if(T.Sizzle){var n;try{n=T.Sizzle(e)}catch(i){n=[]}t(n)}else T.sizzleQueue.push([e,t])}),hasAttr:function(e,t){return e.hasAttribute?e.hasAttribute(t):e[t]!==n},inherit:function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},toArray:function(){try{var e=Array.prototype.slice;return e.call(t.documentElement.childNodes,0)[0].nodeType,function(t){return e.call(t,0)}}catch(n){return function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t}}}(),equalsIgnoreCase:function(e,t){return null==e?null==t:null!=t&&String(e).toLowerCase()===String(t).toLowerCase()},poll:function(e,t,n){function i(){T.isNumber(n)&&a++>=n||e()||setTimeout(i,t)}var a=0;t=t||1e3,i()},escapeForHtml:function(e){return e?String(e).replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}};T.availableTools={},T.availableEventEmitters=[],T.fireOnceEvents=["condition","elementexists"],T.initEventEmitters=function(){T.eventEmitters=T.map(T.availableEventEmitters,function(e){return new e})},T.eventEmitterBackgroundTasks=function(){T.each(T.eventEmitters,function(e){"backgroundTasks"in e&&e.backgroundTasks()})},T.initTools=function(e){var t={"default":new m},n=T.settings.euCookieName||"sat_track";for(var i in e)if(e.hasOwnProperty(i)){var a,r,o;if((a=e[i]).euCookie)if("true"!==T.readCookie(n))continue;if(!(r=T.availableTools[a.engine])){var s=[];for(var c in T.availableTools)T.availableTools.hasOwnProperty(c)&&s.push(c);throw new Error("No tool engine named "+a.engine+", available: "+s.join(",")+".")}(o=new r(a)).id=i,t[i]=o}return t},T.preprocessArguments=function(e,t,n,i,a){function r(e){return i&&T.isString(e)?e.toLowerCase():e}function o(e){var c={};for(var l in e)if(e.hasOwnProperty(l)){var u=e[l];T.isObject(u)?c[l]=o(u):T.isArray(u)?c[l]=s(u,i):c[l]=r(T.replace(u,t,n,a))}return c}function s(e){for(var i=[],a=0,s=e.length;a<s;a++){var c=e[a];T.isString(c)?c=r(T.replace(c,t,n)):c&&c.constructor===Object&&(c=o(c)),i.push(c)}return i}return e?s(e,i):e},T.execute=function(e,t,n,i){function a(a){var r=i[a||"default"];if(r)try{r.triggerCommand(e,t,n)}catch(o){T.logError(o)}}if(!_satellite.settings.hideActivity)if(i=i||T.tools,e.engine){var r=e.engine;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s.settings&&s.settings.engine===r&&a(o)}}else e.tool instanceof Array?T.each(e.tool,function(e){a(e)}):a(e.tool)},T.Logger={outputEnabled:!1,messages:[],keepLimit:100,flushed:!1,LEVELS:[null,null,"log","info","warn","error"],message:function(e,t){var n=this.LEVELS[t]||"log";this.messages.push([n,e]),this.messages.length>this.keepLimit&&this.messages.shift(),this.outputEnabled&&this.echo(n,e)},getHistory:function(){return this.messages},clearHistory:function(){this.messages=[]},setOutputState:function(e){this.outputEnabled!=e&&(this.outputEnabled=e,e?this.flush():this.flushed=!1)},echo:function(t,n){e.console&&e.console[t]("SATELLITE: "+n)},flush:function(){this.flushed||(T.each(this.messages,function(e){!0!==e[2]&&(this.echo(e[0],e[1]),e[2]=!0)},this),this.flushed=!0)}},T.notify=T.bind(T.Logger.message,T.Logger),T.cleanText=function(e){return null==e?null:T.trim(e).replace(/\s+/g," ")},T.cleanText.legacy=function(e){return null==e?null:T.trim(e).replace(/\s{2,}/g," ").replace(/[^\000-\177]*/g,"")},T.text=function(e){return e.textContent||e.innerText},T.specialProperties={text:T.text,cleanText:function(e){return T.cleanText(T.text(e))}},T.getObjectProperty=function(e,t,i){for(var a,r=t.split("."),o=e,s=T.specialProperties,c=0,l=r.length;c<l;c++){if(null==o)return n;var u=r[c];if(i&&"@"===u.charAt(0))o=s[u.slice(1)](o);else if(o.getAttribute&&(a=u.match(/^getAttribute\((.+)\)$/))){var d=a[1];o=o.getAttribute(d)}else o=o[u]}return o},T.getToolsByType=function(e){if(!e)throw new Error("Tool type is missing");var t=[];for(var n in T.tools)if(T.tools.hasOwnProperty(n)){var i=T.tools[n];i.settings&&i.settings.engine===e&&t.push(i)}return t},T.setVar=function(){var e=T.data.customVars;if(null==e&&(T.data.customVars={},e=T.data.customVars),"string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}},T.dataElementSafe=function(e,t){if(arguments.length>2){var n=arguments[2];"pageview"===t?T.dataElementSafe.pageviewCache[e]=n:"session"===t?T.setCookie("_sdsat_"+e,n):"visitor"===t&&T.setCookie("_sdsat_"+e,n,730)}else{if("pageview"===t)return T.dataElementSafe.pageviewCache[e];if("session"===t||"visitor"===t)return T.readCookie("_sdsat_"+e)}},T.dataElementSafe.pageviewCache={},T.realGetDataElement=function(t){var n;return t.selector?T.hasSelector&&T.cssQuery(t.selector,function(e){if(e.length>0){var i=e[0];"text"===t.property?n=i.innerText||i.textContent:t.property in i?n=i[t.property]:T.hasAttr(i,t.property)&&(n=i.getAttribute(t.property))}}):t.queryParam?n=t.ignoreCase?T.getQueryParamCaseInsensitive(t.queryParam):T.getQueryParam(t.queryParam):t.cookie?n=T.readCookie(t.cookie):t.jsVariable?n=T.getObjectProperty(e,t.jsVariable):t.customJS?n=t.customJS():t.contextHub&&(n=t.contextHub()),T.isString(n)&&t.cleanText&&(n=T.cleanText(n)),n},T.getDataElement=function(e,t,i){if(null==(i=i||T.dataElements[e]))return T.settings.undefinedVarsReturnEmpty?"":null;var a=T.realGetDataElement(i);return a===n&&i.storeLength?a=T.dataElementSafe(e,i.storeLength):a!==n&&i.storeLength&&T.dataElementSafe(e,i.storeLength,a),a||t||(a=i["default"]||""),T.isString(a)&&i.forceLowerCase&&(a=a.toLowerCase()),a},T.getVar=function(i,a,r){var o,s,c=T.data.customVars,l=r?r.target||r.srcElement:null,u={uri:T.URI(),protocol:t.location.protocol,hostname:t.location.hostname};if(T.dataElements&&i in T.dataElements)return T.getDataElement(i);if((s=u[i.toLowerCase()])===n)if("this."===i.substring(0,5))i=i.slice(5),s=T.getObjectProperty(a,i,!0);else if("event."===i.substring(0,6))i=i.slice(6),s=T.getObjectProperty(r,i);else if("target."===i.substring(0,7))i=i.slice(7),s=T.getObjectProperty(l,i);else if("window."===i.substring(0,7))i=i.slice(7),s=T.getObjectProperty(e,i);else if("param."===i.substring(0,6))i=i.slice(6),s=T.getQueryParam(i);else if(o=i.match(/^rand([0-9]+)$/)){var d=Number(o[1]),g=(Math.random()*(Math.pow(10,d)-1)).toFixed(0);s=Array(d-g.length+1).join("0")+g}else s=T.getObjectProperty(c,i);return s},T.getVars=function(e,t,n){var i={};return T.each(e,function(e){i[e]=T.getVar(e,t,n)}),i},T.replace=function(e,t,n,i){return"string"!=typeof e?e:e.replace(/%(.*?)%/g,function(e,a){var r=T.getVar(a,t,n);return null==r?T.settings.undefinedVarsReturnEmpty?"":e:i?T.escapeForHtml(r):r})},T.escapeHtmlParams=function(e){return e.escapeHtml=!0,e},T.searchVariables=function(e,t,n){if(!e||0===e.length)return"";for(var i=[],a=0,r=e.length;a<r;a++){var o=e[a],s=T.getVar(o,t,n);i.push(o+"="+escape(s))}return"?"+i.join("&")},T.fireRule=function(e,t,n){var i=e.trigger;if(i){for(var a=0,r=i.length;a<r;a++){var o=i[a];T.execute(o,t,n)}T.contains(T.fireOnceEvents,e.event)&&(e.expired=!0)}},T.isLinked=function(e){for(var t=e;t;t=t.parentNode)if(T.isLinkTag(t))return!0;return!1},T.firePageLoadEvent=function(e){for(var n=t.location,i={type:e,target:n},a=T.pageLoadRules,r=T.evtHandlers[i.type],o=a.length;o--;){var s=a[o];T.ruleMatches(s,i,n)&&(T.notify('Rule "'+s.name+'" fired.',1),T.fireRule(s,n,i))}for(var c in T.tools)if(T.tools.hasOwnProperty(c)){var l=T.tools[c];l.endPLPhase&&l.endPLPhase(e)}r&&T.each(r,function(e){e(i)})},T.track=function(e){e=e.replace(/^\s*/,"").replace(/\s*$/,"");for(var t=0;t<T.directCallRules.length;t++){var n=T.directCallRules[t];if(n.name===e)return T.notify('Direct call Rule "'+e+'" fired.',1),void T.fireRule(n,location,{type:e})}T.notify('Direct call Rule "'+e+'" not found.',1)},T.basePath=function(){return T.data.host?("https:"===t.location.protocol?"https://"+T.data.host.https:"http://"+T.data.host.http)+"/":this.settings.basePath},T.setLocation=function(t){e.location=t},T.parseQueryParams=function(e){var t=function(e){var t=e;try{t=decodeURIComponent(e)}catch(n){}return t};if(""===e||!1===T.isString(e))return{};0===e.indexOf("?")&&(e=e.substring(1));var n={},i=e.split("&");return T.each(i,function(e){(e=e.split("="))[1]&&(n[t(e[0])]=t(e[1]))}),n},T.getCaseSensitivityQueryParamsMap=function(e){var t=T.parseQueryParams(e),n={};for(var i in t)t.hasOwnProperty(i)&&(n[i.toLowerCase()]=t[i]);return{normal:t,caseInsensitive:n}},T.updateQueryParams=function(){T.QueryParams=T.getCaseSensitivityQueryParamsMap(e.location.search)},T.updateQueryParams(),T.getQueryParam=function(e){return T.QueryParams.normal[e]},T.getQueryParamCaseInsensitive=function(e){return T.QueryParams.caseInsensitive[e.toLowerCase()]},T.encodeObjectToURI=function(e){if(!1===T.isObject(e))return"";var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},T.readCookie=function(e){for(var i=e+"=",a=t.cookie.split(";"),r=0;r<a.length;r++){for(var o=a[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(i))return o.substring(i.length,o.length)}return n},T.setCookie=function(e,n,i){var a;if(i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3),a="; expires="+r.toGMTString()}else a="";t.cookie=e+"="+n+a+"; path=/"},T.removeCookie=function(e){T.setCookie(e,"",-1)},T.getElementProperty=function(e,t){if("@"===t.charAt(0)){var i=T.specialProperties[t.substring(1)];if(i)return i(e)}return"innerText"===t?T.text(e):t in e?e[t]:e.getAttribute?e.getAttribute(t):n},T.propertiesMatch=function(e,t){if(e)for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],a=T.getElementProperty(t,n);if("string"==typeof i&&i!==a)return!1;if(i instanceof RegExp&&!i.test(a))return!1}return!0},T.isRightClick=function(e){var t;return e.which?t=3==e.which:e.button&&(t=2==e.button),t},T.ruleMatches=function(e,t,n,i){var a=e.condition,r=e.conditions,o=e.property,s=t.type,c=e.value,l=t.target||t.srcElement,u=n===l;if(e.event!==s&&("custom"!==e.event||e.customEvent!==s))return!1;if(!T.ruleInScope(e))return!1;if("click"===e.event&&T.isRightClick(t))return!1;if(e.isDefault&&i>0)return!1;if(e.expired)return!1;if("inview"===s&&t.inviewDelay!==e.inviewDelay)return!1;if(!u&&(!1===e.bubbleFireIfParent||0!==i&&!1===e.bubbleFireIfChildFired))return!1;if(e.selector&&!T.matchesCss(e.selector,n))return!1;if(!T.propertiesMatch(o,n))return!1;if(null!=c)if("string"==typeof c){if(c!==n.value)return!1}else if(!c.test(n.value))return!1;if(a)try{if(!a.call(n,t,l))return T.notify('Condition for rule "'+e.name+'" not met.',1),!1}catch(g){return T.notify('Condition for rule "'+e.name+'" not met. Error: '+g.message,1),!1}if(r){var d=T.find(r,function(i){try{return!i.call(n,t,l)}catch(g){return T.notify('Condition for rule "'+e.name+'" not met. Error: '+g.message,1),!0}});if(d)return T.notify("Condition "+d.toString()+' for rule "'+e.name+'" not met.',1),!1}return!0},T.evtHandlers={},T.bindEvent=function(e,t){var n=T.evtHandlers;n[e]||(n[e]=[]),n[e].push(t)},T.whenEvent=T.bindEvent,T.unbindEvent=function(e,t){var n=T.evtHandlers;if(n[e]){var i=T.indexOf(n[e],t);n[e].splice(i,1)}},T.bindEventOnce=function(e,t){var n=function(){T.unbindEvent(e,n),t.apply(null,arguments)};T.bindEvent(e,n)},T.isVMLPoisoned=function(e){if(!e)return!1;try{e.nodeName}catch(t){if("Attribute only valid on v:image"===t.message)return!0}return!1},T.handleEvent=function(e){if(!T.$data(e,"eventProcessed")){var t=e.type.toLowerCase(),n=e.target||e.srcElement,i=0,a=T.rules,r=(T.tools,T.evtHandlers[e.type]);if(T.isVMLPoisoned(n))T.notify("detected "+t+" on poisoned VML element, skipping.",1);else{r&&T.each(r,function(t){t(e)}),n&&n.nodeName?T.notify("detected "+t+" on "+n.nodeName,1):T.notify("detected "+t,1);for(var o=n;o;o=o.parentNode){var s=!1;if(T.each(a,function(t){T.ruleMatches(t,e,o,i)&&(T.notify('Rule "'+t.name+'" fired.',1),T.fireRule(t,o,e),i++,t.bubbleStop&&(s=!0))}),s)break}T.$data(e,"eventProcessed",!0)}}},T.onEvent=t.querySelectorAll?function(e){T.handleEvent(e)}:(S=[],(V=function(e){e.selector?S.push(e):T.handleEvent(e)}).pendingEvents=S,V),T.fireEvent=function(e,t){T.onEvent({type:e,target:t})},T.registerEvents=function(e,t){for(var n=t.length-1;n>=0;n--){var i=t[n];T.$data(e,i+".tracked")||(T.addEventHandler(e,i,T.onEvent),T.$data(e,i+".tracked",!0))}},T.registerEventsForTags=function(e,n){for(var i=e.length-1;i>=0;i--)for(var a=e[i],r=t.getElementsByTagName(a),o=r.length-1;o>=0;o--)T.registerEvents(r[o],n)},T.setListeners=function(){var e=["click","submit"];T.each(T.rules,function(t){"custom"===t.event&&t.hasOwnProperty("customEvent")&&!T.contains(e,t.customEvent)&&e.push(t.customEvent)}),T.registerEvents(t,e)},T.getUniqueRuleEvents=function(){return T._uniqueRuleEvents||(T._uniqueRuleEvents=[],T.each(T.rules,function(e){-1===T.indexOf(T._uniqueRuleEvents,e.event)&&T._uniqueRuleEvents.push(e.event)})),T._uniqueRuleEvents},T.setFormListeners=function(){if(!T._relevantFormEvents){var e=["change","focus","blur","keypress"];T._relevantFormEvents=T.filter(T.getUniqueRuleEvents(),function(t){return-1!==T.indexOf(e,t)})}T._relevantFormEvents.length&&T.registerEventsForTags(["input","select","textarea","button"],T._relevantFormEvents)},T.setVideoListeners=function(){if(!T._relevantVideoEvents){var e=["play","pause","ended","volumechange","stalled","loadeddata"];T._relevantVideoEvents=T.filter(T.getUniqueRuleEvents(),function(t){return-1!==T.indexOf(e,t)})}T._relevantVideoEvents.length&&T.registerEventsForTags(["video"],T._relevantVideoEvents)},T.readStoredSetting=function(t){try{return t="sdsat_"+t,e.localStorage.getItem(t)}catch(n){return T.notify("Cannot read stored setting from localStorage: "+n.message,2),null}},T.loadStoredSettings=function(){var e=T.readStoredSetting("debug"),t=T.readStoredSetting("hide_activity");e&&(T.settings.notifications="true"===e),t&&(T.settings.hideActivity="true"===t)},T.isRuleActive=function(e,t){function n(e,t){return t=a(t,{hour:e[f](),minute:e[p]()}),Math.floor(Math.abs((e.getTime()-t.getTime())/864e5))}function i(e,t){function n(e){return 12*e[d]()+e[g]()}return Math.abs(n(e)-n(t))}function a(e,t){var n=new Date(e.getTime());for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];switch(i){case"hour":n[h](a);break;case"minute":n[m](a);break;case"date":n[v](a)}}return n}function r(e,t){return 60*e[f]()+e[p]()>60*t[f]()+t[p]()}function o(e,t){return 60*e[f]()+e[p]()<60*t[f]()+t[p]()}var s=e.schedule;if(!s)return!0;var c=s.utc,l=c?"getUTCDate":"getDate",u=c?"getUTCDay":"getDay",d=c?"getUTCFullYear":"getFullYear",g=c?"getUTCMonth":"getMonth",f=c?"getUTCHours":"getHours",p=c?"getUTCMinutes":"getMinutes",h=c?"setUTCHours":"setHours",m=c?"setUTCMinutes":"setMinutes",v=c?"setUTCDate":"setDate";if(t=t||new Date,s.repeat){if(r(s.start,t))return!1;if(o(s.end,t))return!1;if(t<s.start)return!1;if(s.endRepeat&&t>=s.endRepeat)return!1;if("daily"===s.repeat){if(s.repeatEvery)if(n(s.start,t)%s.repeatEvery!=0)return!1}else if("weekly"===s.repeat){if(s.days){if(!T.contains(s.days,t[u]()))return!1}else if(s.start[u]()!==t[u]())return!1;if(s.repeatEvery)if(n(s.start,t)%(7*s.repeatEvery)!=0)return!1}else if("monthly"===s.repeat){if(s.repeatEvery)if(i(s.start,t)%s.repeatEvery!=0)return!1;if(s.nthWeek&&s.mthDay){if(s.mthDay!==t[u]())return!1;var b=Math.floor((t[l]()-t[u]()+1)/7);if(s.nthWeek!==b)return!1}else if(s.start[l]()!==t[l]())return!1}else if("yearly"===s.repeat){if(s.start[g]()!==t[g]())return!1;if(s.start[l]()!==t[l]())return!1;if(s.repeatEvery)if(Math.abs(s.start[d]()-t[d]())%s.repeatEvery!=0)return!1}}else{if(s.start>t)return!1;if(s.end<t)return!1}return!0},T.isOutboundLink=function(e){if(!e.getAttribute("href"))return!1;var t=e.hostname,n=(e.href,e.protocol);return("http:"===n||"https:"===n)&&(!T.any(T.settings.domainList,function(e){return T.isSubdomainOf(t,e)})&&t!==location.hostname)},T.isLinkerLink=function(e){return!(!e.getAttribute||!e.getAttribute("href"))&&(T.hasMultipleDomains()&&e.hostname!=location.hostname&&!e.href.match(/^javascript/i)&&!T.isOutboundLink(e))},T.isSubdomainOf=function(e,t){if(e===t)return!0;var n=e.length-t.length;return n>0&&T.equalsIgnoreCase(e.substring(n),t)},T.getVisitorId=function(){var e=T.getToolsByType("visitor_id");return 0===e.length?null:e[0].getInstance()},T.URI=function(){var e=t.location.pathname+t.location.search;return T.settings.forceLowerCase&&(e=e.toLowerCase()),e},T.URL=function(){var e=t.location.href;return T.settings.forceLowerCase&&(e=e.toLowerCase()),e},T.filterRules=function(){function e(e){return!!T.isRuleActive(e)}T.rules=T.filter(T.rules,e),T.pageLoadRules=T.filter(T.pageLoadRules,e)},T.ruleInScope=function(e,n){function i(e,t){function n(e){return t.match(e)}var i=e.include,r=e.exclude;if(i&&a(i,t))return!0;if(r){if(T.isString(r)&&r===t)return!0;if(T.isArray(r)&&T.any(r,n))return!0;if(T.isRegex(r)&&n(r))return!0}return!1}function a(e,t){function n(e){return t.match(e)}return!(!T.isString(e)||e===t)||(!(!T.isArray(e)||T.any(e,n))||!(!T.isRegex(e)||n(e)))}n=n||t.location;var r=e.scope;if(!r)return!0;var o=r.URI,s=r.subdomains,c=r.domains,l=r.protocols,u=r.hashes;return(!o||!i(o,n.pathname+n.search))&&((!s||!i(s,n.hostname))&&((!c||!a(c,n.hostname))&&((!l||!a(l,n.protocol))&&(!u||!i(u,n.hash)))))},T.backgroundTasks=function(){new Date;T.setFormListeners(),T.setVideoListeners(),T.loadStoredSettings(),T.registerNewElementsForDynamicRules(),T.eventEmitterBackgroundTasks();new Date},T.registerNewElementsForDynamicRules=function(){function e(t,n){var i=e.cache[t];if(i)return n(i);T.cssQuery(t,function(i){e.cache[t]=i,n(i)})}e.cache={},T.each(T.dynamicRules,function(t){e(t.selector,function(e){T.each(e,function(e){var n="custom"===t.event?t.customEvent:t.event;T.$data(e,"dynamicRules.seen."+n)||(T.$data(e,"dynamicRules.seen."+n,!0),T.propertiesMatch(t.property,e)&&T.registerEvents(e,[n]))})})})},T.ensureCSSSelector=function(){t.querySelectorAll?T.hasSelector=!0:(T.loadingSizzle=!0,T.sizzleQueue=[],T.loadScript(T.basePath()+"selector.js",function(){if(T.Sizzle){var e=T.onEvent.pendingEvents;T.each(e,function(e){T.handleEvent(e)},this),T.onEvent=T.handleEvent,T.hasSelector=!0,delete T.loadingSizzle,T.each(T.sizzleQueue,function(e){T.cssQuery(e[0],e[1])}),delete T.sizzleQueue}else T.logError(new Error("Failed to load selector.js"))}))},T.errors=[],T.logError=function(e){T.errors.push(e),T.notify(e.name+" - "+e.message,5)},T.pageBottom=function(){T.initialized&&(T.pageBottomFired=!0,T.firePageLoadEvent("pagebottom"))},T.stagingLibraryOverride=function(){if("true"===T.readStoredSetting("stagingLibrary")){for(var e,n,i,a=t.getElementsByTagName("script"),r=/^(.*)satelliteLib-([a-f0-9]{40})\.js$/,o=/^(.*)satelliteLib-([a-f0-9]{40})-staging\.js$/,s=0,c=a.length;s<c&&(!(i=a[s].getAttribute("src"))||(e||(e=i.match(r)),n||(n=i.match(o)),!n));s++);if(e&&!n){var l=e[1]+"satelliteLib-"+e[2]+"-staging.js";if(t.write)t.write('<script src="'+l+'"></script>');else{var u=t.createElement("script");u.src=l,t.head.appendChild(u)}return!0}}return!1},T.checkAsyncInclude=function(){e.satellite_asyncLoad&&T.notify('You may be using the async installation of Satellite. In-page HTML and the "pagebottom" event will not work. Please update your Satellite installation for these features.',5)},T.hasMultipleDomains=function(){return!!T.settings.domainList&&T.settings.domainList.length>1},T.handleOverrides=function(){if(P)for(var e in P)P.hasOwnProperty(e)&&(T.data[e]=P[e])},T.privacyManagerParams=function(){var e={};T.extend(e,T.settings.privacyManagement);var t=[];for(var n in T.tools)if(T.tools.hasOwnProperty(n)){var i=T.tools[n],a=i.settings;if(!a)continue;"sc"===a.engine&&t.push(i)}var r=T.filter(T.map(t,function(e){return e.getTrackingServer()}),function(e){return null!=e});e.adobeAnalyticsTrackingServers=r;for(var o=["bannerText","headline","introductoryText","customCSS"],s=0;s<o.length;s++){var c=o[s],l=e[c];if(l)if("text"===l.type)e[c]=l.value;else{if("data"!==l.type)throw new Error("Invalid type: "+l.type);e[c]=T.getVar(l.value)}}return e},T.prepareLoadPrivacyManager=function(){function t(e){function t(){++r===a.length&&(n(),clearTimeout(o),e())}function n(){T.each(a,function(e){T.unbindEvent(e.id+".load",t)})}function i(){n(),e()}var a=T.filter(T.values(T.tools),function(e){return e.settings&&"sc"===e.settings.engine});if(0===a.length)return e();var r=0;T.each(a,function(e){T.bindEvent(e.id+".load",t)});var o=setTimeout(i,5e3)}T.addEventHandler(e,"load",function(){t(T.loadPrivacyManager)})},T.loadPrivacyManager=function(){var e=T.basePath()+"privacy_manager.js";T.loadScript(e,function(){var e=T.privacyManager;e.configure(T.privacyManagerParams()),e.openIfRequired()})},T.init=function(t){if(!T.stagingLibraryOverride()){T.configurationSettings=t;var i=t.tools;for(var a in delete t.tools,t)t.hasOwnProperty(a)&&(T[a]=t[a]);T.data.customVars===n&&(T.data.customVars={}),T.data.queryParams=T.QueryParams.normal,T.handleOverrides(),T.detectBrowserInfo(),T.trackVisitorInfo&&T.trackVisitorInfo(),T.loadStoredSettings(),T.Logger.setOutputState(T.settings.notifications),T.checkAsyncInclude(),T.ensureCSSSelector(),T.filterRules(),T.dynamicRules=T.filter(T.rules,function(e){return e.eventHandlerOnElement}),T.tools=T.initTools(i),T.initEventEmitters(),T.firePageLoadEvent("aftertoolinit"),T.settings.privacyManagement&&T.prepareLoadPrivacyManager(),T.hasSelector&&T.domReady(T.eventEmitterBackgroundTasks),T.setListeners(),T.domReady(function(){T.poll(function(){T.backgroundTasks()},T.settings.recheckEvery||3e3)}),T.domReady(function(){T.domReadyFired=!0,T.pageBottomFired||T.pageBottom(),T.firePageLoadEvent("domready")}),T.addEventHandler(e,"load",function(){T.firePageLoadEvent("windowload")}),T.firePageLoadEvent("pagetop"),T.initialized=!0}},T.pageLoadPhases=["aftertoolinit","pagetop","pagebottom","domready","windowload"],T.loadEventBefore=function(e,t){return T.indexOf(T.pageLoadPhases,e)<=T.indexOf(T.pageLoadPhases,t)},T.flushPendingCalls=function(e){e.pending&&(T.each(e.pending,function(t){var n=t[0],i=t[1],a=t[2],r=t[3];n in e?e[n].apply(e,[i,a].concat(r)):e.emit?e.emit(n,i,a,r):T.notify("Failed to trigger "+n+" for tool "+e.id,1)}),delete e.pending)},T.setDebug=function(t){try{e.localStorage.setItem("sdsat_debug",t)}catch(n){T.notify("Cannot set debug mode: "+n.message,2)}},T.getUserAgent=function(){return navigator.userAgent},T.detectBrowserInfo=function(){function e(e){return function(t){for(var n in e){if(e.hasOwnProperty(n))if(e[n].test(t))return n}return"Unknown"}}var t=e({"IE Edge Mobile":/Windows Phone.*Edge/,"IE Edge":/Edge/,OmniWeb:/OmniWeb/,"Opera Mini":/Opera Mini/,"Opera Mobile":/Opera Mobi/,Opera:/Opera/,Chrome:/Chrome|CriOS|CrMo/,Firefox:/Firefox|FxiOS/,"IE Mobile":/IEMobile/,IE:/MSIE|Trident/,"Mobile Safari":/Mobile(\/[0-9A-z]+)? Safari/,Safari:/Safari/}),n=e({Blackberry:/BlackBerry|BB10/,"Symbian OS":/Symbian|SymbOS/,Maemo:/Maemo/,Android:/Android/,Linux:/ Linux /,Unix:/FreeBSD|OpenBSD|CrOS/,Windows:/[\( ]Windows /,iOS:/iPhone|iPad|iPod/,MacOS:/Macintosh;/}),i=e({Nokia:/Symbian|SymbOS|Maemo/,"Windows Phone":/Windows Phone/,Blackberry:/BlackBerry|BB10/,Android:/Android/,iPad:/iPad/,iPod:/iPod/,iPhone:/iPhone/,Desktop:/.*/}),a=T.getUserAgent();T.browserInfo={browser:t(a),os:n(a),deviceType:i(a)}},T.isHttps=function(){return"https:"==t.location.protocol},T.BaseTool=function(e){this.settings=e||{},this.forceLowerCase=T.settings.forceLowerCase,"forceLowerCase"in this.settings&&(this.forceLowerCase=this.settings.forceLowerCase)},T.BaseTool.prototype={triggerCommand:function(e,t,n){var i=this.settings||{};if(this.initialize&&this.isQueueAvailable()&&this.isQueueable(e)&&n&&T.loadEventBefore(n.type,i.loadOn))this.queueCommand(e,t,n);else{var a=e.command,r=this["$"+a],o=!!r&&r.escapeHtml,s=T.preprocessArguments(e.arguments,t,n,this.forceLowerCase,o);r?r.apply(this,[t,n].concat(s)):this.$missing$?this.$missing$(a,t,n,s):T.notify("Failed to trigger "+a+" for tool "+this.id,1)}},endPLPhase:function(){},isQueueable:function(e){return"cancelToolInit"!==e.command},isQueueAvailable:function(){return!this.initialized&&!this.initializing},flushQueue:function(){this.pending&&(T.each(this.pending,function(e){this.triggerCommand.apply(this,e)},this),this.pending=[])},queueCommand:function(e,t,n){this.pending||(this.pending=[]),this.pending.push([e,t,n])},$cancelToolInit:function(){this._cancelToolInit=!0}},e._satellite=T,i.orientationChange=function(t){var n=0===e.orientation?"portrait":"landscape";t.orientation=n,T.onEvent(t)},T.availableEventEmitters.push(i),a.prototype={initialize:function(){if(this.FB=this.FB||e.FB,this.FB&&this.FB.Event&&this.FB.Event.subscribe)return this.bind(),!0},bind:function(){this.FB.Event.subscribe("edge.create",function(){T.notify("tracking a facebook like",1),T.onEvent({type:"facebook.like",target:t})}),this.FB.Event.subscribe("edge.remove",function(){T.notify("tracking a facebook unlike",1),T.onEvent({type:"facebook.unlike",target:t})}),
this.FB.Event.subscribe("message.send",function(){T.notify("tracking a facebook share",1),T.onEvent({type:"facebook.send",target:t})})}},T.availableEventEmitters.push(a),r.prototype={backgroundTasks:function(){var e=this.eventHandler;T.each(this.rules,function(t){T.cssQuery(t.selector||"video",function(t){T.each(t,function(t){T.$data(t,"videoplayed.tracked")||(T.addEventHandler(t,"timeupdate",T.throttle(e,100)),T.$data(t,"videoplayed.tracked",!0))})})})},evalRule:function(e,t){var n=t.event,i=e.seekable,a=i.start(0),r=i.end(0),o=e.currentTime,s=t.event.match(/^videoplayed\(([0-9]+)([s%])\)$/);if(s){var c=s[2],l=Number(s[1]),u="%"===c?function(){return l<=100*(o-a)/(r-a)}:function(){return l<=o-a};!T.$data(e,n)&&u()&&(T.$data(e,n,!0),T.onEvent({type:n,target:e}))}},onUpdateTime:function(e){var t=this.rules,n=e.target;if(n.seekable&&0!==n.seekable.length)for(var i=0,a=t.length;i<a;i++)this.evalRule(n,t[i])}},T.availableEventEmitters.push(r),o.prototype.backgroundTasks=function(){T.each(this.rules,function(e){T.cssQuery(e.selector,function(e){if(e.length>0){var t=e[0];if(T.$data(t,"elementexists.seen"))return;T.$data(t,"elementexists.seen",!0),T.onEvent({type:"elementexists",target:t})}})})},T.availableEventEmitters.push(o),s.prototype={obue:!1,initialize:function(){this.attachCloseListeners()},obuePrevUnload:function(){},obuePrevBeforeUnload:function(){},newObueListener:function(){this.obue||(this.obue=!0,this.triggerBeacons())},attachCloseListeners:function(){this.prevUnload=e.onunload,this.prevBeforeUnload=e.onbeforeunload,e.onunload=T.bind(function(t){this.prevUnload&&setTimeout(T.bind(function(){this.prevUnload.call(e,t)},this),1),this.newObueListener()},this),e.onbeforeunload=T.bind(function(t){this.prevBeforeUnload&&setTimeout(T.bind(function(){this.prevBeforeUnload.call(e,t)},this),1),this.newObueListener()},this)},triggerBeacons:function(){T.fireEvent("leave",t)}},T.availableEventEmitters.push(s),c.prototype={initialize:function(){this.setupHistoryAPI(),this.setupHashChange()},fireIfURIChanged:function(){var e=T.URL();this.lastURL!==e&&(this.fireEvent(),this.lastURL=e)},fireEvent:function(){T.updateQueryParams(),T.onEvent({type:"locationchange",target:t})},setupSPASupport:function(){this.setupHistoryAPI(),this.setupHashChange()},setupHistoryAPI:function(){var t=e.history;t&&(t.pushState&&(this.originalPushState=t.pushState,t.pushState=this._pushState),t.replaceState&&(this.originalReplaceState=t.replaceState,t.replaceState=this._replaceState)),T.addEventHandler(e,"popstate",this._onPopState)},pushState:function(){var e=this.originalPushState.apply(history,arguments);return this.onPushState(),e},replaceState:function(){var e=this.originalReplaceState.apply(history,arguments);return this.onReplaceState(),e},setupHashChange:function(){T.addEventHandler(e,"hashchange",this._onHashChange)},onReplaceState:function(){setTimeout(this._fireIfURIChanged,0)},onPushState:function(){setTimeout(this._fireIfURIChanged,0)},onPopState:function(){setTimeout(this._fireIfURIChanged,0)},onHashChange:function(){setTimeout(this._fireIfURIChanged,0)},uninitialize:function(){this.cleanUpHistoryAPI(),this.cleanUpHashChange()},cleanUpHistoryAPI:function(){history.pushState===this._pushState&&(history.pushState=this.originalPushState),history.replaceState===this._replaceState&&(history.replaceState=this.originalReplaceState),T.removeEventHandler(e,"popstate",this._onPopState)},cleanUpHashChange:function(){T.removeEventHandler(e,"hashchange",this._onHashChange)}},T.availableEventEmitters.push(c),l.prototype.getStringifiedValue=e.JSON&&e.JSON.stringify||T.stringify,l.prototype.initPolling=function(){0!==this.dataElementsNames.length&&(this.dataElementsStore=this.getDataElementsValues(),T.poll(T.bind(this.checkDataElementValues,this),1e3))},l.prototype.getDataElementsValues=function(){var e={};return T.each(this.dataElementsNames,function(t){var n=T.getVar(t);e[t]=this.getStringifiedValue(n)},this),e},l.prototype.checkDataElementValues=function(){T.each(this.dataElementsNames,T.bind(function(e){var n=this.getStringifiedValue(T.getVar(e));n!==this.dataElementsStore[e]&&(this.dataElementsStore[e]=n,T.onEvent({type:"dataelementchange("+e+")",target:t}))},this))},T.availableEventEmitters.push(l),u.prototype={backgroundTasks:function(){var e=this;T.each(this.rules,function(t){var n=t[1],i=t[0];T.cssQuery(n,function(t){T.each(t,function(t){e.trackElement(t,i)})})},this)},trackElement:function(e,t){var n=this,i=T.$data(e,"hover.delays");i?T.contains(i,t)||i.push(t):(T.addEventHandler(e,"mouseover",function(t){n.onMouseOver(t,e)}),T.addEventHandler(e,"mouseout",function(t){n.onMouseOut(t,e)}),T.$data(e,"hover.delays",[t]))},onMouseOver:function(e,t){var n=e.target||e.srcElement,i=e.relatedTarget||e.fromElement;(t===n||T.containsElement(t,n))&&!T.containsElement(t,i)&&this.onMouseEnter(t)},onMouseEnter:function(e){var t=T.$data(e,"hover.delays"),n=T.map(t,function(t){return setTimeout(function(){T.onEvent({type:"hover("+t+")",target:e})},t)});T.$data(e,"hover.delayTimers",n)},onMouseOut:function(e,t){var n=e.target||e.srcElement,i=e.relatedTarget||e.toElement;(t===n||T.containsElement(t,n))&&!T.containsElement(t,i)&&this.onMouseLeave(t)},onMouseLeave:function(e){var t=T.$data(e,"hover.delayTimers");t&&T.each(t,function(e){clearTimeout(e)})}},T.availableEventEmitters.push(u),d.prototype={defineEvents:function(){this.oldBlurClosure=function(){T.fireEvent("tabblur",t)},this.oldFocusClosure=T.bind(function(){this.visibilityApiHasPriority?T.fireEvent("tabfocus",t):null!=T.visibility.getHiddenProperty()&&T.visibility.isHidden()||T.fireEvent("tabfocus",t)},this)},attachDetachModernEventListeners:function(e){T[0==e?"removeEventHandler":"addEventHandler"](t,T.visibility.getVisibilityEvent(),this.handleVisibilityChange)},attachDetachOlderEventListeners:function(t,n,i){var a=0==t?"removeEventHandler":"addEventHandler";T[a](n,i,this.oldBlurClosure),T[a](e,"focus",this.oldFocusClosure)},handleVisibilityChange:function(){T.visibility.isHidden()?T.fireEvent("tabblur",t):T.fireEvent("tabfocus",t)},setVisibilityApiPriority:function(t){this.visibilityApiHasPriority=t,this.attachDetachOlderEventListeners(!1,e,"blur"),this.attachDetachModernEventListeners(!1),t?null!=T.visibility.getHiddenProperty()?this.attachDetachModernEventListeners(!0):this.attachDetachOlderEventListeners(!0,e,"blur"):(this.attachDetachOlderEventListeners(!0,e,"blur"),null!=T.visibility.getHiddenProperty()&&this.attachDetachModernEventListeners(!0))},oldBlurClosure:null,oldFocusClosure:null,visibilityApiHasPriority:!0},T.availableEventEmitters.push(d),g.prototype={initialize:function(){var e=this.twttr;e&&"function"==typeof e.ready&&e.ready(T.bind(this.bind,this))},bind:function(){this.twttr.events.bind("tweet",function(e){e&&(T.notify("tracking a tweet button",1),T.onEvent({type:"twitter.tweet",target:t}))})}},T.availableEventEmitters.push(g),f.offset=function(n){var i=null,a=null;try{var r=n.getBoundingClientRect(),o=t,s=o.documentElement,c=o.body,l=e,u=s.clientTop||c.clientTop||0,d=s.clientLeft||c.clientLeft||0,g=l.pageYOffset||s.scrollTop||c.scrollTop,f=l.pageXOffset||s.scrollLeft||c.scrollLeft;i=r.top+g-u,a=r.left+f-d}catch(p){}return{top:i,left:a}},f.getViewportHeight=function(){var n=e.innerHeight,i=t.compatMode;return i&&(n="CSS1Compat"==i?t.documentElement.clientHeight:t.body.clientHeight),n},f.getScrollTop=function(){return t.documentElement.scrollTop?t.documentElement.scrollTop:t.body.scrollTop},f.isElementInDocument=function(e){return t.body.contains(e)},f.isElementInView=function(e){if(!f.isElementInDocument(e))return!1;var t=f.getViewportHeight(),n=f.getScrollTop(),i=f.offset(e).top,a=e.offsetHeight;return null!==i&&!(n>i+a||n+t<i)},f.prototype={backgroundTasks:function(){var e=this.elements;T.each(this.rules,function(t){T.cssQuery(t.selector,function(n){var i=0;T.each(n,function(t){T.contains(e,t)||(e.push(t),i++)}),i&&T.notify(t.selector+" added "+i+" elements.",1)})}),this.track()},checkInView:function(e,t,n){var i=T.$data(e,"inview");if(f.isElementInView(e)){i||T.$data(e,"inview",!0);var a=this;this.processRules(e,function(n,i,r){if(t||!n.inviewDelay)T.$data(e,i,!0),T.onEvent({type:"inview",target:e,inviewDelay:n.inviewDelay});else if(n.inviewDelay){var o=T.$data(e,r);o||(o=setTimeout(function(){a.checkInView(e,!0,n.inviewDelay)},n.inviewDelay),T.$data(e,r,o))}},n)}else{if(!f.isElementInDocument(e)){var r=T.indexOf(this.elements,e);this.elements.splice(r,1)}i&&T.$data(e,"inview",!1),this.processRules(e,function(t,n,i){var a=T.$data(e,i);a&&clearTimeout(a)},n)}},track:function(){for(var e=this.elements.length-1;e>=0;e--)this.checkInView(this.elements[e])},processRules:function(e,t,n){var i=this.rules;n&&(i=T.filter(this.rules,function(e){return e.inviewDelay==n})),T.each(i,function(n,i){var a=n.inviewDelay?"viewed_"+n.inviewDelay:"viewed",r="inview_timeout_id_"+i;T.$data(e,a)||T.matchesCss(n.selector,e)&&t(n,a,r)})}},T.availableEventEmitters.push(f),T.inherit(p,T.BaseTool),T.extend(p.prototype,{initialize:function(){var e=this.settings;if(!1!==this.settings.initTool){var t=e.url;t="string"==typeof t?T.basePath()+t:T.isHttps()?t.https:t.http,T.loadScript(t,T.bind(this.onLoad,this)),this.initializing=!0}else this.initialized=!0},isQueueAvailable:function(){return!this.initialized},onLoad:function(){this.initialized=!0,this.initializing=!1,this.settings.initialBeacon&&this.settings.initialBeacon(),this.flushQueue()},endPLPhase:function(e){e===this.settings.loadOn&&(T.notify(this.name+": Initializing at "+e,1),this.initialize())},$fire:function(e,t,n){this.initializing?this.queueCommand({command:"fire",arguments:[n]},e,t):n.call(this.settings,e,t)}}),T.availableTools.am=p,T.availableTools.adlens=p,T.availableTools.aem=p,T.availableTools.__basic=p,T.extend(h.prototype,{getInstance:function(){return this.instance},initialize:function(){var e,t=this.settings;T.notify("Visitor ID: Initializing tool",1),null!==(e=this.createInstance(t.mcOrgId,t.initVars))&&(t.customerIDs&&this.applyCustomerIDs(e,t.customerIDs),t.autoRequest&&e.getMarketingCloudVisitorID(),this.instance=e)},createInstance:function(e,t){if(!T.isString(e))return T.notify('Visitor ID: Cannot create instance using mcOrgId: "'+e+'"',4),null;e=T.replace(e),T.notify('Visitor ID: Create instance using mcOrgId: "'+e+'"',1),t=this.parseValues(t);var n=Visitor.getInstance(e,t);return T.notify("Visitor ID: Set variables: "+T.stringify(t),1),n},applyCustomerIDs:function(e,t){var n=this.parseIds(t);e.setCustomerIDs(n),T.notify("Visitor ID: Set Customer IDs: "+T.stringify(n),1)},parseValues:function(e){if(!1===T.isObject(e))return{};var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=T.replace(e[n]));return t},parseIds:function(e){var t={};if(!1===T.isObject(e))return{};for(var n in e)if(e.hasOwnProperty(n)){var i=T.replace(e[n].id);i!==e[n].id&&i&&(t[n]={},t[n].id=i,t[n].authState=Visitor.AuthState[e[n].authState])}return t}}),T.availableTools.visitor_id=h,T.inherit(m,T.BaseTool),T.extend(m.prototype,{name:"Default",$loadIframe:function(t,n,i){var a=i.pages,r=i.loadOn,o=T.bind(function(){T.each(a,function(e){this.loadIframe(t,n,e)},this)},this);r||o(),"domready"===r&&T.domReady(o),"load"===r&&T.addEventHandler(e,"load",o)},loadIframe:function(e,n,i){var a=t.createElement("iframe");a.style.display="none";var r=T.data.host,o=i.data,s=this.scriptURL(i.src),c=T.searchVariables(o,e,n);r&&(s=T.basePath()+s),s+=c,a.src=s;var l=t.getElementsByTagName("body")[0];l?l.appendChild(a):T.domReady(function(){t.getElementsByTagName("body")[0].appendChild(a)})},scriptURL:function(e){return(T.settings.scriptDir||"")+e},$loadScript:function(t,n,i){var a=i.scripts,r=i.sequential,o=i.loadOn,s=T.bind(function(){r?this.loadScripts(t,n,a):T.each(a,function(e){this.loadScripts(t,n,[e])},this)},this);o?"domready"===o?T.domReady(s):"load"===o&&T.addEventHandler(e,"load",s):s()},loadScripts:function(e,t,n){function i(){r.length>0&&a&&r.shift().call(e,t,o);var c=n.shift();if(c){var l=T.data.host,u=s.scriptURL(c.src);l&&(u=T.basePath()+u),a=c,T.loadScript(u,i)}}try{n=n.slice(0);var a,r=this.asyncScriptCallbackQueue,o=t.target||t.srcElement,s=this}catch(c){console.error("scripts is",T.stringify(n))}i()},$loadBlockingScript:function(e,t,n){var i=n.scripts;n.loadOn;T.bind(function(){T.each(i,function(n){this.loadBlockingScript(e,t,n)},this)},this)()},loadBlockingScript:function(e,t,n){var i=this.scriptURL(n.src),a=T.data.host,r=t.target||t.srcElement;a&&(i=T.basePath()+i),this.argsForBlockingScripts.push([e,t,r]),T.loadScriptSync(i)},pushAsyncScript:function(e){this.asyncScriptCallbackQueue.push(e)},pushBlockingScript:function(e){var t=this.argsForBlockingScripts.shift(),n=t[0];e.apply(n,t.slice(1))},$writeHTML:T.escapeHtmlParams(function(e,n){if(!T.domReadyFired&&t.write)if("pagebottom"===n.type||"pagetop"===n.type)for(var i=2,a=arguments.length;i<a;i++){var r=arguments[i].html;r=T.replace(r,e,n),t.write(r)}else T.notify("You can only use writeHTML on the `pagetop` and `pagebottom` events.",1);else T.notify("Command writeHTML failed. You should try appending HTML using the async option.",1)}),linkNeedsDelayActivate:function(t,n){n=n||e;var i=t.tagName,a=t.getAttribute("target"),r=t.getAttribute("href");return(!i||"a"===i.toLowerCase())&&(!!r&&(!a||"_blank"!==a&&("_top"===a?n.top===n:"_parent"!==a&&("_self"===a||(!n.name||a===n.name)))))},$delayActivateLink:function(e,t){if(this.linkNeedsDelayActivate(e)){T.preventDefault(t);var n=T.settings.linkDelay||100;setTimeout(function(){T.setLocation(e.href)},n)}},isQueueable:function(e){return"writeHTML"!==e.command}}),T.availableTools["default"]=m,T.inherit(v,T.BaseTool),T.extend(v.prototype,{name:"Nielsen",endPLPhase:function(e){switch(e){case"pagetop":this.initialize();break;case"pagebottom":this.enableTracking&&(this.queueCommand({command:"sendFirstBeacon",arguments:[]}),this.flushQueueWhenReady())}},defineListeners:function(){this.onTabFocus=T.bind(function(){this.notify("Tab visible, sending view beacon when ready",1),this.tabEverVisible=!0,this.flushQueueWhenReady()},this),this.onPageLeave=T.bind(function(){this.notify("isHuman? : "+this.isHuman(),1),this.isHuman()&&this.sendDurationBeacon()},this),this.onHumanDetectionChange=T.bind(function(e){this==e.target.target&&(this.human=e.target.isHuman)},this)},initialize:function(){this.initializeTracking(),this.initializeDataProviders(),this.initializeNonHumanDetection(),this.tabEverVisible=T.visibility.isVisible(),this.tabEverVisible?this.notify("Tab visible, sending view beacon when ready",1):T.bindEventOnce("tabfocus",this.onTabFocus),this.initialized=!0},initializeTracking:function(){this.initialized||(this.notify("Initializing tracking",1),this.addRemovePageLeaveEvent(this.enableTracking),this.addRemoveHumanDetectionChangeEvent(this.enableTracking),this.initialized=!0)},initializeDataProviders:function(){var e,t=this.getAnalyticsTool();this.dataProvider.register(new v.DataProvider.VisitorID(T.getVisitorId())),t?(e=new v.DataProvider.Generic("rsid",function(){return t.settings.account}),this.dataProvider.register(e)):this.notify("Missing integration with Analytics: rsid will not be sent.")},initializeNonHumanDetection:function(){T.nonhumandetection?(T.nonhumandetection.init(),this.setEnableNonHumanDetection(0!=this.settings.enableNonHumanDetection),this.settings.nonHumanDetectionDelay>0&&this.setNonHumanDetectionDelay(1e3*parseInt(this.settings.nonHumanDetectionDelay))):this.notify("NHDM is not available.")},getAnalyticsTool:function(){if(this.settings.integratesWith)return T.tools[this.settings.integratesWith]},flushQueueWhenReady:function(){this.enableTracking&&this.tabEverVisible&&T.poll(T.bind(function(){if(this.isReadyToTrack())return this.flushQueue(),!0},this),100,20)},isReadyToTrack:function(){return this.tabEverVisible&&this.dataProvider.isReady()},$setVars:function(e,t,n){for(var i in n){var a=n[i];"function"==typeof a&&(a=a()),this.settings[i]=a}this.notify("Set variables done",2),this.prepareContextData()},$setEnableTracking:function(e,t,n){this.notify("Will"+(n?"":" not")+" track time on page",1),this.enableTracking!=n&&(this.addRemovePageLeaveEvent(n),this.addRemoveHumanDetectionChangeEvent(n),this.enableTracking=n)},$sendFirstBeacon:function(){this.sendViewBeacon()},setEnableNonHumanDetection:function(e){e?T.nonhumandetection.register(this):T.nonhumandetection.unregister(this)},setNonHumanDetectionDelay:function(e){T.nonhumandetection.register(this,e)},addRemovePageLeaveEvent:function(e){this.notify((e?"Attach onto":"Detach from")+" page leave event",1),T[0==e?"unbindEvent":"bindEvent"]("leave",this.onPageLeave)},addRemoveHumanDetectionChangeEvent:function(e){this.notify((e?"Attach onto":"Detach from")+" human detection change event",1),T[0==e?"unbindEvent":"bindEvent"]("humandetection.change",this.onHumanDetectionChange)},sendViewBeacon:function(){this.notify("Tracked page view.",1),this.sendBeaconWith()},sendDurationBeacon:function(){if(T.timetracking&&"function"==typeof T.timetracking.timeOnPage&&null!=T.timetracking.timeOnPage()){this.notify("Tracked close",1),this.sendBeaconWith({timeOnPage:Math.round(T.timetracking.timeOnPage()/1e3),duration:"D",timer:"timer"});var e;for(e=0;e<this.magicConst;e++)"0"}else this.notify("Could not track close due missing time on page",5)},sendBeaconWith:function(e){this.enableTracking&&this[this.beaconMethod].call(this,this.prepareUrl(e))},plainBeacon:function(e){var t=new Image;t.src=e,t.width=1,t.height=1,t.alt=""},navigatorSendBeacon:function(e){navigator.sendBeacon(e)},prepareUrl:function(e){var t=this.settings;return T.extend(t,this.dataProvider.provide()),T.extend(t,e),this.preparePrefix(this.settings.collectionServer)+this.adapt.convertToURI(this.adapt.toNielsen(this.substituteVariables(t)))},preparePrefix:function(e){return"//"+encodeURIComponent(e)+".imrworldwide.com/cgi-bin/gn?"},substituteVariables:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=T.replace(e[n]));return t},prepareContextData:function(){if(this.getAnalyticsTool()){var e=this.settings;e.sdkVersion=_satellite.publishDate,this.getAnalyticsTool().$setVars(null,null,{contextData:this.adapt.toAnalytics(this.substituteVariables(e))})}else this.notify("Adobe Analytics missing.")},isHuman:function(){return this.human},onTabFocus:function(){},onPageLeave:function(){},onHumanDetectionChange:function(){},notify:function(e,t){T.notify(this.logPrefix+e,t)},beaconMethod:"plainBeacon",adapt:null,enableTracking:!1,logPrefix:"Nielsen: ",tabEverVisible:!1,human:!0,magicConst:2e6}),v.DataProvider={},v.DataProvider.Generic=function(e,t){this.key=e,this.valueFn=t},T.extend(v.DataProvider.Generic.prototype,{isReady:function(){return!0},getValue:function(){return this.valueFn()},provide:function(){this.isReady()||v.prototype.notify("Not yet ready to provide value for: "+this.key,5);var e={};return e[this.key]=this.getValue(),e}}),v.DataProvider.VisitorID=function(e,t,n){this.key=t||"uuid",this.visitorInstance=e,this.visitorInstance&&(this.visitorId=e.getMarketingCloudVisitorID([this,this._visitorIdCallback])),this.fallbackProvider=n||new v.UUID},T.inherit(v.DataProvider.VisitorID,v.DataProvider.Generic),T.extend(v.DataProvider.VisitorID.prototype,{isReady:function(){return null===this.visitorInstance||!!this.visitorId},getValue:function(){return this.visitorId||this.fallbackProvider.get()},_visitorIdCallback:function(e){this.visitorId=e}}),v.DataProvider.Aggregate=function(){this.providers=[];for(var e=0;e<arguments.length;e++)this.register(arguments[e])},T.extend(v.DataProvider.Aggregate.prototype,{register:function(e){this.providers.push(e)},isReady:function(){return T.every(this.providers,function(e){return e.isReady()})},provide:function(){var e={};return T.each(this.providers,function(t){T.extend(e,t.provide())}),e}}),v.UUID=function(){},T.extend(v.UUID.prototype,{generate:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},get:function(){var e=T.readCookie(this.key("uuid"));return e||(e=this.generate(),T.setCookie(this.key("uuid"),e),e)},key:function(e){return"_dtm_nielsen_"+e}}),v.DataAdapters=function(){},T.extend(v.DataAdapters.prototype,{toNielsen:function(e){var t=(new Date).getTime(),i={c6:"vc,",c13:"asid,",c15:"apn,",c27:"cln,",c32:"segA,",c33:"segB,",c34:"segC,",c35:"adrsid,",c29:"plid,",c30:"bldv,",c40:"adbid,"},a={ci:e.clientId,c6:e.vcid,c13:e.appId,c15:e.appName,prv:1,forward:0,ad:0,cr:e.duration||"V",rt:"text",st:"dcr",prd:"dcr",r:t,at:e.timer||"view",c16:e.sdkVersion,c27:e.timeOnPage||0,c40:e.uuid,c35:e.rsid,ti:t,sup:0,c32:e.segmentA,c33:e.segmentB,c34:e.segmentC,asn:e.assetName,c29:e.playerID,c30:e.buildVersion};for(key in a)if(a[key]!==n&&null!=a[key]&&a[key]!==n&&null!=a&&""!=a){var r=encodeURIComponent(a[key]);i.hasOwnProperty(key)&&r&&(r=i[key]+r),a[key]=r}return this.filterObject(a)},toAnalytics:function(e){return this.filterObject({"a.nielsen.clientid":e.clientId,"a.nielsen.vcid":e.vcid,"a.nielsen.appid":e.appId,"a.nielsen.appname":e.appName,"a.nielsen.accmethod":"0","a.nielsen.ctype":"text","a.nielsen.sega":e.segmentA,"a.nielsen.segb":e.segmentB,"a.nielsen.segc":e.segmentC,"a.nielsen.asset":e.assetName})},convertToURI:function(e){if(!1===T.isObject(e))return"";var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return t.join("&")},filterObject:function(e){for(var t in e)!e.hasOwnProperty(t)||null!=e[t]&&e[t]!==n||delete e[t];return e}}),T.availableTools.nielsen=v,T.inherit(b,T.BaseTool),T.extend(b.prototype,{name:"tnt",endPLPhase:function(e){"aftertoolinit"===e&&this.initialize()},initialize:function(){T.notify("Test & Target: Initializing",1),this.initializeTargetPageParams(),this.load()},initializeTargetPageParams:function(){e.targetPageParams&&this.updateTargetPageParams(this.parseTargetPageParamsResult(e.targetPageParams())),this.updateTargetPageParams(this.settings.pageParams),this.setTargetPageParamsFunction()},load:function(){var e=this.getMboxURL(this.settings.mboxURL);!1!==this.settings.initTool?this.settings.loadSync?(T.loadScriptSync(e),this.onScriptLoaded()):(T.loadScript(e,T.bind(this.onScriptLoaded,this)),this.initializing=!0):this.initialized=!0},getMboxURL:function(t){var n=t;return T.isObject(t)&&(n="https:"===e.location.protocol?t.https:t.http),n.match(/^https?:/)?n:T.basePath()+n},onScriptLoaded:function(){T.notify("Test & Target: loaded.",1),this.flushQueue(),this.initialized=!0,this.initializing=!1},$addMbox:function(e,t,n){var i=n.mboxGoesAround,a=i+"{visibility: hidden;}",r=this.appendStyle(a);i in this.styleElements||(this.styleElements[i]=r),this.initialized?this.$addMBoxStep2(null,null,n):this.initializing&&this.queueCommand({command:"addMBoxStep2",arguments:[n]},e,t)},$addMBoxStep2:function(n,i,a){var r=this.generateID(),o=this;T.addEventHandler(e,"load",T.bind(function(){T.cssQuery(a.mboxGoesAround,function(n){var i=n[0];if(i){var s=t.createElement("div");s.id=r,i.parentNode.replaceChild(s,i),s.appendChild(i),e.mboxDefine(r,a.mboxName);var c=[a.mboxName];a.arguments&&(c=c.concat(a.arguments)),e.mboxUpdate.apply(null,c),o.reappearWhenCallComesBack(i,r,a.timeout,a)}})},this)),this.lastMboxID=r},$addTargetPageParams:function(e,t,n){this.updateTargetPageParams(n)},generateID:function(){return"_sdsat_mbox_"+String(Math.random()).substring(2)+"_"},appendStyle:function(e){var n=t.getElementsByTagName("head")[0],i=t.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),n.appendChild(i),i},reappearWhenCallComesBack:function(e,t,n,i){function a(){var e=r.styleElements[i.mboxGoesAround];e&&(e.parentNode.removeChild(e),delete r.styleElements[i.mboxGoesAround])}var r=this;T.cssQuery('script[src*="omtrdc.net"]',function(e){var t=e[0];if(t){T.scriptOnLoad(t.src,t,function(){T.notify("Test & Target: request complete",1),a(),clearTimeout(i)});var i=setTimeout(function(){T.notify("Test & Target: bailing after "+n+"ms",1),a()},n)}else T.notify("Test & Target: failed to find T&T ajax call, bailing",1),a()})},updateTargetPageParams:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[T.replace(n)]=T.replace(e[n]));T.extend(this.targetPageParamsStore,t)},getTargetPageParams:function(){return this.targetPageParamsStore},setTargetPageParamsFunction:function(){e.targetPageParams=T.bind(this.getTargetPageParams,this)},parseTargetPageParamsResult:function(e){var t=e;return T.isArray(e)&&(e=e.join("&")),T.isString(e)&&(t=T.parseQueryParams(e)),t}}),T.availableTools.tnt=b,T.inherit(y,T.BaseTool),T.extend(y.prototype,{name:"SC",endPLPhase:function(e){e===this.settings.loadOn&&this.initialize(e)},initialize:function(t){if(!this._cancelToolInit)if(this.settings.initVars=this.substituteVariables(this.settings.initVars,{type:t}),!1!==this.settings.initTool){var n=this.settings.sCodeURL||T.basePath()+"s_code.js";"object"==typeof n&&(n="https:"===e.location.protocol?n.https:n.http),n.match(/^https?:/)||(n=T.basePath()+n),this.settings.initVars&&this.$setVars(null,null,this.settings.initVars),T.loadScript(n,T.bind(this.onSCodeLoaded,this)),this.initializing=!0}else this.initializing=!0,this.pollForSC()},getS:function(t,n){var i=n&&n.hostname||e.location.hostname,a=this.concatWithToolVarBindings(n&&n.setVars||this.varBindings),r=n&&n.addEvent||this.events,o=this.getAccount(i),s=e.s_gi;if(!s)return null;if(this.isValidSCInstance(t)||(t=null),!o&&!t)return T.notify("Adobe Analytics: tracker not initialized because account was not found",1),null;t=t||s(o);var c="D"+T.appVersion;return"undefined"!=typeof t.tagContainerMarker?t.tagContainerMarker=c:"string"==typeof t.version&&t.version.substring(t.version.length-5)!=="-"+c&&(t.version+="-"+c),t.sa&&!0!==this.settings.skipSetAccount&&!1!==this.settings.initTool&&t.sa(this.settings.account),this.applyVarBindingsOnTracker(t,a),r.length>0&&(t.events=r.join(",")),T.getVisitorId()&&(t.visitor=T.getVisitorId()),t},onSCodeLoaded:function(e){this.initialized=!0,this.initializing=!1;var t=["Adobe Analytics: loaded",e?" (manual)":"","."];T.notify(t.join(""),1),T.fireEvent(this.id+".load",this.getS()),e||(this.flushQueueExceptTrackLink(),this.sendBeacon()),this.flushQueue()},getAccount:function(t){return e.s_account?e.s_account:t&&this.settings.accountByHost&&this.settings.accountByHost[t]||this.settings.account},getTrackingServer:function(){var t=this,n=t.getS();if(n){if(n.ssl&&n.trackingServerSecure)return n.trackingServerSecure;if(n.trackingServer)return n.trackingServer}var i,a=t.getAccount(e.location.hostname);if(!a)return null;var r,o,s="",c=n&&n.dc;return(r=(i=a).indexOf(","))>=0&&(i=i.gb(0,r)),i=i.replace(/[^A-Za-z0-9]/g,""),s||(s="2o7.net"),c=c?(""+c).toLowerCase():"d1","2o7.net"==s&&("d1"==c?c="112":"d2"==c&&(c="122"),o=""),r=i+"."+c+"."+o+s},sendBeacon:function(){var t=this.getS(e[this.settings.renameS||"s"]);t?this.settings.customInit&&!1===this.settings.customInit(t)?T.notify("Adobe Analytics: custom init suppressed beacon",1):(this.settings.executeCustomPageCodeFirst&&this.applyVarBindingsOnTracker(t,this.varBindings),this.executeCustomSetupFuns(t),t.t(),this.clearVarBindings(),this.clearCustomSetup(),T.notify("Adobe Analytics: tracked page view",1)):T.notify("Adobe Analytics: page code not loaded",1)},pollForSC:function(){T.poll(T.bind(function(){if("function"==typeof e.s_gi)return this.onSCodeLoaded(!0),!0},this))},flushQueueExceptTrackLink:function(){if(this.pending){for(var e=[],t=0;t<this.pending.length;t++){var n=this.pending[t];"trackLink"===n[0].command?e.push(n):this.triggerCommand.apply(this,n)}this.pending=e}},isQueueAvailable:function(){return!this.initialized},substituteVariables:function(e,t){var n={};for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];n[i]=T.replace(a,location,t)}return n},$setVars:function(e,t,n){for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];"function"==typeof a&&(a=a()),this.varBindings[i]=a}T.notify("Adobe Analytics: set variables.",2)},$customSetup:function(e,t,n){this.customSetupFuns.push(function(i){n.call(e,t,i)})},isValidSCInstance:function(e){return!!e&&"function"==typeof e.t&&"function"==typeof e.tl},concatWithToolVarBindings:function(e){var t=this.settings.initVars||{};return T.map(["trackingServer","trackingServerSecure"],function(n){t[n]&&!e[n]&&(e[n]=t[n])}),e},applyVarBindingsOnTracker:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},clearVarBindings:function(){this.varBindings={}},clearCustomSetup:function(){this.customSetupFuns=[]},executeCustomSetupFuns:function(t){T.each(this.customSetupFuns,function(n){n.call(e,t)})},$trackLink:function(e,t,n){var i=(n=n||{}).type,a=n.linkName;!a&&e&&e.nodeName&&"a"===e.nodeName.toLowerCase()&&(a=e.innerHTML),a||(a="link clicked");var r=n&&n.setVars,o=n&&n.addEvent||[],s=this.getS(null,{setVars:r,addEvent:o});if(s){var c=s.linkTrackVars,l=s.linkTrackEvents,u=this.definedVarNames(r);n&&n.customSetup&&n.customSetup.call(e,t,s),o.length>0&&u.push("events"),s.products&&u.push("products"),u=this.mergeTrackLinkVars(s.linkTrackVars,u),o=this.mergeTrackLinkVars(s.linkTrackEvents,o),s.linkTrackVars=this.getCustomLinkVarsList(u);var d=T.map(o,function(e){return e.split(":")[0]});s.linkTrackEvents=this.getCustomLinkVarsList(d),s.tl(!0,i||"o",a),T.notify(["Adobe Analytics: tracked link ","using: linkTrackVars=",T.stringify(s.linkTrackVars),"; linkTrackEvents=",T.stringify(s.linkTrackEvents)].join(""),1),s.linkTrackVars=c,s.linkTrackEvents=l}else T.notify("Adobe Analytics: page code not loaded",1)},mergeTrackLinkVars:function(e,t){return e&&(t=e.split(",").concat(t)),t},getCustomLinkVarsList:function(e){var t=T.indexOf(e,"None");return t>-1&&e.length>1&&e.splice(t,1),e.join(",")},definedVarNames:function(e){e=e||this.varBindings;var t=[];for(var n in e)e.hasOwnProperty(n)&&/^(eVar[0-9]+)|(prop[0-9]+)|(hier[0-9]+)|campaign|purchaseID|channel|server|state|zip|pageType$/.test(n)&&t.push(n);return t},$trackPageView:function(e,t,n){var i=n&&n.setVars,a=n&&n.addEvent||[],r=this.getS(null,{setVars:i,addEvent:a});r?(r.linkTrackVars="",r.linkTrackEvents="",this.executeCustomSetupFuns(r),n&&n.customSetup&&n.customSetup.call(e,t,r),r.t(),this.clearVarBindings(),this.clearCustomSetup(),T.notify("Adobe Analytics: tracked page view",1)):T.notify("Adobe Analytics: page code not loaded",1)},$postTransaction:function(t,n,i){var a=T.data.transaction=e[i],r=this.varBindings,o=this.settings.fieldVarMapping;if(T.each(a.items,function(e){this.products.push(e)},this),r.products=T.map(this.products,function(e){var t=[];if(o&&o.item)for(var n in o.item)if(o.item.hasOwnProperty(n)){var i=o.item[n];t.push(i+"="+e[n]),"event"===i.substring(0,5)&&this.events.push(i)}var a=["",e.product,e.quantity,e.unitPrice*e.quantity];return t.length>0&&a.push(t.join("|")),a.join(";")},this).join(","),o&&o.transaction){var s=[];for(var c in o.transaction)if(o.transaction.hasOwnProperty(c)){i=o.transaction[c];s.push(i+"="+a[c]),"event"===i.substring(0,5)&&this.events.push(i)}r.products.length>0&&(r.products+=","),r.products+=";;;;"+s.join("|")}},$addEvent:function(){for(var e=2,t=arguments.length;e<t;e++)this.events.push(arguments[e])},$addProduct:function(){for(var e=2,t=arguments.length;e<t;e++)this.products.push(arguments[e])}}),T.availableTools.sc=y,T.inherit(w,T.BaseTool),T.extend(w.prototype,{name:"GA",initialize:function(){var t=this.settings,n=e._gaq,i=t.initCommands||[],a=t.customInit;if(n||(_gaq=[]),this.isSuppressed())T.notify("GA: page code not loaded(suppressed).",1);else{if(!n&&!w.scriptLoaded){var r=T.isHttps(),o=(r?"https://ssl":"http://www")+".google-analytics.com/ga.js";t.url&&(o=r?t.url.https:t.url.http),T.loadScript(o),w.scriptLoaded=!0,T.notify("GA: page code loaded.",1)}t.domain;var s=t.trackerName,c=I.allowLinker(),l=T.replace(t.account,location);T.settings.domainList;_gaq.push([this.cmd("setAccount"),l]),c&&_gaq.push([this.cmd("setAllowLinker"),c]),_gaq.push([this.cmd("setDomainName"),I.cookieDomain()]),T.each(i,function(e){var t=[this.cmd(e[0])].concat(T.preprocessArguments(e.slice(1),location,null,this.forceLowerCase));_gaq.push(t)},this),a&&(this.suppressInitialPageView=!1===a(_gaq,s)),t.pageName&&this.$overrideInitialPageView(null,null,t.pageName)}this.initialized=!0,T.fireEvent(this.id+".configure",_gaq,s)},isSuppressed:function(){return this._cancelToolInit||!1===this.settings.initTool},tracker:function(){return this.settings.trackerName},cmd:function(e){var t=this.tracker();return t?t+"._"+e:"_"+e},$overrideInitialPageView:function(e,t,n){this.urlOverride=n},trackInitialPageView:function(){if(!this.isSuppressed()&&!this.suppressInitialPageView)if(this.urlOverride){var e=T.preprocessArguments([this.urlOverride],location,null,this.forceLowerCase);this.$missing$("trackPageview",null,null,e)}else this.$missing$("trackPageview")},endPLPhase:function(e){
e===this.settings.loadOn&&(T.notify("GA: Initializing at "+e,1),this.initialize(),this.flushQueue(),this.trackInitialPageView())},call:function(e,t,n,i){if(!this._cancelToolInit){this.settings;var a=this.tracker(),r=this.cmd(e);i=i?[r].concat(i):[r];_gaq.push(i),a?T.notify("GA: sent command "+e+" to tracker "+a+(i.length>1?" with parameters ["+i.slice(1).join(", ")+"]":"")+".",1):T.notify("GA: sent command "+e+(i.length>1?" with parameters ["+i.slice(1).join(", ")+"]":"")+".",1)}},$missing$:function(e,t,n,i){this.call(e,t,n,i)},$postTransaction:function(t,n,i){var a=T.data.customVars.transaction=e[i];this.call("addTrans",t,n,[a.orderID,a.affiliation,a.total,a.tax,a.shipping,a.city,a.state,a.country]),T.each(a.items,function(e){this.call("addItem",t,n,[e.orderID,e.sku,e.product,e.category,e.unitPrice,e.quantity])},this),this.call("trackTrans",t,n)},delayLink:function(e,t){var n=this;if(I.allowLinker()&&e.hostname.match(this.settings.linkerDomains)&&!T.isSubdomainOf(e.hostname,location.hostname)){T.preventDefault(t);var i=T.settings.linkDelay||100;setTimeout(function(){n.call("link",e,t,[e.href])},i)}},popupLink:function(t,n){if(e._gat){T.preventDefault(n);var i=this.settings.account,a=e._gat._createTracker(i)._getLinkerUrl(t.href);e.open(a)}},$link:function(e,t){"_blank"===e.getAttribute("target")?this.popupLink(e,t):this.delayLink(e,t)},$trackEvent:function(e,t){var n=Array.prototype.slice.call(arguments,2);if(n.length>=4&&null!=n[3]){var i=parseInt(n[3],10);T.isNaN(i)&&(i=1),n[3]=i}this.call("trackEvent",e,t,n)}}),T.availableTools.ga=w,T.inherit(k,T.BaseTool),T.extend(k.prototype,{name:"GAUniversal",endPLPhase:function(e){e===this.settings.loadOn&&(T.notify("GAU: Initializing at "+e,1),this.initialize(),this.flushQueue(),this.trackInitialPageView())},getTrackerName:function(){return this.settings.trackerSettings.name||""},isPageCodeLoadSuppressed:function(){return!1===this.settings.initTool||!0===this._cancelToolInit},initialize:function(){if(this.isPageCodeLoadSuppressed())return this.initialized=!0,void T.notify("GAU: Page code not loaded (suppressed).",1);var t="ga";e[t]=e[t]||this.createGAObject(),e.GoogleAnalyticsObject=t,T.notify("GAU: Page code loaded.",1),T.loadScriptOnce(this.getToolUrl());var n=this.settings;(I.allowLinker()&&!1!==n.allowLinker?this.createAccountForLinker():this.createAccount(),this.executeInitCommands(),n.customInit)&&(!1===(0,n.customInit)(e[t],this.getTrackerName())&&(this.suppressInitialPageView=!0));this.initialized=!0},createGAObject:function(){var e=function(){e.q.push(arguments)};return e.q=[],e.l=1*new Date,e},createAccount:function(){this.create()},createAccountForLinker:function(){var e={};I.allowLinker()&&(e.allowLinker=!0),this.create(e),this.call("require","linker"),this.call("linker:autoLink",this.autoLinkDomains(),!1,!0)},create:function(e){var t=this.settings.trackerSettings;(t=T.preprocessArguments([t],location,null,this.forceLowerCase)[0]).trackingId=T.replace(this.settings.trackerSettings.trackingId,location),t.cookieDomain||(t.cookieDomain=I.cookieDomain()),T.extend(t,e||{}),this.call("create",t)},autoLinkDomains:function(){var e=location.hostname;return T.filter(T.settings.domainList,function(t){return t!==e})},executeInitCommands:function(){var e=this.settings;e.initCommands&&T.each(e.initCommands,function(e){var t=e.splice(2,e.length-2);e=e.concat(T.preprocessArguments(t,location,null,this.forceLowerCase)),this.call.apply(this,e)},this)},trackInitialPageView:function(){this.suppressInitialPageView||this.isPageCodeLoadSuppressed()||this.call("send","pageview")},call:function(){"function"==typeof ga?this.isCallSuppressed()||(arguments[0]=this.cmd(arguments[0]),this.log(T.toArray(arguments)),ga.apply(e,arguments)):T.notify("GA Universal function not found!",4)},isCallSuppressed:function(){return!0===this._cancelToolInit},$missing$:function(e,t,n,i){i=i||[],i=[e].concat(i),this.call.apply(this,i)},getToolUrl:function(){var e=this.settings,t=T.isHttps();return e.url?t?e.url.https:e.url.http:(t?"https://ssl":"http://www")+".google-analytics.com/analytics.js"},cmd:function(e){var t=["send","set","get"],n=this.getTrackerName();return n&&-1!==T.indexOf(t,e)?n+"."+e:e},log:function(e){var t="GA Universal: sent command "+e[0]+" to tracker "+(this.getTrackerName()||"default");if(e.length>1){T.stringify(e.slice(1));t+=" with parameters "+T.stringify(e.slice(1))}t+=".",T.notify(t,1)}}),T.availableTools.ga_universal=k;var I={allowLinker:function(){return T.hasMultipleDomains()},cookieDomain:function(){var t=T.settings.domainList,n=T.find(t,function(t){var n=e.location.hostname;return T.equalsIgnoreCase(n.slice(n.length-t.length),t)});return n?"."+n:"auto"}};T.ecommerce={addItem:function(){var e=[].slice.call(arguments);T.onEvent({type:"ecommerce.additem",target:e})},addTrans:function(){var e=[].slice.call(arguments);T.data.saleData.sale={orderId:e[0],revenue:e[2]},T.onEvent({type:"ecommerce.addtrans",target:e})},trackTrans:function(){T.onEvent({type:"ecommerce.tracktrans",target:[]})}},T.visibility={isHidden:function(){var e=this.getHiddenProperty();return!!e&&t[e]},isVisible:function(){return!this.isHidden()},getHiddenProperty:function(){var e=["webkit","moz","ms","o"];if("hidden"in t)return"hidden";for(var n=0;n<e.length;n++)if(e[n]+"Hidden"in t)return e[n]+"Hidden";return null},getVisibilityEvent:function(){var e=this.getHiddenProperty();return e?e.replace(/[H|h]idden/,"")+"visibilitychange":null}},_satellite.init({tools:{"1d83a16e39093c9f07d3715c19e44a17":{engine:"sc",loadOn:"pagebottom",account:"nycgoprod",euCookie:!1,sCodeURL:"ca59a6b147938186adc2f9cba55c51bc214ca46a/s-code-contents-e5516adf9a66bf655c3de15704ee91abd5f186fd.js",renameS:"s",initVars:{charSet:"UTF-8",currencyCode:"USD",trackingServer:"metrics.nycgo.com",trackingServerSecure:"smetrics.nycgo.com",trackInlineStats:!0,trackDownloadLinks:!0,linkDownloadFileTypes:"avi,css,csv,doc,docx,eps,exe,jpg,js,m4v,mov,mp3,pdf,png,ppt,pptx,rar,svg,tab,txt,vsd,vxd,wav,wma,wmv,xls,xlsx,xml,zip",trackExternalLinks:!1,linkLeaveQueryString:!1,dynamicVariablePrefix:"D="},skipSetAccount:!0,customInit:function(e){e.eVar47=e.getPreviousValue(e.pageName,"gpv",""),e.prop49="D=v47",_satellite.getVar("content: page type")&&("errorPage"==_satellite.getVar("content: page type")?e.pageType="errorPage":e.eVar42=_satellite.getVar("content: page type")),e.products=e.categorizePage(),e.ActivityMap.regionIDAttribute="data-lpos",e.ActivityMap.link=function(e){var t;return e&&"A"===e.tagName.toUpperCase()&&(t=e.getAttribute("data-lid")||e.getAttribute("data-linkname")||e.getAttribute("title")||e.innerText||e.textContent),t},e.getQueryParam("cid")?e.campaign=e.getQueryParam("cid"):e.getQueryParam("utm_medium,utm_campaign,utm_content,utm_source,utm_term",":")&&(e.campaign=e.getQueryParam("utm_medium,utm_campaign,utm_content,utm_source,utm_term",":")),e.campaign=e.getValOnce(e.campaign,"s_campaign",30)}},df8d6aa95c1ef095b9676e912bd9f25b32d58582:{engine:"tnt",mboxURL:"ca59a6b147938186adc2f9cba55c51bc214ca46a/mbox-contents-df8d6aa95c1ef095b9676e912bd9f25b32d58582.js",loadSync:!0,pageParams:{}}},pageLoadRules:[{name:"AdWords, Facebook, Taboola, TripAdvisor",trigger:[{command:"writeHTML",arguments:[{html:"<!-- Adwords and Doubleclick Pixel Code -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=AW-829404768\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  \n  gtag('config', 'AW-829404768', {conversion_cookie_prefix: 'A'});\n  gtag('config', 'DC-8262113', {conversion_cookie_prefix: 'B'});\n</script>\n<!-- End Adwords and Doubleclick Pixel Code -->\n"},{html:"<!-- Adwords Event Script - Page View -->\n<script>gtag('event', 'conversion', {'send_to': 'AW-829404768/gt0MCMeYr3kQ4Oy-iwM'});</script>"},{html:'<!-- Facebook Pixel Code -->\n<script>\n!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?\nn.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;\nn.push=n;n.loaded=!0;n.version=\'2.0\';n.queue=[];t=b.createElement(e);t.async=!0;\nt.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,\ndocument,\'script\',\'https://connect.facebook.net/en_US/fbevents.js\');\nfbq(\'init\', \'173243596413461\');\nfbq(\'init\', \'1853655394945282\');\nfbq(\'track\', "PageView");</script>\n<noscript><img height="1" width="1" style="display:none"\nsrc="https://www.facebook.com/tr?id=1853655394945282&ev=PageView&noscript=1"\n/><img height="1" width="1" style="display:none"\nsrc="https://www.facebook.com/tr?id=173243596413461&ev=PageView&noscript=1"\n/></noscript>\n<!-- End Facebook Pixel Code -->'},{html:'<!-- Activity name for this tag: TA_New_York_City_and_Company_UniqueUsers_Feb2019 -->\n<script type=\'text/javascript\'>\nvar axel = Math.random()+"";\nvar a = axel * 10000000000000;\ndocument.write(\'<img src="https://pubads.g.doubleclick.net/activity;xsp=4445922;ord=1;num=\'+ a +\'?" width=1 height=1 border=0 style="position:absolute">\');\n</script>\n<noscript>\n<img src="https://pubads.g.doubleclick.net/activity;xsp=4445922;ord=1;num=1?" width=1 height=1 border=0 style="position:absolute">\n</noscript>'},{html:'<!-- Taboola -->\n<script src="//cdn.taboola.com/libtrc/dxagency-nycgo-sc/tfa.js"></script>'},{html:"<script>\n  function gtag_report_conversion(arg) {\n  var callback = function () {\n    if (typeof(arg.url) != 'undefined') {\n      window.location = arg.url;\n    }\n  };\n  gtag('event', 'conversion', {\n      'send_to': 'AW-829404768/'+arg.sendTo,\n      'event_callback': callback\n  });\n  return false;\n}\n</script>"}]}],event:"pagetop"},{name:"DX - Broadway Week",trigger:[{command:"writeHTML",arguments:[{html:"<!-- Adwords and Doubleclick Page View -->\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('event', 'conversion', {\n    'allow_custom_scripts': true,\n    'send_to': ['AW-829404768/5aVKCL3n1oYBEODsvosD','DC-8262113/broad0/broad0+standard']\n  });\n</script>\n<noscript>\n<img src=\"https://ad.doubleclick.net/ddm/activity/src=8262113;type=broad0;cat=broad0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1?\" width=\"1\" height=\"1\" alt=\"\"/>\n</noscript>\n<!-- End Doubleclick Floodlight --><!-- Adwords Attraction Passes Page View conversion -->"}]}],scope:{URI:{include:["/broadway-week"]}},event:"pagetop"},{name:"DX - Must-See Week",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5c13c77664746d259c015b19.js"}]}]}],scope:{URI:{include:["/must-see-week"]}},event:"pagebottom"},{name:"DX - Off-Broadway Week",trigger:[{command:"writeHTML",arguments:[{html:"<!-- Adwords and Doubleclick Page View -->\n<script>\n  console.log('TEST')\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('event', 'conversion', {\n    'allow_custom_scripts': true,\n    'send_to': ['AW-829404768/e0jLCPa2voYBEODsvosD','DC-8262113/broad0/broad00+standard']\n  });\n</script>\n<noscript>\n<img src=\"https://ad.doubleclick.net/ddm/activity/src=8262113;type=broad0;cat=broad00;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1?\" width=\"1\" height=\"1\" alt=\"\"/>\n</noscript>\n<!-- End Doubleclick Floodlight --><!-- Adwords Attraction Passes Page View conversion -->"}]}],scope:{URI:{include:["/off-broadway-week"]}},event:"pagetop"},{name:"FullStory",trigger:[{command:"writeHTML",arguments:[{html:"<script>\nwindow['_fs_debug'] = false;\nwindow['_fs_host'] = 'fullstory.com';\nwindow['_fs_org'] = 'BETAT';\nwindow['_fs_namespace'] = 'FS';\n(function(m,n,e,t,l,o,g,y){\n    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window[\"_fs_namespace\"].');} return;}\n    g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[];\n    o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';\n    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);\n    g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)};\n    g.shutdown=function(){g(\"rec\",!1)};g.restart=function(){g(\"rec\",!0)};\n    g.consent=function(a){g(\"consent\",!arguments.length||a)};\n    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};\n    g.clearUserCookie=function(){};\n})(window,document,window['_fs_namespace'],'script','user');\n</script> "}]}],scope:{subdomains:{include:["www"]},domains:[/nycgo\.com$/i]},event:"pagetop"},{name:"MOAT",trigger:[{command:"writeHTML",arguments:[{html:'<!-- MOAT Analytics -->\n<script>\n(function(){function x(){for(var a=[8],b=1;1>=b;b++)a.push(8+b),a.push(8-b);a=a[Math.floor(Math.random()*a.length)];return{b:a,a:0==Math.floor(Math.random()*a)}}function h(a){var b=a=a.replace(":","");try{for(var c=0;100>c&&(a=decodeURIComponent(a),b!=a)&&!a.match(/^http(s)?\\:/);c++)b=a}catch(d){}return a.replace(/(^\\s+|\\s+$)/g,"")}try{if(!location||!location.hostname||!location.pathname)return!1;var c=document.location.hostname.replace(/^www\\./,""),q=function(){for(var a,b=document.getElementsByTagName("meta"),\nc,d=0,e=b.length;d<e;d++)if(c=b[d],"og:title"===c.getAttribute("property")){a=c.getAttribute("content");break}a||(a=document.title||"Untitled");return a}(),b={},b=function(a,b,c){a.l1=b;a.l2=c;a.l3="__page__";a.l4="-";return a}(b,c,q),k=(new Date).getTime(),l=Math.floor(Math.random()*Math.pow(10,12)),m,d;d=x();m=d.a?d.b:0;b.zmoatab_cm=m;b.t=k;b.de=l;b.zMoatAB_SNPT=!0;var n;n=m?m:1;var r;r=d?d.a?!0:!1:!0;var c=[],y=(new Date).getTime().toString(35),t=[h(b.l1),h(b.l2),h(b.l3),h(b.l4)].join(":"),q=/zct[a-z0-9]+/i,\ne="",f;for(f in b)b.hasOwnProperty(f)&&f.match(q)&&(e+="&"+f+"="+b[f]);var u=document.referrer.match(/^([^:]{2,}:\\/\\/[^\\/]*)/),p=u?u[1]:document.referrer,z="https://9kgwgafneu55-a.akamaihd.net/"+y+".gif?e=17&d="+encodeURIComponent(t)+"&de="+l+"&t="+k+"&i=NYCGOCONTENT1&cm="+n+"&j="+encodeURIComponent(p)+e+"&mp=1&ac=1&pl=1&bq=10&vc=2&cs=0",A="https://px.moatads.com/pixel.gif?e=17&d="+encodeURIComponent(t)+"&de="+l+"&t="+k+"&i=NYCGOCONTENT1&cm="+n+"&j="+encodeURIComponent(p)+e+"&mp=0&ac=1&pl=1&bq=10&ad_type=img&vc=2&cs=0",\nB="https://px.moatads.com/pixel.gif?e=17&d="+encodeURIComponent(t)+"&de="+l+"&t="+k+"&i=NYCGOCONTENT1&cm="+n+"&j="+encodeURIComponent(p)+e+"&ku=1&ac=1&pl=1&bq=10&ad_type=img&vc=2&cs=0";r&&((new Image).src=z,(new Image).src=A);for(var v in b)c.push(v+"="+encodeURIComponent(b[v]));var c=c.join("&"),c=c+"&vc=2",g=document.createElement("script");g.type="text/javascript";g.async=!0;r&&(g.onerror=function(){(new Image).src=B});var w=document.getElementsByTagName("script")[0];w.parentNode.insertBefore(g,\nw);g.src="https://z.moatads.com/nycgocontent84690977047/moatcontent.js#"+c}catch(a){try{var C="//pixel.moatads.com/pixel.gif?e=24&d=data%3Adata%3Adata%3Adata&i=MOATCONTENTABSNIPPET1"+e+"&vc=2&ac=1&k="+encodeURIComponent(a)+"&j="+encodeURIComponent(p)+"&cs="+(new Date).getTime();(new Image).src=C}catch(D){}}})();\n</script>\n<!-- END MOAT Analytics -->'}]}],event:"pagetop"},{name:"NewRelic Browser",trigger:[{command:"writeHTML",arguments:[{html:'<script type="text/javascript">\nwindow.NREUM||(NREUM={}),__nr_require=function(t,n,e){function r(e){if(!n[e]){var o=n[e]={exports:{}};t[e][0].call(o.exports,function(n){var o=t[e][1][n];return r(o||n)},o,o.exports)}return n[e].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,n,e){function r(t){try{s.console&&console.log(t)}catch(n){}}var o,i=t("ee"),a=t(15),s={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(s.console=!0,o.indexOf("dev")!==-1&&(s.dev=!0),o.indexOf("nr_dev")!==-1&&(s.nrDev=!0))}catch(c){}s.nrDev&&i.on("internal-error",function(t){r(t.stack)}),s.dev&&i.on("fn-err",function(t,n,e){r(e.stack)}),s.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(s,function(t,n){return t}).join(", ")))},{}],2:[function(t,n,e){function r(t,n,e,r,s){try{p?p-=1:o(s||new UncaughtException(t,n,e),!0)}catch(f){try{i("ierr",[f,c.now(),!0])}catch(d){}}return"function"==typeof u&&u.apply(this,a(arguments))}function UncaughtException(t,n,e){this.message=t||"Uncaught error with no additional information",this.sourceURL=n,this.line=e}function o(t,n){var e=n?null:c.now();i("err",[t,e])}var i=t("handle"),a=t(16),s=t("ee"),c=t("loader"),f=t("gos"),u=window.onerror,d=!1,l="nr@seenError",p=0;c.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(h){"stack"in h&&(t(8),t(7),"addEventListener"in window&&t(5),c.xhrWrappable&&t(9),d=!0)}s.on("fn-start",function(t,n,e){d&&(p+=1)}),s.on("fn-err",function(t,n,e){d&&!e[l]&&(f(e,l,function(){return!0}),this.thrown=!0,o(e))}),s.on("fn-end",function(){d&&!this.thrown&&p>0&&(p-=1)}),s.on("internal-error",function(t){i("ierr",[t,c.now(),!0])})},{}],3:[function(t,n,e){t("loader").features.ins=!0},{}],4:[function(t,n,e){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(8),s=t(7),c="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",l="resource",p="-start",h="-end",m="fn"+p,w="fn"+h,v="bstTimer",y="pushState",g=t("loader");g.features.stn=!0,t(6);var b=NREUM.o.EV;o.on(m,function(t,n){var e=t[0];e instanceof b&&(this.bstStart=g.now())}),o.on(w,function(t,n){var e=t[0];e instanceof b&&i("bst",[e,n,this.bstStart,g.now()])}),a.on(m,function(t,n,e){this.bstStart=g.now(),this.bstType=e}),a.on(w,function(t,n){i(v,[n,this.bstStart,g.now(),this.bstType])}),s.on(m,function(){this.bstStart=g.now()}),s.on(w,function(t,n){i(v,[n,this.bstStart,g.now(),"requestAnimationFrame"])}),o.on(y+p,function(t){this.time=g.now(),this.startPath=location.pathname+location.hash}),o.on(y+h,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+c]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["c"+c]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["webkitC"+c]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],5:[function(t,n,e){function r(t){for(var n=t;n&&!n.hasOwnProperty(u);)n=Object.getPrototypeOf(n);n&&o(n)}function o(t){s.inPlace(t,[u,d],"-",i)}function i(t,n){return t[1]}var a=t("ee").get("events"),s=t(18)(a,!0),c=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";n.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,n){var e=t[1],r=c(e,"nr@wrapped",function(){function t(){if("function"==typeof e.handleEvent)return e.handleEvent.apply(e,arguments)}var n={object:t,"function":e}[typeof e];return n?s(n,"fn-",null,n.name||"anonymous"):e});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],6:[function(t,n,e){var r=t("ee").get("history"),o=t(18)(r);n.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],7:[function(t,n,e){var r=t("ee").get("raf"),o=t(18)(r),i="equestAnimationFrame";n.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],8:[function(t,n,e){function r(t,n,e){t[0]=a(t[0],"fn-",null,e)}function o(t,n,e){this.method=e,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,e)}var i=t("ee").get("timer"),a=t(18)(i),s="setTimeout",c="setInterval",f="clearTimeout",u="-start",d="-";n.exports=i,a.inPlace(window,[s,"setImmediate"],s+d),a.inPlace(window,[c],c+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(c+u,r),i.on(s+u,o)},{}],9:[function(t,n,e){function r(t,n){d.inPlace(n,["onreadystatechange"],"fn-",s)}function o(){var t=this,n=u.context(t);t.readyState>3&&!n.resolved&&(n.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,y,"fn-",s)}function i(t){g.push(t),h&&(x?x.then(a):w?w(a):(E=-E,O.data=E))}function a(){for(var t=0;t<g.length;t++)r([],g[t]);g.length&&(g=[])}function s(t,n){return n}function c(t,n){for(var e in t)n[e]=t[e];return n}t(5);var f=t("ee"),u=f.get("xhr"),d=t(18)(u),l=NREUM.o,p=l.XHR,h=l.MO,m=l.PR,w=l.SI,v="readystatechange",y=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],g=[];n.exports=u;var b=window.XMLHttpRequest=function(t){var n=new p(t);try{u.emit("new-xhr",[n],n),n.addEventListener(v,o,!1)}catch(e){try{u.emit("internal-error",[e])}catch(r){}}return n};if(c(p,b),b.prototype=p.prototype,d.inPlace(b.prototype,["open","send"],"-xhr-",s),u.on("send-xhr-start",function(t,n){r(t,n),i(n)}),u.on("open-xhr-start",r),h){var x=m&&m.resolve();if(!w&&!m){var E=1,O=document.createTextNode(E);new h(a).observe(O,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===v||a()})},{}],10:[function(t,n,e){function r(t){var n=this.params,e=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!n.aborted){if(e.duration=a.now()-this.startTime,4===t.readyState){n.status=t.status;var i=o(t,this.lastSize);if(i&&(e.rxSize=i),this.sameOrigin){var c=t.getResponseHeader("X-NewRelic-App-Data");c&&(n.cat=c.split(", ").pop())}}else n.status=0;e.cbTime=this.cbTime,f.emit("xhr-done",[t],t),s("xhr",[n,e,this.startTime])}}}function o(t,n){var e=t.responseType;if("json"===e&&null!==n)return n;var r="arraybuffer"===e||"blob"===e||"json"===e?t.response:t.responseText;return h(r)}function i(t,n){var e=c(n),r=t.params;r.host=e.hostname+":"+e.port,r.pathname=e.pathname,t.sameOrigin=e.sameOrigin}var a=t("loader");if(a.xhrWrappable){var s=t("handle"),c=t(11),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,l=t("id"),p=t(14),h=t(13),m=window.XMLHttpRequest;a.features.xhr=!0,t(9),f.on("new-xhr",function(t){var n=this;n.totalCbs=0,n.called=0,n.cbTime=0,n.end=r,n.ended=!1,n.xhrGuids={},n.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){n.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,n){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&n.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,n){var e=this.metrics,r=t[0],o=this;if(e&&r){var i=h(r);i&&(e.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof n.onload))&&o.end(n)}catch(e){try{f.emit("internal-error",[e])}catch(r){}}};for(var s=0;s<d;s++)n.addEventListener(u[s],this.listener,!1)}),f.on("xhr-cb-time",function(t,n,e){this.cbTime+=t,n?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof e.onload||this.end(e)}),f.on("xhr-load-added",function(t,n){var e=""+l(t)+!!n;this.xhrGuids&&!this.xhrGuids[e]&&(this.xhrGuids[e]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,n){var e=""+l(t)+!!n;this.xhrGuids&&this.xhrGuids[e]&&(delete this.xhrGuids[e],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,n){n instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],n)}),f.on("removeEventListener-end",function(t,n){n instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],n)}),f.on("fn-start",function(t,n,e){n instanceof m&&("onload"===e&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,n){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,n],n)})}},{}],11:[function(t,n,e){n.exports=function(t){var n=document.createElement("a"),e=window.location,r={};n.href=t,r.port=n.port;var o=n.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=n.hostname||e.hostname,r.pathname=n.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!n.protocol||":"===n.protocol||n.protocol===e.protocol,a=n.hostname===document.domain&&n.port===e.port;return r.sameOrigin=i&&(!n.hostname||a),r}},{}],12:[function(t,n,e){function r(){}function o(t,n,e){return function(){return i(t,[f.now()].concat(s(arguments)),n?null:this,e),n?void 0:this}}var i=t("handle"),a=t(15),s=t(16),c=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",p=l+"ixn-";a(d,function(t,n){u[n]=o(l+n,!0,"api")}),u.addPageAction=o(l+"addPageAction",!0),u.setCurrentRouteName=o(l+"routeName",!0),n.exports=newrelic,u.interaction=function(){return(new r).get()};var h=r.prototype={createTracer:function(t,n){var e={},r=this,o="function"==typeof n;return i(p+"tracer",[f.now(),t,e],r),function(){if(c.emit((o?"":"no-")+"fn-start",[f.now(),r,o],e),o)try{return n.apply(this,arguments)}catch(t){throw c.emit("fn-err",[arguments,this,t],e),t}finally{c.emit("fn-end",[f.now()],e)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,n){h[n]=o(p+n)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],13:[function(t,n,e){n.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(n){return}}}},{}],14:[function(t,n,e){var r=0,o=navigator.userAgent.match(/Firefox[\\/\\s](\\d+\\.\\d+)/);o&&(r=+o[1]),n.exports=r},{}],15:[function(t,n,e){function r(t,n){var e=[],r="",i=0;for(r in t)o.call(t,r)&&(e[i]=n(r,t[r]),i+=1);return e}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],16:[function(t,n,e){function r(t,n,e){n||(n=0),"undefined"==typeof e&&(e=t?t.length:0);for(var r=-1,o=e-n||0,i=Array(o<0?0:o);++r<o;)i[r]=t[n+r];return i}n.exports=r},{}],17:[function(t,n,e){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],18:[function(t,n,e){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(16),a="nr@original",s=Object.prototype.hasOwnProperty,c=!1;n.exports=function(t,n){function e(t,n,e,o){function nrWrapper(){var r,a,s,c;try{a=this,r=i(arguments),s="function"==typeof e?e(r,a):e||{}}catch(f){l([f,"",[r,a,o],s])}u(n+"start",[r,a,o],s);try{return c=t.apply(a,r)}catch(d){throw u(n+"err",[r,a,d],s),d}finally{u(n+"end",[r,a,c],s)}}return r(t)?t:(n||(n=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,n,o,i){o||(o="");var a,s,c,f="-"===o.charAt(0);for(c=0;c<n.length;c++)s=n[c],a=t[s],r(a)||(t[s]=e(a,f?s+o:o,i,s))}function u(e,r,o){if(!c||n){var i=c;c=!0;try{t.emit(e,r,o,n)}catch(a){l([a,e,r,o])}c=i}}function d(t,n){if(Object.defineProperty&&Object.keys)try{var e=Object.keys(t);return e.forEach(function(e){Object.defineProperty(n,e,{get:function(){return t[e]},set:function(n){return t[e]=n,n}})}),n}catch(r){l([r])}for(var o in t)s.call(t,o)&&(n[o]=t[o]);return n}function l(n){try{t.emit("internal-error",n)}catch(e){}}return t||(t=o),e.inPlace=f,e.flag=a,e}},{}],ee:[function(t,n,e){function r(){}function o(t){function n(t){return t&&t instanceof r?t:t?c(t,s,i):i()}function e(e,r,o,i){if(!l.aborted||i){t&&t(e,r,o);for(var a=n(o),s=h(e),c=s.length,f=0;f<c;f++)s[f].apply(a,r);var d=u[y[e]];return d&&d.push([g,e,r,a]),a}}function p(t,n){v[t]=h(t).concat(n)}function h(t){return v[t]||[]}function m(t){return d[t]=d[t]||o(e)}function w(t,n){f(t,function(t,e){n=n||"feature",y[e]=n,n in u||(u[n]=[])})}var v={},y={},g={on:p,emit:e,get:m,listeners:h,context:n,buffer:w,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(l.aborted=!0,u=l.backlog={})}var s="nr@context",c=t("gos"),f=t(15),u={},d={},l=n.exports=o();l.backlog=u},{}],gos:[function(t,n,e){function r(t,n,e){if(o.call(t,n))return t[n];var r=e();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(t,n,e){function r(t,n,e,r){o.buffer([t],r),o.emit(t,n,e)}var o=t("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(t,n,e){function r(t){var n=typeof t;return!t||"object"!==n&&"function"!==n?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");n.exports=r},{}],loader:[function(t,n,e){function r(){if(!x++){var t=b.info=NREUM.info,n=l.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&n))return u.abort();f(y,function(n,e){t[n]||(t[n]=e)}),c("mark",["onload",a()+b.offset],null,"api");var e=l.createElement("script");e.src="https://"+t.agent,n.parentNode.insertBefore(e,n)}}function o(){"complete"===l.readyState&&i()}function i(){c("mark",["domContent",a()+b.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(s=Math.max((new Date).getTime(),s))-b.offset}var s=(new Date).getTime(),c=t("handle"),f=t(15),u=t("ee"),d=window,l=d.document,p="addEventListener",h="attachEvent",m=d.XMLHttpRequest,w=m&&m.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1071.min.js"},g=m&&w&&w[p]&&!/CriOS/.test(navigator.userAgent),b=n.exports={offset:s,now:a,origin:v,features:{},xhrWrappable:g};t(12),l[p]?(l[p]("DOMContentLoaded",i,!1),d[p]("load",r,!1)):(l[h]("onreadystatechange",o),d[h]("onload",r)),c("mark",["firstbyte",s],null,"api");var x=0,E=t(17)},{}]},{},["loader",2,10,4,3]);\n;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"dde01cd7af",applicationID:"86651758",sa:1}\n</script>\n'}]}],scope:{URI:{exclude:["amp"]}},event:"pagetop"},{name:"Nordstrom - Articles",trigger:[{command:"writeHTML",arguments:[{html:"<SCRIPT language='JavaScript1.1' SRC=\"https://ad.doubleclick.net/ddm/trackimpj/N7451.148218NYCGO.COM/B23050702.252932109;dc_trk_aid=453034987;dc_trk_cid=122457389;ord=[timestamp];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=?\"></SCRIPT>"}]}],scope:{URI:{include:["/maps-guides/seasonal/holidays","/things-to-do/shopping-fashion","/articles/holiday-shopping-in-nyc-2019","/photo-galleries/nyc-holiday-windows-2019","/articles/ways-to-go-big-in-nyc-during-the-holidays"]}},event:"pagebottom"},{name:"Nordstrom - Sponsored Content & Video",trigger:[{command:"writeHTML",arguments:[{html:"<SCRIPT language='JavaScript1.1' SRC=\"https://ad.doubleclick.net/ddm/trackimpj/N7451.148218NYCGO.COM/B23050702.252932235;dc_trk_aid=453430341;dc_trk_cid=122849365;ord=[timestamp];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=?\"></SCRIPT>"},{html:"<SCRIPT language='JavaScript1.1' SRC=\"https://ad.doubleclick.net/ddm/trackimpj/N7451.148218NYCGO.COM/B23050702.252932112;dc_trk_aid=453476567;dc_trk_cid=122781911;ord=[timestamp];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=?\"></SCRIPT"}]}],scope:{URI:{include:["/articles/guide-to-nordstrom"]}},event:"pagebottom"},{name:"Pixel - Attraction Passes Page View",trigger:[{command:"writeHTML",arguments:[{html:"<!-- Adwords Attraction Passes Page View conversion -->\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('event', 'conversion', {'send_to': ['AW-829404768/WwMRCPq2qnoQ4Oy-iwM','DC-8262113/secon0/attra0+standard']});\n</script>"},{html:"<!-- Taboola Attraction Passes Page View -->\n<script type=\"text/javascript\">\n    window._tfa = window._tfa || [];\n    _tfa.push({ notify: 'action',name: 'page_view_attraction_passes' });\n</script>\n<script src=\"//cdn.taboola.com/libtrc/dxagency-nycgo-sc/tfa.js\"></script>"}]}],scope:{URI:{include:["/things-to-do/tours-in-nyc/attraction-passes"]}},event:"pagebottom"},{name:"Pixel - Broadway Page View",trigger:[{command:"writeHTML",arguments:[{html:"<!-- Adwords Broadway Page Views conversion -->\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('event', 'conversion', {'send_to': 'AW-829404768/XOccCNq7p3oQ4Oy-iwM'});\n</script>"},{
html:"<!-- Taboola Broadway Page View -->\n<script type=\"text/javascript\">\n    window._tfa = window._tfa || [];\n    _tfa.push({ notify: 'action',name: 'page_view_broadway' });\n</script>\n<script src=\"//cdn.taboola.com/libtrc/dxagency-nycgo-sc/tfa.js\"></script>"}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: primary category"),"Broadway")},function(){return _satellite.textMatch(_satellite.getVar("content: page type"),"Calendar: Events")}],event:"pagebottom"},{name:"Pixel - Hotel Page View",trigger:[{command:"writeHTML",arguments:[{html:"<!-- Adwords and Doubleclick Hotel Page View -->\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('event', 'conversion', {'send_to': ['AW-829404768/muL7CLWrlHoQ4Oy-iwM','DC-8262113/hotel0/hotel0+standard']});\n</script>\n<noscript>\n<img src=\"https://ad.doubleclick.net/ddm/activity/src=8262113;type=hotel0;cat=hotel0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1?\" width=\"1\" height=\"1\" alt=\"\"/>\n</noscript>\n<!-- End Adwords and Doubleclick Hotel Page View -->"},{html:"<!-- Taboola Hotel Page View -->\n<script type=\"text/javascript\">\n    window._tfa = window._tfa || [];\n    _tfa.push({ notify: 'action',name: 'page_view' });\n</script>\n<script src=\"//cdn.taboola.com/libtrc/dxagency-nycgo-sc/tfa.js\"></script>"}]}],scope:{URI:{include:["/hotels/","/plan-your-trip/hotels"]}},event:"pagebottom"},{name:"Pixel - Restaurant Page View",trigger:[{command:"writeHTML",arguments:[{html:"<!-- Adwords and Doubleclick Page View -->\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('event', 'conversion', {\n    'allow_custom_scripts': true,\n    'send_to': ['AW-829404768/5LZKCLTZtoMBEODsvosD','DC-8262113/secon0/resta0+standard']\n  });\n</script>\n<noscript>\n<img src=\"https://ad.doubleclick.net/ddm/activity/src=8262113;type=secon0;cat=resta0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1?\" width=\"1\" height=\"1\" alt=\"\"/>\n</noscript>\n<!-- End Doubleclick Floodlight --><!-- Adwords Attraction Passes Page View conversion -->"}]}],scope:{URI:{include:["/restaurants/","/things-to-do/restaurants-dining"]}},event:"pagebottom"},{name:"Pixel - Retargeting Page View",trigger:[{command:"writeHTML",arguments:[{html:"<!-- Taboola Retargeting Pixel -->\n<script type=\"text/javascript\">\n    window._tfa = window._tfa || [];\n    _tfa.push({ notify: 'mark',type: 'retargeting' });\n</script>\n<script src=\"//cdn.taboola.com/libtrc/dxagency-nycgo-sc/tfa.js\"></script>\n<!-- END Taboola Retargeting Pixel -->"}]}],scope:{URI:{include:["cid=native_pd_tyc17"]}},event:"pagetop"},{name:"Qualtrics - Testing",trigger:[{command:"loadIframe",arguments:[{pages:[{src:"satellite-5c9e4cc664746d7610000cc0.html",data:[]}]}]}],scope:{subdomains:{include:["dev-upgrade","stage-upgrade","origin-qa-upgrade","qa-upgrade"]}},event:"pagebottom"},{name:"Quantcast",trigger:[{command:"writeHTML",arguments:[{html:'<!-- Quantcast Tag -->\n<script type="text/javascript">\nvar _qevents = _qevents || [];\n\n(function() {\nvar elem = document.createElement(\'script\');\nelem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";\nelem.async = true;\nelem.type = "text/javascript";\nvar scpt = document.getElementsByTagName(\'script\')[0];\nscpt.parentNode.insertBefore(elem, scpt);\n})();\n\n_qevents.push({\nqacct:"p-qw1kkn3vHmM6s"\n});\n</script>\n\n<noscript>\n<div style="display:none;">\n<img src="//pixel.quantserve.com/pixel/p-qw1kkn3vHmM6s.gif" border="0" height="1" width="1" alt="Quantcast"/>\n</div>\n</noscript>\n<!-- End Quantcast tag -->'}]}],scope:{domains:[/nycgo\.com$/i]},event:"pagebottom"},{name:"RW - Phluant Tracking",trigger:[{command:"writeHTML",arguments:[{html:'<script type="text/javascript" src="https://dojo.phluant.com/dojo.conversion?accountId=122&advertiserId=238&landing_page=1"></script>'}]}],scope:{URI:{include:["restaurant-week","rw"]}},event:"pagetop"},{name:"Scroller Test",trigger:[{command:"writeHTML",arguments:[{html:'<script data-cfasync="false" type="text/javascript">(function(s,o,l,v,e,d){if(s[o]==null&&s[l+e]){s[o]="loading";s[l+e](d,l=function(){s[o]="complete";s[v+e](d,l,!1)},!1)}})(document,"readyState","add","remove","EventListener","DOMContentLoaded");(function(){var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src="//cdn.engine.4dsply.com/Scripts/infinity.js.aspx?guid=ccdb6026-778c-4091-b3ee-901174fceb80";s.id="infinity";s.setAttribute("data-guid","ccdb6026-778c-4091-b3ee-901174fceb80");s.setAttribute("data-version","async");var e=document.getElementsByTagName(\'script\')[0];e.parentNode.insertBefore(s,e)})();</script>'}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: server"),"dev-upgrade.nycgo.com")},function(){return _satellite.textMatch(_satellite.getVar("content: page name"),"nycgo:articles:free-nyc-museums")}],event:"pagebottom"},{name:"cart: checkout",trigger:[{engine:"sc",command:"addEvent",arguments:["scCheckout"]},{engine:"sc",command:"customSetup",arguments:[function(e,t){t.products="";for(var n=0;n<digitalData.cart.item.length;n++)t.products=t.products+";"+digitalData.cart.item[n].productInfo.productID+","}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: page name"),/checkout/i)}],event:"pagebottom"},{name:"cart: purchase",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar14:"%cart: show ID%",eVar20:"%cart: seat section%",eVar21:"%cart: purchase ID%",eVar22:"%cart: show date%",eVar23:"%cart: show time%",eVar47:"%cart: payment method%",prop55:"D=v47",transactionID:"%cart: purchase ID%"}]},{engine:"sc",command:"addEvent",arguments:["purchase"]},{engine:"sc",command:"customSetup",arguments:[function(e,t){t.products="";for(var n=0;n<digitalData.transaction.item.length;n++)t.products=t.products+";"+digitalData.transaction.item[n].productInfo.productID+";"+digitalData.transaction.item[n].quantity+";"+digitalData.transaction.item[n].price.basePrice+","}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: page name"),/TBD/i)}],event:"pagebottom"},{name:"content: all pages",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar40:"D=pageName",eVar41:"D=ch",eVar46:"%content: page url%",prop1:"D=ch",prop12:"D=g",prop3:"%content: partner name%",prop32:"%content: language%",prop54:"D=v46",server:"%content: server%",pageName:"%content: page name%",channel:"%content: site section%",campaign:T.getQueryParam("cid")}]},{engine:"sc",command:"addEvent",arguments:["event1"]}],event:"pagebottom"},{name:"product: details page",trigger:[{engine:"sc",command:"addEvent",arguments:["prodView"]},{engine:"sc",command:"customSetup",arguments:[function(e,t){t.products="";for(var n=0;n<digitalData.product.length;n++)t.products=t.products+";"+digitalData.product[n].productInfo.productID+","}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: page name"),/tickets/i)}],event:"pagebottom"}],rules:[{name:"DX Tracking Trigger",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5bd08c1264746d01e1002de1.js"}]}]}],conditions:[function(){return console.log($(this).attr("data-dx")),_satellite.setVar("dxTrigger",$(this).attr("data-dx")),!0}],selector:"[data-dx]",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Favorite Add",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"add to favorites",setVars:{eVar28:"%listing: view type%",eVar40:"%content: page name%",eVar41:"%product: category%",eVar42:"%content: page type%",eVar44:"%product: name%",eVar46:"%content: page url%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event25"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5bd205c164746d217800366d.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Add Favorite")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"addToFavorites"},{name:"Favorite Remove",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"remove from favorites",setVars:{eVar28:"%listing: view type%",eVar40:"%content: page name%",eVar41:"%product: category%",eVar42:"%content: page type%",eVar44:"%product: name%",eVar46:"%content: page url%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event26"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Remove Favorite")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"addToFavorites"},{name:"Initiate Checkout Pixel",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a14513064746d3f4e000658.js"},{src:"satellite-5a1da35e64746d3511003dad.js"},{src:"satellite-5a21b9d764746d7fe800244e.js"}]}]}],selector:"[data-fbq]",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Meeting Planners Newsletter",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5ba8fd7a64746d6c080049ac.js"},{src:"satellite-5ba8fd7a64746d6c080049ad.js"},{src:"satellite-5ba8fd7a64746d6c080049af.js"},{src:"satellite-5ba90a9964746d56cd0023b3.js"}]}]},{command:"loadIframe",arguments:[{pages:[{src:"satellite-5ba8fd7a64746d6c080049ae.html",data:[]}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("DX Tracking Trigger"),"newsletter_meeting-planners")}],event:"dataelementchange(DX Tracking Trigger)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Movable Ink",trigger:[{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5c2e1db664746d4163019ff9.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: movable"),"movableInk")}],event:"dataelementchange(content: movable)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Prop22 Tracking",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"%this.getAttribute(data-linkname)%",setVars:{prop22:"%Custom Link ID%"}}]}],conditions:[function(){return _satellite.setVar("LinkName",this),!0}],selector:"[data-linkid]",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"browse: open content frame",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"browse - open content panel",setVars:{eVar27:"%product: name%",eVar28:"%content interaction%",eVar33:"%listing: location filter%",eVar35:"%product: category%",eVar36:"%product: type%",eVar38:"%listing: category filter%",eVar39:"%listing: cuisine filter%",eVar40:"%content: page name%",eVar42:"%content: page type%",eVar46:"%content: page url%",eVar50:"%listing: sort by%",eVar51:"%listing: meal filter%"},customSetup:function(e,t){var n=digitalData.event[0].eventInfo.triggerEvent;console.log("TRACKING DEBUG",_.clone(digitalData.event[0]),_.clone(n)),n&&"rw find a table"==n.toLowerCase()&&(t.linkTrackEvents=t.apl(t.linkTrackEvents,"event9",",",1),t.events=t.apl(t.events,"event9",",",1)),"view menu"==digitalData.event[0].eventInfo.interaction&&(t.linkTrackEvents=t.apl(t.linkTrackEvents,"event19",",",1),t.events=t.apl(t.events,"event19",",",1),gtag&&gtag("event","conversion",{allow_custom_scripts:!0,send_to:"AW-829404768/1TfXCLac4YQBEODsvosD"})),n=null,digitalData.event[0].eventInfo.eventName="",digitalData.event[0].eventInfo.triggerEvent=""},addEvent:["event20"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5b6366a064746d2bd9000152.js"},{src:"satellite-5b6daea164746d2bd6004360.js"},{src:"satellite-5c13d0ba64746d3e16018b7b.js"},{src:"satellite-5c195f0164746d181a014383.js"},{src:"satellite-5c59aeab64746d57d0001361.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),/^.*?(Open Content Panel|Open Content Frame).*$/i)}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"browse: refinement",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"browse refinement",setVars:{eVar30:"%listing: refinement%",eVar46:"%content: page url%"},customSetup:function(e,t){var n=digitalData.event[0].eventInfo.triggerEvent;n&&"content interaction"==n.toLowerCase()&&(t.linkTrackEvents=t.apl(t.linkTrackEvents,"event18",",",1),t.events=t.apl(t.events,"event18",",",1)),digitalData.event[0].eventInfo.eventName=""},addEvent:["event31"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Browse Refinement")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"browse: search",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"browse search",setVars:{eVar2:"%search: search term%",eVar40:"%content: page name%",eVar46:"%content: page url%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event3"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Browse Search")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"bww: buy now",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bww - buy now",setVars:{eVar28:"%content interaction%",eVar37:"%product: name%",eVar38:"%listing: category filter%",eVar50:"%listing: sort by%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event39"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5b635bad64746d2bdc0001a4.js"},{src:"satellite-5d541af964746d7bdc000b9d.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"BWW Buy Now")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"bww: buy with upgrade",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bww - buy with upgrade",setVars:{eVar28:"%content interaction%",eVar37:"%listing: participant name%",eVar38:"Filters: %listing: category filter%",eVar50:"%listing: sort by%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event40"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5b635bd764746d2bd900013b.js"},{src:"satellite-5d541fd764746d1651000076.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"BWW Buy With Upgrade")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"card ecommerce",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"content interaction",setVars:{eVar28:"%content interaction%",eVar40:"%content: page name%",eVar41:"%product: category%",eVar42:"%content: page type%",eVar44:"%product: name%",eVar46:"%content: page url%",eVar49:"%content: primary category%",eVar53:"%product: type%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event41"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Card Ecommerce")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"cart: add",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"cart: add",customSetup:function(e,t){t.products="",void 0!==e&&e.detail&&(e.detail.productID&&(t.products=";"+e.detail.productID+";"),t.products&&e.detail.quantity&&(t.products+=";"+e.detail.quantity+";"),t.products&&e.detail.totalPrice&&(t.products+=";"+e.detail.totalPrice+";")),t.linkTrackVars=t.linkTrackVars+",products"},addEvent:["scAdd"]}]}],selector:"body",event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"cartAdd"},{name:"content interaction",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"content interaction",setVars:{eVar40:"%content: page name%",eVar42:"%content: page type%",eVar46:"%content: page url%",eVar49:"%content: primary category%",eVar52:"%content interaction%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event18"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Content Interaction")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"content interaction trigger",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5b61c68264746d06cb0020c3.js"}]}]}],conditions:[function(){return _satellite.setVar("contentInteraction",$(this).text()),!0}],selector:'[data-track="interaction"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"content navigation slide",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Content Navigation Slide",setVars:{eVar40:"%content: page name%",eVar41:"%content: primary category%",eVar42:"%content: page type%",eVar46:"%content: page url%",eVar52:"%content: slide name%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event18"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Content Navigation Slide")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"date search: search results",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"date search: search results",setVars:{eVar11:"%event.detail.numTickets%",eVar12:"%event.detail.datesSearched%",eVar13:"%event.detail.daysSearchedAhead%",eVar4:"%event.detail.dateSearchRange%",eVar43:"%event.detail.numResults%",eVar7:"%event.detail.dateSearchType%",prop53:"D=v43"},customSetup:function(e,t){"zero"==t.eVar43?t.events=t.apl(t.events,"event28","",2):t.events=t.apl(t.events,"event6","",2)}}]}],selector:"body",event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"dateSearchResults"},{name:"msw: buy online",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"msw - buy online",setVars:{eVar27:"%listing: participant name%",eVar28:"%listing: view type%",eVar38:"%listing: category filter%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event10"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5c13d24464746d4c7101013f.js"},{src:"satellite-5c13d5a264746d41ce012ceb.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"MSW Buy Online")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"msw: print voucher",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"msw - print voucher",setVars:{eVar27:"%listing: participant name%",eVar28:"%listing: view type%",eVar38:"%listing: category filter%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event11"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5c13d4a964746d101a00da34.js"},{src:"satellite-5c13d58264746d516c00e9d7.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"MSW Print Voucher")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"newsletter: modal",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Newsletter Signup",setVars:{eVar18:"D=v18",eVar19:"D=v19",eVar40:"D=pageName",eVar42:"%content: page type%",eVar46:"%content: page title%",eVar49:"%content: primary category%",eVar9:"%newsletter: location%"},customSetup:function(){digitalData.newsletter={},digitalData.event[0].eventInfo.eventName=""},addEvent:["event43"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Newsletter Modal")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"newsletter: signup",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Newsletter Signup",setVars:{eVar18:"D=v18",eVar19:"D=v19",eVar32:"%newsletter: email%",eVar40:"D=pageName",eVar42:"%content: page type%",eVar46:"%content: page title%",eVar49:"%content: primary category%",eVar9:"%newsletter: location%"},customSetup:function(){digitalData.newsletter={}},addEvent:["event8"]}]},{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5a2ffc5164746d1efb01007b.js"},{src:"satellite-5a30011964746d086400495f.js"},{src:"satellite-5a30011964746d0864004960.js"},{src:"satellite-5bef26db64746d034e001ead.js"},{src:"satellite-5a2ffc5164746d1efb01007a.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("data: pixel tracking"),"newsletterSignup")}],event:"dataelementchange(data: pixel tracking)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"newsletter: start",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Newsletter Signup",setVars:{eVar18:"D=v18",eVar19:"D=v19",eVar40:"D=pageName",eVar42:"%content: page type%",eVar46:"%content: page title%",eVar49:"%content: primary category%",eVar9:"%newsletter: location%"},customSetup:function(){digitalData.newsletter={},digitalData.trackPixel=""},addEvent:["event5"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("data: pixel tracking"),"newsletterStart")}],event:"dataelementchange(data: pixel tracking)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"obww: buy now",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"obww - buy now",setVars:{eVar27:"%product: name%",eVar28:"%content interaction%",eVar33:"%listing: location filter%",eVar38:"%listing: category filter%",eVar50:"%listing: sort by%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event39"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5b75b47364746d11bf005924.js"},{src:"satellite-5d5422b664746d1651000095.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"OBW Buy Tickets")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"rw: complete reservation",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5d0bd57d64746d58bc0035ed.js"},{src:"satellite-5d0bd57d64746d58bc0035ee.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"RW Complete Reservation")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"rw: find a table",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"rw - find a table",setVars:{eVar12:"%listing: date searched%",eVar27:"%listing: participant name%",eVar28:"%content interaction%",eVar29:"%listing: party size%",eVar33:"%listing: location filter%",eVar38:"%listing: category filter%",eVar39:"%listing: cuisine filter%",eVar40:"%content: page name%",eVar42:"%content: page type%",eVar46:"%content: page url%",eVar50:"%listing: sort by%",eVar51:"%listing: meal filter%",eVar55:"%event: Error Value%"},customSetup:function(){digitalData.event[0].eventInfo.errorVal="",digitalData.event[0].eventInfo.eventName=""},addEvent:["event9"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5c180d8c64746d034e00f8ae.js"}]}]},{command:"loadIframe",arguments:[{pages:[{src:"satellite-5b588c2564746d43fd00114e.html",data:[]}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"RW Find a Table")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"rw: ot click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"rw - ot click",setVars:{eVar12:"%listing: date searched%",eVar27:"%listing: participant name%",eVar28:"%content interaction%",eVar29:"%listing: party size%",eVar33:"%listing: location filter%",eVar38:"%listing: category filter%",eVar39:"%listing: cuisine filter%",eVar50:"%listing: sort by%",eVar51:"%listing: meal filter%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event33"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5c180d4764746d259f016913.js"},{src:"satellite-5c38f7cb64746d416301cfeb.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"RW OT Click")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"rw: reservation confirmation",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"rw - complete reservation",setVars:{eVar12:"%listing: date searched%",eVar27:"%listing: participant name%",eVar28:"%content interaction%",eVar29:"%listing: party size%",eVar33:"%listing: location filter%",eVar38:"%listing: category filter%",eVar39:"%listing: cuisine filter%",eVar40:"%content: page name%",eVar42:"%content: page type%",eVar46:"%content: page url%",eVar50:"%listing: sort by%",eVar51:"%listing: meal filter%",eVar55:"%event: Error Value%",eVar56:"%event: Opt In/Out%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event44"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5d07da3664746d4a4e000725.js"},{src:"satellite-5d07da3664746d4a4e000726.js"},{src:"satellite-5d31ec8c64746d227c000ecd.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"RW Reservation Confirmation")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"rw: view menu",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"rw - view menu",setVars:{eVar27:"%listing: participant name%",eVar28:"%content interaction%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event19"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5c180daf64746d259c0166c6.js"}]}]},{command:"loadIframe",arguments:[{pages:[{src:"satellite-5b588bed64746d4400001e17.html",data:[]}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"rw view menu")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"search: site search",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"View Result",setVars:{eVar2:"%search: search term%"},customSetup:function(e,t){var n=digitalData.page.pageInfo.onsiteSearchResults;n&&n>0?(t.linkTrackEvents=t.apl(t.linkTrackEvents,"event3",",",1),t.events=t.apl(t.events,"event3",",",1)):0===n&&(t.linkTrackEvents=t.apl(t.linkTrackEvents,"event2",",",1),t.events=t.apl(t.events,"event2",",",1)),digitalData.event[0].eventInfo.eventName=""}}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Site Search")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"video: tracking end",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"video - brightcove play",setVars:{eVar8:"%content: video title%"},addEvent:["event35"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Video End")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"video: tracking play",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"video - brightcove play",setVars:{eVar8:"%content: video title%"},customSetup:function(){digitalData.event[0].eventInfo.eventName=""},addEvent:["event34"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("content: event"),"Video Play")}],event:"dataelementchange(content: event)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1}],directCallRules:[],settings:{trackInternalLinks:!0,libraryName:"satelliteLib-696905716944ee5a3e720176d1f265aaf1247239",isStaging:!1,allowGATTcalls:!1,downloadExtensions:/\.(?:doc|docx|eps|jpg|png|svg|xls|ppt|pptx|pdf|xlsx|tab|csv|zip|txt|vsd|vxd|xml|js|css|rar|exe|wma|mov|avi|wmv|mp3|wav|m4v)($|\&|\?)/i,notifications:!1,utilVisible:!1,domainList:["nycgo.com","onelink-translations.com"],scriptDir:"ca59a6b147938186adc2f9cba55c51bc214ca46a/scripts/",tagTimeout:3e3},data:{URI:t.location.pathname+t.location.search,browser:{},cartItems:[],revenue:"",host:{http:"assets.adobedtm.com",https:"assets.adobedtm.com"}},dataElements:{"cart: payment method":{jsVariable:"digitalData.transaction.paymentMethod",storeLength:"pageview"},"cart: purchase ID":{jsVariable:"digitalData.transaction.purchaseID",storeLength:"pageview"},"cart: seat section":{jsVariable:"digitalData.transaction.item[0].productInfo.seatSection",storeLength:"pageview"},"cart: show date":{jsVariable:"digitalData.transaction.item[0].productInfo.showDate",storeLength:"pageview"},"cart: show ID":{jsVariable:"digitalData.transaction.item[0].productInfo.showID",storeLength:"pageview"},"cart: show time":{jsVariable:"digitalData.transaction.item[0].productInfo.showTime",storeLength:"pageview"},"content: event":{customJS:function(){if("undefined"!=typeof digitalData&&"undefined"!=typeof digitalData.event&&"undefined"!=typeof digitalData.event[0]&&"undefined"!=typeof digitalData.event[0].eventInfo)return digitalData.event[0].eventInfo.eventName},storeLength:"pageview"},"content interaction":{customJS:function(){if("undefined"!=typeof digitalData&&"undefined"!=typeof digitalData.event&&"undefined"!=typeof digitalData.event[0].eventInfo)return digitalData.event[0].eventInfo.interaction},storeLength:"pageview"},"content: language":{jsVariable:"digitalData.page.pageInfo.language",storeLength:"pageview"},"content: movable":{customJS:function(){if("undefined"!=typeof digitalData)return digitalData.movable},storeLength:"pageview"},"content: page name":{jsVariable:"digitalData.page.pageInfo.pageName","default":"no pageName found",storeLength:"pageview"},"content: page title":{jsVariable:"digitalData.page.category.pageTitle",storeLength:"pageview"},"content: page type":{jsVariable:"digitalData.page.category.pageType",storeLength:"pageview"},"content: page url":{jsVariable:"digitalData.page.pageInfo.pageURL",storeLength:"pageview"},"content: partner name":{jsVariable:"digitalData.page.pageInfo.partnerName",storeLength:"pageview"},"content: primary category":{jsVariable:"digitalData.page.category.primCat",storeLength:"pageview"},"content: programPhase":{jsVariable:"digitalData.page.pageInfo.programPhase",storeLength:"session"},"content: server":{jsVariable:"digitalData.page.pageInfo.server",storeLength:"pageview"},"content: site section":{jsVariable:"digitalData.page.category.primaryCategory",storeLength:"pageview"},"content: slide name":{jsVariable:"digitalData.page.pageInfo.contentSlideName",storeLength:"pageview"},"content: video title":{jsVariable:"digitalData.page.pageInfo.videoTitle",storeLength:"pageview"},"Custom Link ID":{customJS:function(){var e=_satellite.getVar("LinkName");return""!=$(e).attr("data-linkid")?$(e).attr("data-linkid"):$(e).text()},storeLength:"pageview"},"data: pixel tracking":{jsVariable:"digitalData.trackPixel",storeLength:"pageview"},"date search: date search range":{jsVariable:"digitalData.page.pageInfo.dateSearchRange",storeLength:"pageview"},"date search: date search type":{jsVariable:"digitalData.page.pageInfo.dateSearchType",storeLength:"pageview"},"date search: dates searched":{jsVariable:"digitalData.page.pageInfo.datesSearched",storeLength:"pageview"},"date search: days searched ahead":{jsVariable:"digitalData.page.pageInfo.daysSearchedAhead",storeLength:"pageview"},"date search: number of results":{jsVariable:"digitalData.page.pageInfo.onsiteSearchResults",storeLength:"pageview"},"date search: number of tickets":{jsVariable:"digitalData.page.pageInfo.ticketSearchNum",storeLength:"pageview"},"DX Tracking Trigger":{jsVariable:"digitalData.dxTrack",storeLength:"pageview",forceLowerCase:!0,cleanText:!0},"event: Error Value":{customJS:function(){
if("undefined"!=typeof digitalData&&"undefined"!=typeof digitalData.event&&"undefined"!=typeof digitalData.event[0].eventInfo)return digitalData.event[0].eventInfo.errorVal},storeLength:"pageview"},"event: Opt In/Out":{customJS:function(){if("undefined"!=typeof digitalData&&"undefined"!=typeof digitalData.event&&"undefined"!=typeof digitalData.event[0].eventInfo)return digitalData.event[0].eventInfo.newsletter},storeLength:"pageview"},"external campaign: id":{queryParam:"cid",storeLength:"pageview",ignoreCase:1},"listing: category filter":{jsVariable:"digitalData.page.pageInfo.catFilter",storeLength:"pageview"},"listing: cuisine filter":{jsVariable:"digitalData.page.pageInfo.cuisineFilter",storeLength:"pageview"},"listing: date searched":{jsVariable:"digitalData.page.pageInfo.dateSearched",storeLength:"pageview"},"listing: dietary filter":{jsVariable:"digitalData.page.pageInfo.dietaryFilter",storeLength:"pageview"},"listing: location filter":{jsVariable:"digitalData.page.pageInfo.locationFilter",storeLength:"pageview"},"listing: meal filter":{jsVariable:"digitalData.page.pageInfo.mealFilter",storeLength:"pageview"},"listing: participant name":{customJS:function(){if("undefined"!=typeof digitalData&&"undefined"!=typeof digitalData.event){if("undefined"!=typeof digitalData.event[0].eventInfo)return digitalData.event[0].eventInfo.participantName;if("undefined"!=typeof digitalData.product&&"undefined"!=typeof digitalData.product.productInfo&&digitalData.product.productInfo.name)return digitalData.product.productInfo.name}},storeLength:"pageview"},"listing: party size":{jsVariable:"digitalData.page.pageInfo.partySize",storeLength:"pageview"},"listing: program":{jsVariable:"digitalData.page.pageInfo.program",storeLength:"pageview",forceLowerCase:!0},"listing: refinement":{jsVariable:"digitalData.page.pageInfo.refinement",storeLength:"pageview"},"listing: sort by":{jsVariable:"digitalData.page.pageInfo.sortBy",storeLength:"pageview"},"listing: view type":{jsVariable:"digitalData.page.pageInfo.viewType",storeLength:"pageview"},"newsletter: email":{jsVariable:"digitalData.newsletter.email",storeLength:"pageview"},"newsletter: location":{jsVariable:"digitalData.newsletter.location",storeLength:"pageview"},"product: category":{jsVariable:"digitalData.product.productInfo.category",storeLength:"pageview"},"product: cuisine":{jsVariable:"digitalData.product.productInfo.cuisine",storeLength:"pageview"},"product: id":{jsVariable:"digitalData.product.productInfo.id",storeLength:"pageview"},"product: name":{customJS:function(){if("undefined"!=typeof digitalData){if("undefined"!=typeof digitalData.product&&"undefined"!=typeof digitalData.product.productInfo&&digitalData.product.productInfo.name)return digitalData.product.productInfo.name;if("undefined"!=typeof digitalData.event&&"undefined"!=typeof digitalData.event[0].eventInfo)return digitalData.event[0].eventInfo.participantName}},storeLength:"pageview"},"product: type":{jsVariable:"digitalData.product.productInfo.type",storeLength:"pageview"},"search: number of results":{jsVariable:"digitalData.page.pageInfo.onsiteSearchResults",storeLength:"pageview"},"search: search term":{jsVariable:"digitalData.page.pageInfo.onsiteSearchTerm",storeLength:"pageview"}},appVersion:"7QN",buildDate:"2019-10-23 16:29:55 UTC",publishDate:"2019-10-23 16:29:54 UTC"})}(window,document);